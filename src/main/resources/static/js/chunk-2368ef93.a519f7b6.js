(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2368ef93"],{"47d0":function(t,e,n){},"498a":function(t,e,n){"use strict";var r=n("23e7"),i=n("58a8").trim,a=n("c8d2");r({target:"String",proto:!0,forced:a("trim")},{trim:function(){return i(this)}})},"6a01":function(t,e,n){"use strict";n("47d0")},9377:function(t,e,n){"use strict";n("e0c3")},b8b7:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("com-skill-group",t._b({on:{"current-change":t.onCurrentChange}},"com-skill-group",t.viewProps,!1),[t.curSkill?n("ui-table-view",{attrs:{loading:t.loading,data:t.tableData,columns:t.columns,hidePager:""}},[n("div",{staticClass:"actions",attrs:{slot:"actions"},slot:"actions"},[n("span",[t._v("组成员列表")]),n("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.onAddMember()}}},[t._v("添加组成员")])],1)]):t._e()],1)},i=[],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("c5ee")),o={name:"SettingsWorkorderSkillGroup",components:{ComSkillGroup:a["a"]},data:function(){return{skills:[],tableData:[],curSkill:null,loading:!1,columns:[{label:"客服姓名",prop:"name"},{label:"账号状态",minWidth:80,render:function(t,e){var n=e.row;return n.status?t("el-tag",{props:{type:"info"}},"禁用"):t("el-tag","启用")}},{label:"邮箱",prop:"mail",minWidth:140},{label:"最近登录时间",prop:"time",minWidth:140},{label:"操作",width:80,fixed:"right",render:this.$hBtns({label:"移除",action:this.onDelMember})}]}},computed:{viewProps:function(){var t=this;return{onGetList:function(){return t.$http("/orderGroup/listGroup")},onEdit:function(e){return t.$http.post("/orderGroup/insertOrUpdateGroup",e).then((function(t){return t.data}))},onDelete:function(e){return t.$http.post("/orderGroup/removeGroup/".concat(e))}}}},methods:{onCurrentChange:function(t){this.curSkill=t,t&&this.getUsers()},getUsers:function(){var t=this;this.loading=!0,this.tableData=[],this.$post("/orderGroup/listByGroup",{groupId:this.curSkill.id}).then((function(e){var n=e.data;t.tableData=n})).finally((function(){t.loading=!1}))},onAddMember:function(){this.$openModal((function(){return n.e("chunk-2d0ba4de").then(n.bind(null,"3748"))}),{groupId:this.curSkill&&this.curSkill.id},{success:this.getUsers})},onDelMember:function(t){var e=this;this.$confirm("是否要从技能组中移除客服 ".concat(t.name," ？"),"移除提示").then((function(){e.$post("/orderGroup/deleteGroupUser",{userIds:[t.userId]+""}).then((function(){e.getUsers()}))}))}}},u=o,c=(n("6a01"),n("2877")),s=Object(c["a"])(u,r,i,!1,null,"10765f9e",null);e["default"]=s.exports},c5ee:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-absolute-container",class:t.prefix},[n("aside",{class:t.prefix+"_aside"},[n("header",{class:t.prefix+"_header"},[n("el-link",{attrs:{icon:"el-icon-plus",underline:!1,type:"primary"},on:{click:function(e){return t.edit()}}},[t._v("添加技能组")])],1),n("main",{class:t.prefix+"_main"},[n("el-scrollbar",{staticClass:"ui-scrollbar"},[n("ul",t._l(t.groupList,(function(e){return n("li",{key:e.id,class:[t.prefix+"_item",{active:t.current&&t.current.id===e.id}],on:{click:function(n){return t.changeCurrent(e)}}},[n("span",{class:t.prefix+"_item-name"},[t._v(t._s(e.name))]),n("span",{class:t.prefix+"_item-actions"},[n("i",{staticClass:"el-icon-edit",attrs:{title:"编辑"},on:{click:function(n){return n.stopPropagation(),t.edit(e)}}}),n("i",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(n){return n.stopPropagation(),t.del(e)}}})])])})),0)])],1)]),n("div",{class:t.prefix+"_member"},[t.current?n("header",{class:t.prefix+"_header"},[n("span",[t._v(t._s(t.current.name))])]):t._e(),n("main",{class:t.prefix+"_main"},[t.current?t._e():n("p",{class:t.prefix+"_tip"},[t._v("请添加技能组")]),t._t("default")],2)])])},i=[],a=n("1da1"),o=(n("b0c0"),n("a434"),n("498a"),n("96cf"),{name:"ComSkillGroup",props:{onAdd:Function,onEdit:{type:Function,required:!0},onDelete:{type:Function,required:!0},onGetList:{type:Function,required:!0}},data:function(){return{groupList:[],current:null,prefix:"com-skill-group"}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.onGetList();case 2:n=e.sent,r=n.data,t.groupList=r,t.changeCurrent(r[0]);case 6:case"end":return e.stop()}}),e)})))()},methods:{del:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm("是否要删除技能组“".concat(t.name,"”?"),"删除");case 2:return n.next=4,e.onDelete(t.id);case 4:r=e.groupList.indexOf(t),e.groupList.splice(r,1),e.current&&e.current.id===t.id&&e.changeCurrent(e.groupList[0]);case 7:case"end":return n.stop()}}),n)})))()},edit:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$prompt("技能组名称","".concat(t?"编辑":"添加","技能组"),{inputValue:t&&t.name,inputPlaceholder:"最大上限20个字",inputValidator:function(t){return t=t.trim(),t?!(t.length>20)||"技能组名称不能超过20个字符":"请输入技能组名称"}});case 2:if(r=n.sent,i=r.value,a=(i||"").trim(),!t){n.next=11;break}return n.next=8,e.onEdit({id:t.id,name:a});case 8:t.name=a,n.next=15;break;case 11:return n.next=13,(e.onAdd||e.onEdit)({name:a});case 13:o=n.sent,e.groupList.push({id:o,name:a});case 15:case"end":return n.stop()}}),n)})))()},changeCurrent:function(t){this.current=t,this.$emit("current-change",t)}}}),u=o,c=(n("9377"),n("2877")),s=Object(c["a"])(u,r,i,!1,null,null,null);e["a"]=s.exports},c8d2:function(t,e,n){var r=n("5e77").PROPER,i=n("d039"),a=n("5899"),o="​᠎";t.exports=function(t){return i((function(){return!!a[t]()||o[t]()!==o||r&&a[t].name!==t}))}},e0c3:function(t,e,n){}}]);