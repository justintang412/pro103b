(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1b866d8","chunk-59d04fc7"],{3280:function(e,t,a){},"56e1":function(e,t,a){"use strict";a("a4a2")},"8c45":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{label:e.data.fieldName}},[e.data.fieldType===e.T.INPUT?[e.readonly?a("span",[e._v(e._s(e.model))]):a("el-input",{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:e.data.fieldType===e.T.TEXTAREA?[e.readonly?a("span",[e._v(e._s(e.model))]):a("el-input",{attrs:{type:"textarea"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:e.data.fieldType===e.T.DATE?[e.readonly?a("span",[e._v(e._s(e.$adminCore.formatDate(+e.model,"yyyy-MM-dd")))]):a("el-date-picker",{attrs:{"value-format":"timestamp"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:e.data.fieldType===e.T.TIME?[e.readonly?a("span",[e._v(e._s(e.model))]):a("el-time-picker",{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:e.data.fieldType===e.T.NUM_INPUT?[e.readonly?a("span",[e._v(e._s(e.model))]):a("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:e.data.fieldType===e.T.SELECT?[e.readonly?a("span",[e._v(e._s(e.getText(e.model)))]):a("el-select",{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.options,(function(e){return a("el-option",{key:e.optionId,attrs:{value:e.optionId,label:e.value}})})),1)]:e.data.fieldType===e.T.CASCADER?[a("el-cascader",{class:{readonly:e.readonly},attrs:{disabled:e.readonly,options:e.options},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:e.data.fieldType===e.T.RADIO?[e.readonly?a("span",[e._v(e._s(e.getText(e.model)))]):a("el-radio-group",{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.options,(function(t){return a("el-radio",{key:t.optionId,attrs:{label:t.optionId}},[e._v(e._s(t.value))])})),1)]:e.data.fieldType===e.T.CHECKBOX?[e.readonly?a("span",[e._v(e._s(e.getText(e.model)))]):a("el-checkbox-group",{model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.options,(function(t){return a("el-checkbox",{key:t.optionId,attrs:{label:t.optionId}},[e._v(e._s(t.value))])})),1)]:e._e()],2)},o=[],r=a("ade3"),i=a("5530"),c=(a("d81d"),a("d3b7"),a("a02a")),l=a("e139"),s={data:function(){return{T:l["a"],options:[],model:this.value}},props:{data:{type:Object,default:function(){return{}}},value:{},readonly:Boolean},watch:{value:function(e){this.model=e},model:function(e){this.$emit("input",e)}},mounted:function(){var e=this;Object(l["c"])(this.data.fieldType)&&this.$http("/ccas/cc/field/option/details/".concat(this.data.fieldId)).then((function(t){var a=t.data;e.options=e.data.fieldType===l["a"].CASCADER?Object(c["F"])(a.map((function(e){var t=e.optionId,a=e.value;return Object(i["a"])(Object(i["a"])({},e),{},{value:t,label:a})})),{key:"optionId"}):a}))},methods:{getText:function(e){var t=this.options.reduce((function(e,t){return Object(i["a"])(Object(i["a"])({},e),{},Object(r["a"])({},t.optionId,t.value))}),{});return e instanceof Array?e.map((function(e){return t[e]}))+"":t[e]}}},d=s,u=(a("afc7"),a("2877")),m=Object(u["a"])(d,n,o,!1,null,"338d9c7e",null);t["a"]=m.exports},a4a2:function(e,t,a){},afc7:function(e,t,a){"use strict";a("3280")},e139:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return d}));var n,o=a("ade3"),r=(a("caad"),a("2532"),{INPUT:1,TEXTAREA:2,DATE:3,TIME:4,NUM_INPUT:5,SELECT:6,CASCADER:7,RADIO:8,CHECKBOX:9}),i=r,c=(n={},Object(o["a"])(n,i.INPUT,"单行文本框"),Object(o["a"])(n,i.TEXTAREA,"多行文本框"),Object(o["a"])(n,i.DATE,"日期"),Object(o["a"])(n,i.TIME,"时间"),Object(o["a"])(n,i.NUM_INPUT,"数值输入框"),Object(o["a"])(n,i.SELECT,"下拉框"),Object(o["a"])(n,i.CASCADER,"级联下拉框"),Object(o["a"])(n,i.RADIO,"单选框"),Object(o["a"])(n,i.CHECKBOX,"复选框"),n),l=function(e){return[i.SELECT,i.CASCADER,i.RADIO,i.CHECKBOX].includes(+e)},s=function(e){return c[e]},d=function(e){return 1===+e.requireWrite}},ed82:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[a("el-form",{ref:"Form",attrs:{"label-width":"6em",model:e.form,rules:e.rules}},[a("ui-text-field",{attrs:{label:"公司名称",prop:"companyName"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}}),a("el-form-item",{attrs:{label:"所在地区"}},[a("div",{staticClass:"flexbox"},[a("el-select",{attrs:{placeholder:"选择省份",clearable:""},on:{change:e.onProvinceChange},model:{value:e.form.companyProvinceCode,callback:function(t){e.$set(e.form,"companyProvinceCode",t)},expression:"form.companyProvinceCode"}},e._l(e.provinces,(function(e){return a("el-option",{key:e.provinceCode,attrs:{value:e.provinceCode,label:e.name}})})),1),a("el-select",{attrs:{placeholder:"选择城市",clearable:""},on:{change:e.onCityChange},model:{value:e.form.companyCityCode,callback:function(t){e.$set(e.form,"companyCityCode",t)},expression:"form.companyCityCode"}},e._l(e.cities,(function(e){return a("el-option",{key:e.cityCode,attrs:{value:e.cityCode,label:e.name}})})),1),a("el-select",{attrs:{placeholder:"选择地区",clearable:""},on:{change:e.onAreaChange},model:{value:e.form.companyAreaCode,callback:function(t){e.$set(e.form,"companyAreaCode",t)},expression:"form.companyAreaCode"}},e._l(e.areas,(function(e){return a("el-option",{key:e.areaCode,attrs:{value:e.areaCode,label:e.name}})})),1)],1)]),e.form.dataJson&&e.form.dataJson.length?e._l(e.form.dataJson,(function(t,n){return a("el-form-item",{key:t.fieldId,attrs:{label:t.fieldName,prop:"dataJson."+n+".val",rules:{trigger:t.fieldType>5?null:"blur",required:1===t.requireWrite,message:"该项不能为空"}}},[a("com-field",{attrs:{data:t},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"_.val"}})],1)})):e._e()],2)],1)},o=[],r=a("ade3"),i=a("5530"),c=a("1da1"),l=(a("96cf"),a("e9c4"),a("d3b7"),a("d81d"),a("4de4"),a("ac1f"),a("1276"),a("b0c0"),a("7db0"),a("a02a")),s=a("8c45"),d={components:{ComField:s["a"]},data:function(){var e=this;return{form:{dataJson:[]},provinces:[],cities:[],areas:[],rules:{companyName:Object(l["y"])("请输入公司名称")},modalProps:{width:"500px",title:"新建公司",okText:"新建",onSubmit:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:return t.next=4,e.$post("/ccas/cc/company/save",Object(i["a"])(Object(i["a"])({},e.form),{},{dataJson:JSON.stringify(e.form.dataJson.reduce((function(e,t){return Object(i["a"])(Object(i["a"])({},e),{},Object(r["a"])({},t.dataColName,t.val instanceof Array?t.val+"":t.val||""))}),{}))}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getProvinces(),t.next=3,e.getFields();case 3:e.form.dataJson=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{getFields:function(){var e=this;return this.$http("/ccas/cc/field/list",{params:{businessType:2}}).then((function(t){var a=t.data;return a.filter((function(e){return!e.predefinedType&&e.controlState})).map((function(t){var a=e.form[t.dataColName];return[7,9].indexOf(t.fieldType)>-1&&(a=a?a.split(",").filter((function(e){return e})):[]),Object(i["a"])(Object(i["a"])({},t),{},{val:a})}))}))},getProvinces:function(){var e=this;this.$http("/ccas/cc/region/province/list").then((function(t){var a=t.data;e.provinces=a}))},getCities:function(e){var t=this;this.cities=[],e&&this.$http("/ccas/cc/region/city/list/by/".concat(e)).then((function(e){var a=e.data;t.cities=a}))},getAreas:function(e){var t=this;this.areas=[],e&&this.$http("/ccas/cc/region/area/list/by/".concat(e)).then((function(e){var a=e.data;t.areas=a}))},onProvinceChange:function(e){this.form=Object(i["a"])(Object(i["a"])({},this.form),{},{companyCityCode:void 0,companyAreaCode:void 0,companyCity:void 0,companyArea:void 0,companyProvince:e&&this.provinces.find((function(t){return t.provinceCode===e})).name}),this.areas=[],this.getCities(e)},onCityChange:function(e){this.form=Object(i["a"])(Object(i["a"])({},this.form),{},{companyArea:void 0,companyAreaCode:void 0,companyCity:e&&this.cities.find((function(t){return t.cityCode===e})).name}),this.getAreas(e)},onAreaChange:function(e){this.form=Object(i["a"])(Object(i["a"])({},this.form),{},{companyArea:e&&this.areas.find((function(t){return t.areaCode===e})).name})}}},u=d,m=(a("56e1"),a("2877")),f=Object(m["a"])(u,n,o,!1,null,"627f4f54",null);t["default"]=f.exports}}]);