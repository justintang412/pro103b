(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28515444"],{"24c3":function(e,t,i){},"6d38":function(e,t,i){"use strict";i("24c3")},a5c9:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[e._v("您好，请填写如下表单，将您的故障照片或视频发送给我们，谢谢！")]),i("el-form",{attrs:{"label-position":"top"}},[i("el-form-item",{attrs:{label:"请点击按钮选择要上传的文件"}},[i("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",accept:"image/*,video/*"},on:{change:e.onChange}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.onSelect}},[e._v("选择文件")]),i("p",{staticClass:"tip"},[e._v("* 仅支持体积不超过20M的图片和视频类型文件")]),e.file?i("div",{staticClass:"media-wrap"},[e.isImg(e.file)?i("img",{attrs:{src:e.blobUrl}}):i("video",{attrs:{src:e.blobUrl,controls:"",preload:"metadata"}})]):e._e()],1),i("el-form-item",{attrs:{label:"图片/视频说明"}},[i("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),i("el-form-item",[i("div",{staticClass:"center"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-s-promotion"},on:{click:e.onSubmit}},[e._v("提 交")])],1)])],1)],1)},a=[],r=i("1da1"),o=i("5530"),s=(i("96cf"),i("d3b7"),i("2ca0"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("ac1f"),i("1276"),i("a4d3"),i("e01a"),i("60e2")),c=i("a02a"),l=i("bd90"),p={data:function(){return{form:{},file:null,blobUrl:null}},methods:{onSelect:function(){this.$refs.File.click()},onChange:function(e){var t=this,i=e.target,n=i.files[0];i.value="",n&&(["image/","video/"].some((function(e){return n.type.startsWith(e)}))?n.size>20971520?Object(c["x"])("文件大小不能超过20M"):(this.file=n,this.blobUrl=window.URL.createObjectURL(this.file),this.form=Object(o["a"])(Object(o["a"])({},this.form),{},{fileType:n.type.split("/")[0]}),setTimeout((function(){window.URL.revokeObjectURL(t.blobUrl)}),200)):Object(c["x"])("请选择图片或视频文件"))},onSubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return!e.file&&Object(c["x"])("请选择要上传的文件"),i=e.form,n=new FormData,n.append("file",e.file),n.append("fileType",i.fileType),i.description&&n.append("description",i.description),n.append("infoUuid",e.$route.params.id),t.next=9,l["b"].post("/file/handle/customerUpload",n,{baseURL:Object(s["d"])(!0)});case 9:e.$message.success("提交成功"),e.form={},e.file=e.blobUrl=null;case 12:case"end":return t.stop()}}),t)})))()},isImg:function(e){return e.type.startsWith("image/")}}},u=p,f=(i("6d38"),i("2877")),d=Object(f["a"])(u,n,a,!1,null,"3ca80ce4",null);t["default"]=d.exports}}]);