(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dde786e2"],{"1b02":function(e,t,n){"use strict";n("6bf3")},"498a":function(e,t,n){"use strict";var r=n("23e7"),a=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return a(this)}})},"6bf3":function(e,t,n){},c8d2:function(e,t,n){var r=n("5e77").PROPER,a=n("d039"),o=n("5899"),i="​᠎";e.exports=function(e){return a((function(){return!!o[e]()||i[e]()!==i||r&&o[e].name!==e}))}},ffd9:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[n("el-link",{staticClass:"btn-add",attrs:{type:"primary",size:"mini",icon:"el-icon-plus",underline:!1},on:{click:function(t){return e.onNodeAdd()}}},[e._v("添加选项")]),n("el-tree",{ref:"Tree",attrs:{"node-key":"optionId",data:e.options,"default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,a=t.data;return n("span",{staticClass:"custom-node"},[n("span",{staticClass:"custom-node-label"},[e._v(e._s(r.label))]),n("span",{staticClass:"custom-node-actions"},[n("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.onNodeEdit(a)}}}),e.row.fieldType===e.T.CASCADER?n("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.onNodeAdd(a)}}}):e._e(),n("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.onNodeDelete(a)}}})])])}}])})],1)},a=[],o=n("5530"),i=n("1da1"),c=(n("96cf"),n("d81d"),n("498a"),n("a02a")),u=n("e139"),s={props:["row"],data:function(){return{T:u["a"],options:[],modalProps:{title:"选项编辑",hideOK:!0,cancelText:"关闭"}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/ccas/cc/field/option/details/".concat(e.row.fieldId));case 2:n=t.sent,r=n.data,e.options=e.toTree(r.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{label:e.value})})));case 5:case"end":return t.stop()}}),t)})))()},methods:{update:function(e){return this.$post("/ccas/cc/field/save/for/option",e)},onNodeEdit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$prompt("请输入选项名称","编辑",{inputValue:e.label,inputValidator:function(e){var t=(e||"").trim();return t?!(t.length>30)||"选项名称不能超过30个字符":"请输入选项名称"}});case 2:return r=n.sent,a=r.value,n.next=6,t.update({value:a.trim(),fieldId:t.row.fieldId,parentId:e.parentId,optionId:e.optionId});case 6:t.$set(e,"label",a);case 7:case"end":return n.stop()}}),n)})))()},onNodeAdd:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$prompt("请输入选项名称","添加",{inputValidator:function(e){var t=(e||"").trim();return t?!(t.length>30)||"选项名称不能超过30个字符":"请输入选项名称"}});case 2:return r=n.sent,a=r.value,i=t.$refs.Tree,n.next=7,t.update({value:a.trim(),fieldId:t.row.fieldId,parentId:e&&e.optionId});case 7:c=n.sent.data,c=Object(o["a"])(Object(o["a"])({},c),{},{label:c.value}),i.append(c,e);case 10:case"end":return n.stop()}}),n)})))()},onNodeDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.$refs.Tree,n.next=3,t.$confirm("确认删除","删除");case 3:t.$http("/ccas/cc/field/option/del/".concat(e.optionId)).then((function(){r.remove(e.optionId)}));case 4:case"end":return n.stop()}}),n)})))()},toTree:function(e){return Object(c["F"])(e,{key:"optionId"})}}},d=s,l=(n("1b02"),n("2877")),p=Object(l["a"])(d,r,a,!1,null,"229f12b4",null);t["default"]=p.exports}}]);