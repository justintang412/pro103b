window.onload=function(){handlers&&(handlers.callphone=callphone_58,handlers.setStatus=overridSetStatus,handlers.getStatus=overridgetStatus)};var g_3rdNo="",monedagentno="",callcenter_config="0";function overridgetStatus(){return callStateHelper.getText(callStateHelper.getCurCallState())}function overridSetStatus(t){switch(t){case"空闲":FlashAgentX.SetSeatState(0);break;case"忙碌":FlashAgentX.SetSeatState(1);break;case"小休":FlashAgentX.SetSeatState(2)}}function showMessage(t){console&&console.log("操作提示:"+t)}function showMainStatus(t){var n=document.getElementById("hs_mainstatus");null!=n&&(n.innerHTML=t)}function showSubStatus(t){console&&console.log("调试信息----------\x3e"+t)}function callphone_58(t){"请输入电话号码"!=t&&""!=t?FlashAgentX.makecall(t,""):alert("电话号码不能为空"),console.log("phone"+t)}function onring_58(t,n){alert("onring_58:phone "+t+" callid:"+n),handlers&&handlers.onring(t,n)}function on_success_hangup_58(t,n,e,a,l,o){handlers&&handlers.on_success_hangup(t,n,e,a,l,o)}function on_fail_hangup_58(t,n,e,a,l,o){handlers&&handlers.on_fail_hangup(t,n,e,a,l,o),console&&console.log("tianji on_fail_hangup_58")}function oncalldata_58(t,n,e){handlers&&handlers.oncalldata(t,n,e)}function onconnected_58(t,n,e){handlers&&handlers.onconnected(t,n,e)}function onLogin(t){showSubStatus("onlogin:"+t),g_AcdInfo.isCheckIn=!0,setTimeout("FlashAgentX.setSeatState(0);",2e3),onCallState&&onCallState(1),handlers&&handlers.onlogined(t)}function onLogout(){g_AcdInfo.isCheckIn=!1,showSubStatus("onlogout "),handlers&&handlers.onlogouted()}function OnRingTime(t){try{if(showSubStatus&&showSubStatus("onRingTime  "+t.ringtime+" "+t.called),1==t.direct)return console&&console.log("执行呼入振铃:::"+t.caller),onCallState(12),void(onring_58&&onring_58(t.caller,t.callid))}catch(t){console&&console.log("执行【OnRingTime.1】异常:"+t.message)}try{onCallState(12)}catch(t){showSubStatus&&showSubStatus("执行【OnRingTime.2】异常:"+t.message)}oncalldata_58(t.ringtime,g_AcdInfo.optId,t.callid)}function OnAddedAgentCall(t,n,e){"0"==t?callDataHelper.UpdateSendCms():showSubStatus("业务数据添加失败:"+n)}function OnAnswer(t){try{showSubStatus&&showSubStatus("onanswer：  "+t.anstime+" "+t.called),onCallState(3),onconnected_58(t.anstime,g_AcdInfo.optId,t.callid)}catch(t){showSubStatus&&showSubStatus("执行【OnAnswer】异常:"+t.message)}}function OnHungupTime(t){try{showSubStatus&&showSubStatus("onhungupTime：  "+t.endtime),onCallState(1),1==t.direct?on_success_hangup_58&&on_success_hangup_58(t.anstime,t.endtime,t.caller,t.talktimelen,t.callid,0):on_success_hangup_58&&on_success_hangup_58(t.anstime,t.endtime,t.called,t.talktimelen,t.callid,1)}catch(t){showSubStatus&&showSubStatus("执行【OnHungupTime】异常:"+t.message)}}function OnAnswer3(t){showSubStatus&&showSubStatus("OnAnswer3：  "+t.anstime3+" "+t.called3),t.called3.length>5?onCallState&&onCallState(7):onCallState&&onCallState(6);var n=new Object;n.queue_name=callcenter_config,n.call_id=t.callid3,n.agent_id=g_AcdInfo.optId,n.agent_emp_no=g_AcdInfo.optId,n.call_type="dialtransfer"}function stopConsultAgc(){FlashAgentX.freeseat(),callDataHelper.getIsCallIn()?showMainStatus("来电:"+callDataHelper.getCaller()):showMainStatus("去电:"+callDataHelper.getCalled())}function stopConsultOut(){FlashAgentX.droptouser()}function start(){onCallState&&onCallState(0)}$((function(){function t(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}$("#btn_onoff_line").live("click",(function(){if(getButtonEnable(this))switch(this.fun_value){case 0:FlashAgentX.online();break;case 1:FlashAgentX.offline()}})),$("#btn_ready_busy").live("click",(function(n){if(!getButtonEnable($("#btn_ready_busy")))return $("#divShowStatus").hide(),void t(n);$("#divShowStatus").toggle(),t(n)})),$("#btn_readybusy_1").live("click",(function(){FlashAgentX.setSeatState(this.fun_value),$("#divShowStatus").hide()})),$("#btn_readybusy_2").live("click",(function(){FlashAgentX.setSeatState(this.fun_value),$("#divShowStatus").hide()})),$("#btn_login").live("click",(function(){if(getButtonEnable(this))switch(this.fun_value){case 0:FlashAgentX.checkin();break;case 1:FlashAgentX.checkout()}})),$("#btn_connect").live("click",(function(){FlashAgentX.connect()})),$("#btn_hold_unhold").live("click",(function(){if(getButtonEnable(this)){switch(this.fun_value){case 0:FlashAgentX.holduser();break;case 1:FlashAgentX.unholduser()}}})),$("#btn_toivr").live("click",(function(){getButtonEnable(this)&&showivrflow1()})),$("#btn_hungup").live("click",(function(){FlashAgentX.dropcall()})),$("#btn_callout").live("click",(function(){if(getButtonEnable(this))switch(this.fun_value){case 0:if(!getButtonEnable(this))return;switch(this.fun_value){case 0:var t=document.getElementById("dialout_input");null!=t&&""!=t.value?window.postMessage(JSON.stringify({type:"OnCustomCall",payload:[t.value,""]})):showSubStatus("请输入电话!");break;case 1:FlashAgentX.dropcall()}break;case 1:FlashAgentX.dropcall()}})),$(".dial_input_box div").live("click",(function(t){t.stopPropagation()})),$("#btn_consult").live("click",(function(){if(getButtonEnable(this))switch(this.fun_value){case 0:changeConsult();break;case 1:stopConsultAgc();break;case 2:stopConsultOut()}})),$("#btn_transfer").live("click",(function(t){if(getButtonEnable(this))switch(this.fun_value){case 0:FlashAgentX.transseat();break;case 1:FlashAgentX.transcall()}})),$("#btn_confence").live("click",(function(t){if(getButtonEnable(this))switch(this.fun_value){case 0:case 1:FlashAgentX.inmeet();break;case 2:case 3:FlashAgentX.unholduser()}})),$("#btn_monitor").live("click",(function(t){if(getButtonEnable(this)){window.open("agc_monitor.html","monitorwin","height=600, width=800, top=100, left=200, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")}})),$("#btn_monqueue").live("click",(function(t){if(getButtonEnable(this)){window.open("queue_monitor.html","monquewin","height=600, width=800, top=100, left=200, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")}})),$("#btn_stop_monitor").live("click",(function(t){getButtonEnable(this)&&FlashAgentX.outmoniter(monedagentno)})),$("#btn_force_join").live("click",(function(t){if(getButtonEnable(this))switch(this.fun_value){case 0:FlashAgentX.insert();break;case 1:FlashAgentX.outinsert()}})),$("#btn_whisper").live("click",(function(t){if(getButtonEnable(this))switch(this.fun_value){case 0:FlashAgentX.whisper();break;case 1:FlashAgentX.outwhisper()}})),$("#btn_tokeover").live("click",(function(t){if(getButtonEnable(this))switch(this.fun_value){case 0:FlashAgentX.robcall();break;case 1:FlashAgentX.dropcall()}})),$("#btn_force_hungup").live("click",(function(t){getButtonEnable(this)&&FlashAgentX.stopcall()}))})),setTimeout("start()",1e3);