(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f03df"],{"9c10":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[n("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"},on:{change:e.onFileSelectChange}}),n("el-form",{ref:"Form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[n("ui-text-field",{attrs:{label:"任务名称",prop:"assignmentName"},model:{value:e.form.assignmentName,callback:function(t){e.$set(e.form,"assignmentName",t)},expression:"form.assignmentName"}}),n("ui-text-field",{attrs:{label:"任务描述",prop:"description",type:"textarea",maxlength:200},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),n("ui-select",{attrs:{label:"选择模板",prop:"formId",options:e.templates,props:{value:"id",label:"name"},filterable:""},model:{value:e.form.formId,callback:function(t){e.$set(e.form,"formId",t)},expression:"form.formId"}}),n("el-form-item",{attrs:{label:"数据导入",prop:"file"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.onSelectFile}},[e._v(e._s(e.form.file?"重新选择":"选择文件"))]),n("a",{staticStyle:{"margin-left":"10px"},on:{click:e.downloadTemplate}},[e._v("下载模板")]),e.form.file?n("p",[e._v(e._s(e.form.file.name))]):e._e()],1)],1)],1)},a=[],i=n("5530"),o=n("15fd"),s=n("1da1"),l=(n("d3b7"),n("8a79"),n("b0c0"),n("96cf"),n("a02a")),m=["file"],c={props:["entid"],data:function(){var e=this;return{form:{},rules:{assignmentName:Object(l["y"])("请输入任务名称"),description:Object(l["y"])("请输入任务描述"),formId:Object(l["z"])("请选择模板"),file:Object(l["z"])("请导入Excel文件")},templates:[],modalProps:{isEdit:!!this.row,onSubmit:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:return n=e.form,r=n.file,a=Object(o["a"])(n,m),s=new FormData,s.append("file",r),t.next=7,e.$http.post("/qn/assignment/importAssignmentDetail",s,{params:Object(i["a"])(Object(i["a"])({},a),{},{entid:e.entid})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}}},mounted:function(){var e=this;this.$http("/qn/formwork/formworkList",{params:{entid:this.entid}}).then((function(t){var n=t.data;e.templates=n}))},methods:{onSelectFile:function(){this.$refs.File.click()},onFileSelectChange:function(e){var t=e.target,n=t.files[0],r=[".xls",".xlsx"];r.some((function(e){return n.name.endsWith(e)}))?(this.$set(this.form,"file",n),this.$refs.Form.validateField("file")):this.$message.error("请选择Excel文件"),t.value=""},downloadTemplate:function(){var e=this;Object(l["i"])({fileName:"任务模板下载.xls",action:function(){return e.$http("/qn/formwork/downloadExcel",{params:{},responseType:"blob"})}})}}},f=c,p=n("2877"),u=Object(p["a"])(f,r,a,!1,null,null,null);t["default"]=u.exports}}]);