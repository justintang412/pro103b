(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61777577"],{"0bf2":function(e,n,t){"use strict";t("7fb8")},"1c86":function(e,n,t){"use strict";t("69a9")},"66a2":function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ui-tab-view",{attrs:{tabs:e.tabs,nocache:""}})},r=[],a=t("2909"),o=(t("d81d"),t("c6d0")),l=function(e,n){return{label:e,component:{render:function(e){return e(o["a"],{props:{type:n,manage:!0}})}}}},c={data:function(){return{tabs:[["图片","image"],["视频","video"]].map((function(e){return l.apply(void 0,Object(a["a"])(e))}))}}},u=c,s=t("2877"),d=Object(s["a"])(u,i,r,!1,null,null,null);n["default"]=d.exports},"69a9":function(e,n,t){},"6e6b":function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-image",{ref:"Image",attrs:{src:e.curViewUrl,"preview-src-list":[e.curViewUrl]}})},r=[],a=(t("d3b7"),t("3ca3"),t("ddb0"),{data:function(){return{curViewUrl:null}},methods:{preview:function(e){var n=e.fileType,i=e.fileUrl;"image"===n?this.imagePreview(i):"video"===n&&this.$openModal((function(){return t.e("chunk-59a1b65e").then(t.bind(null,"0589"))}),{src:i})},imagePreview:function(e){var n,t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35,r=1,a=100;this.curViewUrl=e;var o=function e(){var o=t.$el.querySelector(".el-image img");if(o)o.click();else{if(++r<i)return r>5&&!n&&(a+=100,n=t.$loading()),setTimeout(e,a);t.$message.warning("图片打开失败，请重试！")}n&&n.close()};o()}}}),o=a,l=(t("1c86"),t("2877")),c=Object(l["a"])(o,i,r,!1,null,"54e0d375",null);n["a"]=c.exports},"7fb8":function(e,n,t){},c6d0:function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[t("ui-text-field",{attrs:{label:e.manage?"创建者":"",placeholder:"请输入坐席工号"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.workNo,callback:function(n){e.$set(e.searchForm,"workNo",n)},expression:"searchForm.workNo"}}),t("ui-text-field",{attrs:{label:e.manage?"描述":"",placeholder:"请输入描述"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.description,callback:function(n){e.$set(e.searchForm,"description",n)},expression:"searchForm.description"}})]},proxy:!0},{key:"actions",fn:function(){return[e.manage?t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.onAdd}},[e._v("添加"+e._s(e.isVideo?"视频":"图片"))]):e._e()]},proxy:!0},{key:"other",fn:function(){return[t("media-previewer",{ref:"Previewer"})]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],a=(t("ac1f"),t("5319"),t("d3b7"),t("3ca3"),t("ddb0"),t("a02a")),o=t("6e6b"),l={mixins:[window.mixTableView],components:{MediaPreviewer:o["a"]},props:["type","manage","onSend","disabledSend"],data:function(){var e=this;return{columns:[{label:"名称",minWidth:120,render:function(e,n){var t=n.row;return e("span",t.fileName.replace(/\d+_/,""))}},{label:"描述",prop:"description",minWidth:120},{label:"创建者",prop:"workNo"},{label:"创建时间",prop:"uploadTime",minWidth:140},{label:"操作",width:100,fixed:"right",render:function(n,t){var i=t.row;return e.$hBtns([{label:"预览",action:e.onView},e.manage&&{label:"删除",action:e.onDelete},e.onSend&&{label:"发送",action:e.onSend,props:{disabled:!!e.disabledSend}}])(n,{row:i})}}],curViewUrl:null}},computed:{isVideo:function(){return"video"===this.type}},mounted:function(){this.getData(),Object(a["g"])(this,this.getData)},methods:{fetchMethod:function(e){return this.$http("/file/handle/getMedia?fileType=".concat(this.type),{params:e}).then((function(e){return e.data}))},onAdd:function(){this.$openModal((function(){return t.e("chunk-2d0f066d").then(t.bind(null,"9be3"))}),{type:this.type},{success:this.onEditSuccess})},onView:function(e){this.$refs.Previewer.preview(e)},onDelete:function(e){var n=this;this.delData({action:function(){return n.$post("/file/handle/deleteFile",{delFlag:1,id:e.id})}})}}},c=l,u=(t("0bf2"),t("2877")),s=Object(u["a"])(c,i,r,!1,null,"11f70690",null);n["a"]=s.exports}}]);