(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa7a2"],{"10d1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[a("el-form-item",{attrs:{label:"创建模板时间"}},[a("ui-date-range-picker",{attrs:{clearable:!1},on:{change:e.onTimeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),a("ui-select",{attrs:{label:"模板类型",clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.templateType,callback:function(t){e.$set(e.searchForm,"templateType",t)},expression:"searchForm.templateType"}},[a("el-option",{attrs:{label:"通知短信",value:"1"}}),a("el-option",{attrs:{label:"营销短信",value:"2"}})],1),a("ui-text-field",{attrs:{label:"模板名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.templateName,callback:function(t){e.$set(e.searchForm,"templateName",t)},expression:"searchForm.templateName"}})]},proxy:!0},{key:"actions",fn:function(){return[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.onEdit()}}},[e._v("新增模板")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],i=a("1da1"),o=a("3835"),l=a("5530"),c=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("a434"),a("a02a")),s=a("14a9"),u={mixins:[window.mixTableView],data:function(){var e=this;return{timerange:[],columns:[{label:"模板名称",prop:"templateName",minWidth:120},{label:"模板签名",prop:"templateSignName",minWidth:120},{label:"模板内容",prop:"templateContent",minWidth:140,showOverflowTooltip:!1},{label:"创建时间",prop:"createTime",minWidth:140},{label:"审核状态",render:function(e,t){var a=t.row;return e("span",Object(s["a"])(a.checkStatus))}},{label:"备注",prop:"remark",minWidth:140},{label:"操作",fixed:"right",width:150,render:function(t,a){var n=a.row,r=a.$index;return e.$hBtns([{label:"查看",action:e.onView},{label:1===+n.templateStatus?"停用":"启用",action:e.onUpdateStatus.bind(e,r)},{label:"编辑",action:e.onEdit,props:{disabled:3!==+n.checkStatus}},{label:"删除",action:e.onDelete,props:{disabled:2!==+n.templateStatus}}])(t,{row:n})}}]}},computed:{entId:function(){return this.$store.state.userData.entid}},mounted:function(){this.getData(),Object(c["g"])(this,this.getData)},methods:{fetchMethod:function(e){return this.$post("/message/template/getMessageTemplate",Object(l["a"])(Object(l["a"])({},e),{},{entId:this.entId})).then((function(e){return e.data}))},onTimeChange:function(e){var t=e||[],a=Object(o["a"])(t,2),n=a[0],r=a[1];this.searchForm=Object(l["a"])(Object(l["a"])({},this.searchForm),{},{startDay:n,endDay:r}),this.onSearch()},onEdit:function(e){this.$openModal((function(){return a.e("chunk-2d216404").then(a.bind(null,"c254"))}),{row:e,entId:this.entId},{success:this.onEditSuccess})},onView:function(e){this.$openModal((function(){return a.e("chunk-2dca9ce3").then(a.bind(null,"f8a0"))}),{row:e})},onUpdateStatus:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.tableData.data,r=n[e],i="1"===r.templateStatus?"2":"1",a.next=5,t.$confirm("是否要".concat("1"===i?"启用":"停用"," ").concat(r.templateName," 这条短信模板？"),"修改状态");case 5:return a.next=7,t.$post("/message/template/stopTemplateStatus",{templateId:r.templateId,entId:t.entId,templateStatus:i});case 7:n.splice(e,1,Object(l["a"])(Object(l["a"])({},r),{},{templateStatus:i}));case 8:case"end":return a.stop()}}),a)})))()},onDelete:function(e){var t=this;this.delData({desc:"是否要删除 ".concat(e.templateName," 这条短信模板？"),action:function(){return t.$post("/message/template/deleteMessageTemplate",{templateId:e.templateId,entId:t.entId})}})}}},p=u,m=a("2877"),d=Object(m["a"])(p,n,r,!1,null,null,null);t["default"]=d.exports}}]);