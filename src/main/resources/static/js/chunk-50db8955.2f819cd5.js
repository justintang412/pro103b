(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50db8955"],{"0bf2":function(e,t,n){"use strict";n("7fb8")},1447:function(e,t,n){},"1c86":function(e,t,n){"use strict";n("69a9")},"274e":function(e,t,n){},2904:function(e,t,n){"use strict";n("a88d")},2963:function(e,t,n){"use strict";n("274e")},"29a3":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"com-video-call-ui"},[n("div",{staticClass:"wrapper"},[e.visible?n("div",{staticClass:"video-wrap",class:{hidden:!e.videoVisible}},[n("iframe",{attrs:{src:e.src,frameborder:"0"}}),e.drag?n("div",{staticClass:"overlay"}):e._e()]):e._e(),n("div",{staticClass:"btns"},[n("el-link",{staticClass:"btn-rank",attrs:{underline:!1,title:"移动",icon:"el-icon-rank"},nativeOn:{mousedown:function(t){return e.onBtnRankMousedown.apply(null,arguments)}}}),n("el-link",{attrs:{underline:!1,title:e.btnVideoTitle,icon:"el-icon-video-camera"},on:{click:function(t){return e.onVideoShow()}}}),e.videoVisible?n("el-link",{attrs:{underline:!1,title:"全屏模式",icon:"el-icon-full-screen"},on:{click:e.onFullscreen}}):e._e()],1)]),e.drag?n("div",{staticClass:"overlay fixed"}):e._e()])},r=[],o=n("a02a"),s={data:function(){return{videoVisible:!1,src:null,visible:!0,drag:!1}},computed:{btnVideoTitle:function(){return"".concat(this.videoVisible?"隐藏":"显示","视频窗口")}},methods:{onVideoShow:function(e){this.videoVisible=Object(o["v"])(e)?!this.videoVisible:e},onFullscreen:function(){this.$el.querySelector("iframe").requestFullscreen()},updatePosition:function(e,t){var n=this;this.$nextTick((function(){var i=window.innerHeight,a=n.$el,r=a.offsetHeight,o=Math.max(10,(i-r)/2);a.style.top="".concat(o,"px"),e&&n.onVideoShow(t)}))},updateSrc:function(e,t){var n=this;this.visible=!1;var i=this.videoVisible;this.$nextTick((function(){n.visible=!0,n.onVideoShow(!0),n.src=e,n.updatePosition(t,i)}))},onBtnRankMousedown:function(e){e.preventDefault();var t=this,n=this.$el;function i(e){var t=n.querySelector(".btns"),i=t.offsetHeight,a=t.offsetWidth;n.style.top=Math.min(Math.max(0,e.pageY),window.innerHeight-i)+"px",n.style.right=Math.min(Math.max(0,window.innerWidth-e.pageX),window.innerWidth-a)+"px"}function a(){t.drag=!1,window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",a)}this.drag=!0,window.addEventListener("mousemove",i),window.addEventListener("mouseup",a)}}},l=s,c=(n("5e87"),n("2877")),u=Object(c["a"])(l,a,r,!1,null,null,null),d=u.exports,f=function(){var e=null,t=function(){return e||(e=new i["default"]({mounted:function(){document.body.appendChild(this.$el)},beforeDestroy:function(){this.$el.remove()},methods:{openView:function(e,t){var n=this;this.$nextTick((function(){n.$refs.View.updateSrc(e,t)}))}},render:function(e){return e(d,{ref:"View"})}}).$mount()),e};return function(e,n){t().openView(e,n)}}()},"3aa4":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui-absolute-container page-media-link-manage",class:{hasCallInfo:e.hasCallInfo}},[n("div",{staticClass:"interactive"},[n("com-interactive",{attrs:{callParam:e.callParam}})],1),n("div",{staticClass:"material"},[n("ui-tab-view",{attrs:{tabs:e.tabs,nocache:""}}),n("com-send-cb-link",{attrs:{onSend:e.onCbLinkSend}})],1)])},a=[],r=n("1da1"),o=(n("99af"),n("96cf"),n("60e2")),s=n("e46c"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container"},[n("header",{staticClass:"header"},[n("span",[e._v(" CallID: "),n("b",[e._v(e._s(e.callParam.callId))])]),n("span",[e._v(" 通话号码: "),n("b",[e._v(e._s(e.callParam.phone))])])]),n("main",{ref:"Main",staticClass:"main"},[n("com-msg-list",{attrs:{msgList:e.msgList}})],1)])},c=[],u=n("e6f4"),d=n("b233"),f={props:["callParam"],components:{ComMsgList:d["a"]},data:function(){return{msgList:[]}},mounted:function(){var e=this;this.$once("hook:beforeDestroy",(function(){e.clearTimer()}))},watch:{callParam:{immediate:!0,handler:"getData"},"msgList.length":{immediate:!0,handler:"onMsgListChange"}},methods:{getData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearTimer(),t.prev=1,t.next=4,Object(u["g"])(e.callParam.callId);case 4:e.msgList=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](1);case 9:e.tid=setTimeout(e.getData,1e4);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},clearTimer:function(){clearTimeout(this.tid)},onMsgListChange:function(){var e=this;this.$nextTick((function(){var t=e.$refs.Main;t&&(t.scrollTop=t.scrollHeight)}))}}},m=f,p=(n("2904"),n("2877")),h=Object(p["a"])(m,l,c,!1,null,"1a4ae87c",null),v=h.exports,b=n("c6d0"),w=n("d0c2"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({},"ui-table-view",e.viewProps,!1),e.viewListeners))},k=[],y=(n("d3b7"),n("3ca3"),n("ddb0"),n("a02a")),x={mixins:[window.mixTableView],props:["onSend"],data:function(){return{columns:[{label:"模板名称",prop:"templateName"},{label:"模板描述",prop:"description",minWidth:140},{label:"创建时间",prop:"createTime",minWidth:140},{label:"操作",width:100,fixed:"right",render:this.$hBtns([{label:"预览",action:this.onView},{label:"发送",action:this.onSend}])}]}},mounted:function(){this.getData(),Object(y["g"])(this,this.getData)},methods:{fetchMethod:function(e){return this.$http("/template/media/getTemp",{params:e}).then((function(e){return e.data}))},onView:function(e){this.$openModal((function(){return n.e("chunk-2531775d").then(n.bind(null,"1dbdf"))}),{row:e})}}},C=x,_=Object(p["a"])(C,g,k,!1,null,null,null),S=_.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-form",{ref:"Form",attrs:{model:e.form,rules:e.rules}},[n("ui-text-field",{attrs:{label:"发送内容",prop:"SMSContent",type:"textarea",rows:"3"},model:{value:e.form.SMSContent,callback:function(t){e.$set(e.form,"SMSContent",t)},expression:"form.SMSContent"}}),n("el-form-item",{staticClass:"m0"},[n("div",{staticClass:"btns"},[n("el-button",{attrs:{loading:e.loading,type:"primary",icon:"el-icon-s-promotion"},on:{click:e.submit}},[e._v(" "+e._s(e.loading?"发送中...":"发送")+" ")])],1)])],1)],1)},O=[],M={props:["onSend"],data:function(){return{loading:!1,form:{},rules:{SMSContent:Object(y["y"])("请编写发送内容")}}},methods:{submit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:return e.loading=!0,t.prev=3,t.next=6,e.onSend(e.form.SMSContent);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](3);case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[3,8]])})))()}}},P=M,j=(n("401b"),Object(p["a"])(P,$,O,!1,null,"4e6073f4",null)),T=j.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-form",{attrs:{"label-width":"6em"}},[n("el-form-item",{attrs:{label:"呼叫类型"}},[n("el-radio-group",{model:{value:e.form.isvideo,callback:function(t){e.$set(e.form,"isvideo",t)},expression:"form.isvideo"}},[n("el-radio",{attrs:{label:!0}},[e._v("音视频")]),n("el-radio",{attrs:{label:!1}},[e._v("音频")])],1)],1),n("el-form-item",{attrs:{label:"分机"}},[e._v(" "+e._s(e.form.extno)+" ")]),n("ui-select",{attrs:{label:"视频质量",options:e.qualityList},model:{value:e.form.quality,callback:function(t){e.$set(e.form,"quality",t)},expression:"form.quality"}}),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-s-promotion"},on:{click:e.submit}},[e._v("发送消息")])],1)],1)],1)},I=[],D=n("5530"),L=(n("7db0"),n("29a3")),E={props:["onSend","callParam"],data:function(){return{form:{provider:1,isvideo:!0,quality:1,extno:3501},qualityList:[{label:"自动适配",value:1,vsize:{vwidth:null,vheight:null}},{label:"480P",value:2,vsize:{vwidth:480,vheight:640}},{label:"720P",value:3,vsize:{vwidth:720,vheight:1024}},{label:"1080P",value:4,vsize:{vwidth:1080,vheight:1920}}],queueList:[]}},computed:{user:function(){return this.$store.state.userData},callWorkInfo:function(){return this.$store.state.callWorkInfo}},mounted:function(){},methods:{getQueueList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/queue/getAllQueueNoPage",{params:{entId:e.user.entid}});case 2:e.queueList=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i,a,r,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.form,i=e.qualityList.find((function(e){return e.value===n.quality})),a=e.callParam.callId,a){t.next=5;break}return t.abrupt("return",Object(y["C"])("呼叫ID不存在"));case 5:return r="1111".concat(a).concat(e.callWorkInfo.extensionNumber),o=Object(D["a"])({extpwd:e.callWorkInfo.workPassword,iscallout:!0,extno:n.extno,called:r,isvideo:n.isvideo},i.vsize),t.next=9,e.onSend(Object(u["h"])(o));case 9:l={extno:e.callWorkInfo.extensionNumber,extpwd:e.callWorkInfo.workPassword,iscallout:!1,called:null,isvideo:n.isvideo,vheight:null,vwidth:null},Object(s["e"])(),Object(L["a"])(Object(u["h"])(l));case 12:case"end":return t.stop()}}),t)})))()},openVideoCallWin:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=640,i=700,a=Math.max(0,(window.screen.height-i)/2),r=window.screen.width-n+30,o="video_call",s=function(){var t=window.open(e,o,"\n          menubar=no,\n          location=no,\n          status=no,\n          top=".concat(a,",\n          left=").concat(r,"\n        "));return t.resizeTo(n,i),t};try{s()}catch(l){window.open("",o).close(),s()}case 7:case"end":return t.stop()}}),t)})))()}}},F=E,R=Object(p["a"])(F,V,I,!1,null,null,null),U=R.exports,W=function(e,t,n){return{label:e,component:{render:function(e){return e(t,{props:n})}}}},q=function(e,t){return W(e,b["a"],t)},N={mixins:[window.mixTableView],components:{ComInteractive:v,ComSendCbLink:T},data:function(){return{curViewUrl:null,callParam:Object(u["a"])(s["d"].get())}},computed:{hasCallInfo:function(){return!(!this.callParam.phone||!this.callParam.callId)},tabs:function(){return[q("图片",{type:"image",onSend:this.onMediaLinkSend}),q("视频",{type:"video",onSend:this.onMediaLinkSend}),W("通用文本",w["a"],{onSend:this.onTextSend}),W("表单",S,{onSend:this.onFormSend}),W("视频通话",U,{onSend:this.onVideoCallSend,callParam:this.callParam})]}},mounted:function(){var e=this,t=function(t){t.type===s["b"]?e.callParam=Object(u["a"])(t.payload):(t.type,s["c"])};this.$eventBus.$on(s["a"],t),this.$once("hook:beforeDestroy",(function(){e.$eventBus.$off(s["a"],t)}))},methods:{onCbLinkSend:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.hasCallInfo){n.next=2;break}return n.abrupt("return",Object(y["C"])("缺失呼叫ID或通话号码"));case 2:return i=t.callParam,n.next=5,t.$post("/file/handle/sendMsg",{callId:i.callId,userMobile:i.phone,url:Object(o["e"])("/sms-media-upload/"),SMSContent:e});case 5:t.$message.success("发送成功");case 6:case"end":return n.stop()}}),n)})))()},onMediaLinkSend:function(e){var t={video:"视频",image:"图片"}[e.fileType];this.smsSend("您好，烦请点击下面的链接查看产品".concat(t," ").concat(encodeURI(e.fileUrl)))},onTextSend:function(e){this.smsSend(e.msgContent)},onFormSend:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.hasCallInfo){n.next=2;break}return n.abrupt("return",Object(y["C"])("缺失呼叫ID或通话号码"));case 2:return n.next=4,t.$prompt("自定义短信内容","发送表单",{inputValue:"您好，烦请点击下面的链接填写表单，谢谢！",inputPlaceholder:"请输入短信内容",inputType:"textarea"});case 4:return i=n.sent,a=i.value,r=t.callParam,n.next=9,t.$post("/file/handle/sendTemplateMsg",{SMSContent:a,url:"".concat(Object(o["e"])("/form/")).concat(e.templateUid,"?uuid="),callId:r.callId,userMobile:r.phone,templateUid:e.templateUid});case 9:t.$message.success("发送成功");case 10:case"end":return n.stop()}}),n)})))()},smsSend:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.hasCallInfo){n.next=2;break}return n.abrupt("return",Object(y["C"])("缺失呼叫ID或通话号码"));case 2:return n.next=4,t.$confirm("确定发送？","发送");case 4:return i=t.callParam,n.next=7,t.$post("/file/handle/sendOperation",{callId:i.callId,userMobile:i.phone,SMSContent:e});case 7:t.$message.success("发送成功");case 8:case"end":return n.stop()}}),n)})))()},onVideoCallSend:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.hasCallInfo){n.next=2;break}return n.abrupt("return",Object(y["C"])("缺失呼叫ID或通话号码"));case 2:return n.next=4,t.$confirm("确定发送？","发送");case 4:return i=t.callParam,n.next=7,t.$post("/file/handle/sendVideo",{url:encodeURI(e),callId:i.callId,userMobile:i.phone,SMSContent:"您好，烦请点击下面的链接进行视频通话"});case 7:t.$message.success("发送成功");case 8:case"end":return n.stop()}}),n)})))()}}},A=N,B=(n("cc79"),Object(p["a"])(A,i,a,!1,null,null,null));t["default"]=B.exports},"401b":function(e,t,n){"use strict";n("1447")},"40b6":function(e,t,n){},"5e87":function(e,t,n){"use strict";n("8999")},"69a9":function(e,t,n){},"6e6b":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-image",{ref:"Image",attrs:{src:e.curViewUrl,"preview-src-list":[e.curViewUrl]}})},a=[],r=(n("d3b7"),n("3ca3"),n("ddb0"),{data:function(){return{curViewUrl:null}},methods:{preview:function(e){var t=e.fileType,i=e.fileUrl;"image"===t?this.imagePreview(i):"video"===t&&this.$openModal((function(){return n.e("chunk-59a1b65e").then(n.bind(null,"0589"))}),{src:i})},imagePreview:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35,a=1,r=100;this.curViewUrl=e;var o=function e(){var o=n.$el.querySelector(".el-image img");if(o)o.click();else{if(++a<i)return a>5&&!t&&(r+=100,t=n.$loading()),setTimeout(e,r);n.$message.warning("图片打开失败，请重试！")}t&&t.close()};o()}}}),o=r,s=(n("1c86"),n("2877")),l=Object(s["a"])(o,i,a,!1,null,"54e0d375",null);t["a"]=l.exports},7040:function(e,t,n){},"7fb8":function(e,t,n){},8999:function(e,t,n){},a88d:function(e,t,n){},b233:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"com-media-link-record-msglist"},[n("ul",e._l(e.msgList,(function(t){return n("li",{key:t.id},["customer"===t.messageBelong?n("div",{staticClass:"customer"},[n("div",{staticClass:"inner"},[n("header",[e._v(" 客户 "),n("span",{staticClass:"time"},[e._v(e._s(t.recordTime))])]),n("main",{class:{isMedia:e.isMedia(t)}},["form"===t.fileType?n("com-form-msg",{attrs:{content:e.getContent(t)},on:{preview:e.onPreview}}):"video"===t.fileType?n("video",{attrs:{src:t.fileUrl,controls:""},on:{play:e.onPlay}}):n("el-image",{attrs:{src:t.fileUrl,"preview-src-list":[t.fileUrl]}})],1)])]):"service"===t.messageBelong?n("div",{staticClass:"service"},[n("div",{staticClass:"inner"},[n("header",[e._v(" 客服"+e._s(t.workNo)+" "),n("span",{staticClass:"time"},[e._v(e._s(t.recordTime))])]),n("main",[n("div",{domProps:{innerHTML:e._s(e.parseContent(t))}})])])]):n("div",{staticClass:"service"},[n("div",{staticClass:"inner"},[n("header",[n("i",{staticClass:"el-icon-video-camera-solid icon"}),e._v(" 系统录制 "),n("span",{staticClass:"time"},[e._v(e._s(t.recordTime))])]),n("main",{staticClass:"isMedia"},["video"===t.recordFiletype?n("video",{attrs:{src:t.recordUrl,controls:""},on:{play:e.onPlay}}):"audio"===t.recordFiletype?n("audio",{attrs:{src:t.recordUrl,controls:""},on:{play:e.onPlay}}):e._e()])])])])})),0),n("media-previewer",{ref:"Previewer"})],1)},a=[],r=n("2909"),o=(n("caad"),n("d3b7"),n("159b"),n("ac1f"),n("5319"),n("99af"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[e._v("客户表单：")]),n("ul",{staticClass:"list"},e._l(e.content,(function(t,i){return n("li",{key:i,staticClass:"item"},[n("span",{staticClass:"label"},[e._v(e._s(t.field.title))]),e.isMedia(t)?[t.name?n("el-link",{staticClass:"link",attrs:{underline:!1,type:"primary"},on:{click:function(n){return e.onPreview(t)}}},[e._v("查看")]):e._e()]:e.isFile(t)?[t.name?n("el-link",{staticClass:"link",attrs:{underline:!1,type:"primary"},on:{click:function(n){return e.onDownload(t)}}},[e._v("下载附件")]):e._e()]:n("span",{staticClass:"value"},[e._v(e._s(e.getValue(t)))])],2)})),0)])}),s=[],l=(n("a15b"),n("b0c0"),n("1276"),n("a02a")),c=n("e6f4"),u={props:["content"],methods:{getValue:function(e){var t=c["b"],n=+e.field.type;return n===t.CASCADER?(e.name||[]).join("/"):n===t.DATE?this.$adminCore.formatDate(e.name):e.name+""},isMedia:function(e){return["image","video"].includes(e.fileType)},isFile:function(e){return+e.field.type===c["b"].UPLOAD},onPreview:function(e){this.$emit("preview",{fileType:e.fileType,fileUrl:e.name})},onDownload:function(e){var t=this;Object(l["i"])({fileName:e.name.split("/").pop(),action:function(){return t.$http(e.name,{responseType:"blob"})}})}}},d=u,f=(n("2963"),n("2877")),m=Object(f["a"])(d,o,s,!1,null,"5a75ddb4",null),p=m.exports,h=n("6e6b"),v={components:{ComFormMsg:p,MediaPreviewer:h["a"]},props:["msgList"],methods:{getContent:function(e){return JSON.parse(e.messageContact)},isMedia:function(e){return["video","image"].includes(e.fileType)},onPreview:function(e){this.$refs.Previewer.preview(e)},onPlay:function(e){var t=e.target,n=Object(r["a"])(this.$el.querySelectorAll("video,audio"));n.forEach((function(e){e!==t&&e.pause()}))},parseContent:function(e){var t=e.messageContact+(e.showUrl||""),n=/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/gim;return t.replace(n,(function(e){return'<a class="link" target="_blank" href='.concat(e,">").concat(e,"</a>")}))}}},b=v,w=(n("be99"),Object(f["a"])(b,i,a,!1,null,null,null));t["a"]=w.exports},be99:function(e,t,n){"use strict";n("40b6")},c6d0:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("ui-text-field",{attrs:{label:e.manage?"创建者":"",placeholder:"请输入坐席工号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.workNo,callback:function(t){e.$set(e.searchForm,"workNo",t)},expression:"searchForm.workNo"}}),n("ui-text-field",{attrs:{label:e.manage?"描述":"",placeholder:"请输入描述"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.description,callback:function(t){e.$set(e.searchForm,"description",t)},expression:"searchForm.description"}})]},proxy:!0},{key:"actions",fn:function(){return[e.manage?n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.onAdd}},[e._v("添加"+e._s(e.isVideo?"视频":"图片"))]):e._e()]},proxy:!0},{key:"other",fn:function(){return[n("media-previewer",{ref:"Previewer"})]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},a=[],r=(n("ac1f"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("a02a")),o=n("6e6b"),s={mixins:[window.mixTableView],components:{MediaPreviewer:o["a"]},props:["type","manage","onSend","disabledSend"],data:function(){var e=this;return{columns:[{label:"名称",minWidth:120,render:function(e,t){var n=t.row;return e("span",n.fileName.replace(/\d+_/,""))}},{label:"描述",prop:"description",minWidth:120},{label:"创建者",prop:"workNo"},{label:"创建时间",prop:"uploadTime",minWidth:140},{label:"操作",width:100,fixed:"right",render:function(t,n){var i=n.row;return e.$hBtns([{label:"预览",action:e.onView},e.manage&&{label:"删除",action:e.onDelete},e.onSend&&{label:"发送",action:e.onSend,props:{disabled:!!e.disabledSend}}])(t,{row:i})}}],curViewUrl:null}},computed:{isVideo:function(){return"video"===this.type}},mounted:function(){this.getData(),Object(r["g"])(this,this.getData)},methods:{fetchMethod:function(e){return this.$http("/file/handle/getMedia?fileType=".concat(this.type),{params:e}).then((function(e){return e.data}))},onAdd:function(){this.$openModal((function(){return n.e("chunk-2d0f066d").then(n.bind(null,"9be3"))}),{type:this.type},{success:this.onEditSuccess})},onView:function(e){this.$refs.Previewer.preview(e)},onDelete:function(e){var t=this;this.delData({action:function(){return t.$post("/file/handle/deleteFile",{delFlag:1,id:e.id})}})}}},l=s,c=(n("0bf2"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,"11f70690",null);t["a"]=u.exports},cc79:function(e,t,n){"use strict";n("7040")},d0c2:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("ui-text-field",{attrs:{label:e.manage?"内容":"",placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.msgContent,callback:function(t){e.$set(e.searchForm,"msgContent",t)},expression:"searchForm.msgContent"}}),n("ui-text-field",{attrs:{label:e.manage?"备注":"",placeholder:"请输入备注"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.remake,callback:function(t){e.$set(e.searchForm,"remake",t)},expression:"searchForm.remake"}})]},proxy:!0},{key:"actions",fn:function(){return[e.manage?[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.onEdit()}}},[e._v("新增")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.selectedRow.length},on:{click:function(t){return e.onDelete(e.selectedRow)}}},[e._v("删除已选")])]:e._e()]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},a=[],r=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("a02a")),o={mixins:[window.mixTableView],props:{manage:Boolean,onSend:{type:Function,default:function(){}}},data:function(){return{columns:[{type:"selection"},{label:"内容",prop:"msgContent",minWidth:140,showOverflowTooltip:!1},{label:"备注",prop:"remake",minWidth:140,showOverflowTooltip:!1},{label:"创建时间",prop:"createTime",minWidth:140},{label:"操作",width:100,fixed:"right",render:this.$hBtns(this.manage?[{label:"编辑",action:this.onEdit},{label:"删除",action:this.onDelete}]:[{label:"发送",action:this.onSend}])}]}},mounted:function(){this.getData(),Object(r["g"])(this,this.getData)},methods:{fetchMethod:function(e){return this.$http("/media/msg/get",{params:e}).then((function(e){return e.data}))},onEdit:function(e){this.$openModal((function(){return n.e("chunk-2d20edb9").then(n.bind(null,"b0c8"))}),{row:e},{success:this.onEditSuccess})},onDelete:function(e){var t=this;this.delData({rows:e,action:function(e){return t.$post("/media/msg/del",{ids:e.map((function(e){return e.id}))+""})}})}}},s=o,l=n("2877"),c=Object(l["a"])(s,i,a,!1,null,null,null);t["a"]=c.exports}}]);