(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a345fe26"],{"2bcb":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return m}));var r=a("fa65"),i=function(e){return Object(r["e"])("/rules/rulesgroup/getrulesById",{params:e})},s=function(e){return Object(r["e"])("/rules/rulesgroup/grouplistById",{params:e})},n=function(e){return Object(r["e"])("/rules/rulesgroup/grouplistByPage",{params:e})},o=function(e){return Object(r["e"])("/rules/rulesgroup/remove",{params:e})},l=function(e){return r["e"].post("/rules/rulesgroup/savegrouprules",e)},c=function(e){return Object(r["e"])("/rules/rulesgroup/updategrouprules",{params:e})},u=function(e){return Object(r["e"])("/rules/rulesgroup/chekremove",{params:e})},m=function(e){return Object(r["e"])("/rules/rulesgroup/cheksave",{params:e})}},"4aaf":function(e,t,a){"use strict";a("6548")},"548f":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._b({staticClass:"callDialog",on:{close:function(t){return e.onShow(!1)}}},"el-dialog",Object.assign({},e.modalProps,{title:"选择通话",showClose:!1,width:"80%"}),!1),[a("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-radio-group",{on:{change:e.handleStartTime},model:{value:e.searchForm.startTime,callback:function(t){e.$set(e.searchForm,"startTime",t)},expression:"searchForm.startTime"}},[a("el-radio-button",{attrs:{label:"最近24小时"}}),a("el-radio-button",{attrs:{label:"最近3天"}}),a("el-radio-button",{attrs:{label:"最近7天"}}),a("el-radio-button",{attrs:{label:"最近30天"}}),a("el-radio-button",{attrs:{label:"自定义时间"}})],1),e.isTimeRangeShow?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleStartDateRange},model:{value:e.searchForm.startTimeRange,callback:function(t){e.$set(e.searchForm,"startTimeRange",t)},expression:"searchForm.startTimeRange"}}):e._e()],1),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1),a("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getDataList(1)}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1),a("br")],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-key":"cdrId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),a("el-table-column",{attrs:{label:"通话ID",prop:"cdrId","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"文件名",prop:"fileName","show-overflow-tooltip":"","min-width":"80"}}),a("el-table-column",{attrs:{label:"开始时间",prop:"starttime","show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{label:"结束时间",prop:"endtime","show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{label:"通话时长",prop:"conDuration","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"上传时间",prop:"insertTime","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"坐席工号",prop:"seatsId","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"坐席姓名",prop:"seatsName","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"客户姓名",prop:"customerName","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"呼叫方向",prop:"dir","min-width":"80","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"主叫号码",prop:"caller","min-width":"80","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"被叫号码",prop:"called","min-width":"80","show-overflow-tooltip":""}})],1),a("el-pagination",{staticClass:"is-background",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":e.paginationInfo.currentPage,"page-sizes":e.paginationInfo.pageSizes,"page-size":e.paginationInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("div",{staticClass:"dialog-footer",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[a("div",{staticStyle:{"text-align":"left"}},[e._v("已选择共计"),a("span",{staticStyle:{margin:"0 10px",color:"#00CDB1"}},[e._v(e._s(e.selectedCalls))]),e._v("个通话")]),a("div",[a("el-button",{on:{click:e.handleCancelSelection}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleOkDialog}},[e._v("确 定")])],1)])],1)},i=[],s=(a("d3b7"),window.createEditView({data:function(){return{searchForm:{uploadTime:"",uploadTimeRange:"",keywords:null},isTimeRangeShow:!1,tableData:[],paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0},loading:!1,multipleSelection:[],selectedCallId:[]}},created:function(){this.getDataList()},computed:{selectedCalls:function(){return this.multipleSelection.length}},methods:{getDataList:function(e){var t=this,a={startTime:this.searchForm.startTimeRange?this.$adminCore.formatDate(this.searchForm.startTimeRange[0]):null,endTime:this.searchForm.startTimeRange?this.$adminCore.formatDate(this.searchForm.startTimeRange[1]):null,keyword:this.searchForm.keywords,offset:e||1+(this.paginationInfo.currentPage-1)*this.paginationInfo.pageSize,size:this.paginationInfo.pageSize};this.loading=!0,this.$http("/cti/cdr",{params:a}).then((function(e){e.ok?(t.tableData=e.data.rows,t.paginationInfo.total=e.data.count):t.$message.error(e.info)})).catch((function(e){t.$message.error("获取数据失败")})).finally((function(){t.loading=!1}))},handleStartTime:function(){var e=new Date,t=new Date;"最近24小时"===this.searchForm.startTime?(t.setTime(t.getTime()-864e5),this.searchForm.startTimeRange=[t,e]):"最近3天"===this.searchForm.startTime?(t.setTime(t.getTime()-2592e5),this.searchForm.startTimeRange=[t,e]):"最近7天"===this.searchForm.startTime?(t.setTime(t.getTime()-6048e5),this.searchForm.startTimeRange=[t,e]):"最近30天"===this.searchForm.startTime&&(t.setTime(t.getTime()-2592e6),this.searchForm.startTimeRange=[t,e]),"自定义时间"===this.searchForm.startTime?this.isTimeRangeShow=!this.isTimeRangeShow:this.isTimeRangeShow=!1},handleStartDateRange:function(){this.searchForm.startTime=this.searchForm.startTimeRange},onReset:function(){this.searchForm={},this.isShowSearchMore=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))},handleSelectionChange:function(e){if(this.multipleSelection=e,this.selectedCallId=[],this.multipleSelection.length)for(var t=0;t<this.multipleSelection.length;t++)this.selectedCallId.push(this.multipleSelection[t].id)},handleOkDialog:function(){this.onShow(!1),this.$emit("okDialog",this.multipleSelection.length,this.selectedCallId)},handleCancelSelection:function(){this.$refs.multipleTable.clearSelection(),this.onShow(!1)}}})),n=s,o=(a("a141"),a("2877")),l=Object(o["a"])(n,r,i,!1,null,"1d6065fb",null);t["a"]=l.exports},"5e23":function(e,t,a){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,a=null;return function(){var r=arguments,i=this;a&&clearTimeout(a),a=setTimeout((function(){e.apply(i,r),a=null}),t)}}a.d(t,"a",(function(){return r}))},6548:function(e,t,a){},"6c9b":function(e,t,a){},7329:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{staticClass:"is-background",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":e.paginationInfo.currentPage,"page-sizes":e.paginationInfo.pageSizes,"page-size":e.paginationInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],s={props:{paginationInfo:{type:Object,required:!0}},methods:{handleSizeChange:function(e){this.paginationInfo.pageSize=e,this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.paginationInfo.currentPage=e,this.$emit("currentChange",e)}}},n=s,o=a("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);t["a"]=l.exports},"7f33":function(e,t,a){"use strict";a("d35f")},a141:function(e,t,a){"use strict";a("6c9b")},d35f:function(e,t,a){},fa65:function(e,t,a){"use strict";a.d(t,"e",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return v}));a("d3b7"),a("b0c0");var r=a("4328"),i=a.n(r),s=a("bc3a"),n=a.n(s),o=a("5c96"),l=a("e5ac"),c=a("a02a"),u=a("60e2"),m=function(e){var t=e.statusCode,a=e.message,r=e.data,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i&&o["Message"].error(a||"发生未知异常");var s=new Error(a);return s.data=r,s.statusCode=t,Promise.reject(s)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u["a"],a=n.a.create();return a.defaults.baseURL=t,a.defaults.withCredentials=!0,e&&(a.defaults.transformRequest=[function(e){return i.a.stringify(e)}]),a.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return t&&!1!==e.isAuth&&(e.headers.Authorization=t),e})),a.interceptors.response.use((function(e){var t=e.data;return t instanceof Blob&&(t.name=Object(c["n"])(e.headers["content-disposition"])),"number"===typeof t.code?t.code?m({message:t.msg,data:t,statusCode:e.status}):t:!1!==t.ok?(Object(l["b"])(e.config.url)&&sessionStorage.setItem("token",e.headers.authorization||e.headers.Authorization),t):m({message:t.info,data:t,statusCode:e.status},"-20"!==t.code)}),(function(e){var t=e.response,a=t||{},r=a.data,i=a.status,s=t?r.info||e.message:"请求失败，请稍候重试";return 401===i?(sessionStorage.removeItem("token"),window.opener?window.close():(c["t"].close(),l["a"].dispatch("GO_LOGIN")),m({message:s,data:r,statusCode:i},!1)):m({message:s,data:r,statusCode:i})})),a},d=h(!0,u["b"]),p=h(),g=h(!0),f=function(){return g.post.apply(g,arguments)},b=h(!1,u["b"]),v=function(){return d.post.apply(d,arguments)}},fc83:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"qualityTask"},[a("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-radio-group",{on:{change:e.handleUploadTime},model:{value:e.searchForm.uploadTime,callback:function(t){e.$set(e.searchForm,"uploadTime",t)},expression:"searchForm.uploadTime"}},[a("el-radio-button",{attrs:{label:"最近24小时"}}),a("el-radio-button",{attrs:{label:"最近3天"}}),a("el-radio-button",{attrs:{label:"最近7天"}}),a("el-radio-button",{attrs:{label:"最近30天"}}),a("el-radio-button",{attrs:{label:"自定义时间"}})],1),e.isTimeRangeShow?a("el-date-picker",{staticClass:"uploadDatePicker",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleDateRange},model:{value:e.searchForm.uploadTimeRange,callback:function(t){e.$set(e.searchForm,"uploadTimeRange",t)},expression:"searchForm.uploadTimeRange"}}):e._e()],1),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.intelligenttaskName,callback:function(t){e.$set(e.searchForm,"intelligenttaskName",t)},expression:"searchForm.intelligenttaskName"}})],1),a("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[a("el-button",{staticClass:"btn-filter",attrs:{type:"text",icon:"el-icon-s-operation"},on:{click:e.searchMore}},[e._v("高级搜索")]),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getDataList(1)}}},[e._v("查询")]),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1),a("br"),e.isShowSearchMore?a("el-form-item",{attrs:{label:"最近更新时间"}},[a("el-date-picker",{staticClass:"updateDatePicker",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.updateTimeRange,callback:function(t){e.$set(e.searchForm,"updateTimeRange",t)},expression:"searchForm.updateTimeRange"}})],1):e._e(),e.isShowSearchMore?a("el-form-item",{attrs:{label:"通话条数范围"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"60px"},attrs:{placeholder:"(秒)"},model:{value:e.searchForm.telnumberstr,callback:function(t){e.$set(e.searchForm,"telnumberstr",t)},expression:"searchForm.telnumberstr"}}),e._v(" - "),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"60px"},attrs:{placeholder:"(秒)"},model:{value:e.searchForm.telnumberend,callback:function(t){e.$set(e.searchForm,"telnumberend",t)},expression:"searchForm.telnumberend"}})],1):e._e(),e.isShowSearchMore?a("el-form-item",{attrs:{label:"完成状态"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择状态"},model:{value:e.searchForm.state,callback:function(t){e.$set(e.searchForm,"state",t)},expression:"searchForm.state"}},e._l(e.stateList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e.isShowSearchMore?a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择状态"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()],1),a("div",{staticClass:"actionBar"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.onCreate}},[e._v("创建质检任务")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"任务名称","show-overflow-tooltip":"",prop:"intelligenttaskName","min-width":"100"}}),a("el-table-column",{attrs:{label:"描述",prop:"describes","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"类型",prop:"type","show-overflow-tooltip":"","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0===r.type?a("span",[e._v("定时")]):e._e(),1===r.type?a("span",[e._v("自定义")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"insertTime","min-width":"130"}}),a("el-table-column",{attrs:{label:"开始时间",prop:"startTime","min-width":"130"}}),a("el-table-column",{attrs:{label:"最近更新时间",prop:"updateTime","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"通话条数",prop:"telNumber","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"完成进度",prop:"percentage","show-overflow-tooltip":"","min-width":"120"}}),a("el-table-column",{attrs:{label:"状态",prop:"state","show-overflow-tooltip":"","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0===r.state?a("span",[e._v("未开始")]):e._e(),1===r.state?a("span",[e._v("进行中")]):e._e(),2===r.state?a("span",[e._v("已暂停")]):e._e(),3===r.state?a("span",[e._v("已完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",{staticClass:"ui-text-btns"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleView(r)}}},[e._v("查看通话")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),0===r.state||2===r.state?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleExcute(r)}}},[e._v("开始")]):1===r.state?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleStop(r)}}},[e._v("暂停")]):e._e()],1)]}}])})],1),a("ComPagination",{ref:"ComPagination",attrs:{paginationInfo:e.paginationInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}}),a("create-task",{ref:"CreateTask",on:{createSuccess:e.handleCreateSuccess,editSuccess:e.handleEditSuccess}})],1)},i=[],s=a("5530"),n=a("1da1"),o=(a("96cf"),a("d81d"),a("d3b7"),a("99af"),a("ac1f"),a("1276"),a("2bcb")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-drawer",e._b({attrs:{title:e.isEdit?"编辑质检任务":"创建质检任务",size:"730px"},on:{close:e.handleClose,opened:e.isOpen},scopedSlots:e._u([{key:"footer",fn:function(){return[e.isEdit?a("el-button",{attrs:{type:"primary"},on:{click:e.submitEdit}},[e._v("保存")]):a("el-button",{attrs:{type:"primary"},on:{click:e.submitCreate}},[e._v("创建")]),a("el-button",{on:{click:function(t){return e.onShow(!1)}}},[e._v("取消")])]},proxy:!0}])},"ui-drawer",Object.assign({},e.modalProps),!1),[a("el-form",{ref:"ctForm",attrs:{"label-width":"7em",rules:e.rulesCreate,model:e.createForm}},[a("div",{staticClass:"flexbox col-2"},[a("el-form-item",{attrs:{label:"任务名称",prop:"intelligenttaskName"}},[a("el-input",{attrs:{placeholder:"最多输入100个字符"},model:{value:e.createForm.intelligenttaskName,callback:function(t){e.$set(e.createForm,"intelligenttaskName",t)},expression:"createForm.intelligenttaskName"}})],1)],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.createForm.describes,callback:function(t){e.$set(e.createForm,"describes",t)},expression:"createForm.describes"}})],1),a("el-form-item",{attrs:{label:"类型",required:!e.isDisabled,prop:"type"}},[a("el-radio-group",{attrs:{disabled:e.isDisabled},on:{change:e.typeChange},model:{value:e.createForm.type,callback:function(t){e.$set(e.createForm,"type",t)},expression:"createForm.type"}},[a("el-radio",{attrs:{label:0}},[e._v("定时质检任务")]),a("el-radio",{attrs:{label:1}},[e._v("自定义质检任务")])],1)],1),a("el-form-item",[e.createForm.type?a("div",[a("el-button",{attrs:{type:"text",disabled:e.isDisabled},on:{click:e.onSelectCall}},[e._v("选择通话")]),a("p",{style:{color:e.isDisabled?"#C0C4CC":""}},[e._v("已选择共计"),a("span",{staticStyle:{margin:"0 10px"},style:{color:e.isDisabled?"#C0C4CC":"#00CDB1"}},[e._v(e._s(e.createForm.telNumber?e.createForm.telNumber:0))]),e._v("个通话")])],1):a("div",[a("div",[e._v(" 每日凌晨2点自动将通话列表中昨天 "),a("el-time-picker",{attrs:{size:"mini","value-format":"HH:mm:ss",disabled:e.isDisabled},model:{value:e.createForm.timeIntervalStr,callback:function(t){e.$set(e.createForm,"timeIntervalStr",t)},expression:"createForm.timeIntervalStr"}}),e._v(" - "),a("el-time-picker",{attrs:{size:"mini","value-format":"HH:mm:ss",disabled:e.isDisabled},model:{value:e.createForm.timeIntervalEnd,callback:function(t){e.$set(e.createForm,"timeIntervalEnd",t)},expression:"createForm.timeIntervalEnd"}}),e._v(" 的通话中: ")],1),a("div",{staticClass:"selectNum",staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{prop:"selPercentage"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.createForm.selPercentage,callback:function(t){e.$set(e.createForm,"selPercentage",e._n(t))},expression:"createForm.selPercentage"}})],1),a("el-select",{staticStyle:{width:"90px","margin-right":"5px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.createForm.selNumValue,callback:function(t){e.$set(e.createForm,"selNumValue",t)},expression:"createForm.selNumValue"}},e._l(e.selecOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("通话加入到此质检中 ")],1)])]),a("el-form-item",{attrs:{label:"开始时间",prop:"state"}},[a("el-radio-group",{attrs:{disabled:e.isDisabled},model:{value:e.createForm.state,callback:function(t){e.$set(e.createForm,"state",t)},expression:"createForm.state"}},[a("el-radio",{attrs:{label:1}},[e._v("立即开始")]),a("el-radio",{attrs:{label:0}},[e._v("手动开始")]),a("el-radio",{attrs:{label:3}},[e._v("立即开始并优先执行")])],1)],1),a("div",{staticClass:"flexbox col-2"},[a("el-form-item",{attrs:{label:"规则组",required:!e.isDisabled,prop:"groupId"}},[a("el-select",{attrs:{disabled:e.isDisabled},model:{value:e.createForm.groupId,callback:function(t){e.$set(e.createForm,"groupId",t)},expression:"createForm.groupId"}},e._l(e.ruleGroupList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("select-call",{ref:"SelectCall",on:{okDialog:e.okDialog}})],1)},c=[],u=a("548f"),m=a("5e23"),h=window.createEditView({data:function(){return{selecOption:[{value:1,label:"%"},{value:2,label:"个"}],rulesCreate:{intelligenttaskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],state:[{required:!0,message:"请选择开始时间",trigger:"change"}],groupId:[{required:!0,message:"请选择规则组",trigger:"change"}]},selNumValue:null,createForm:{},isTimedType:!0,isCustomType:!1,isEdit:!1,value1:"",ruleGroupList:[],selPerct:null,selNum:null,isDisabled:!1}},components:{SelectCall:u["a"]},methods:{handleClose:function(){this.isDisabled=!1,this.$refs.ctForm.resetFields(),this.onShow(!1)},onSelectCall:function(){this.$refs.SelectCall.show()},submitCreate:Object(m["a"])((function(e){var t=this,a=this,r=Object(s["a"])(Object(s["a"])({},a.createForm),{},{selPercentage:1===a.createForm.selNumValue?a.createForm.selPercentage+"%":a.createForm.selPercentage});this.$refs.ctForm.validate((function(e){e?t.$http.post("/intelligent/task/saveIntelligentTask",r).then((function(e){e.ok?(t.$message.success("创建成功"),a.$emit("createSuccess"),a.$refs.ctForm.resetFields()):t.$message.error("创建失败"),a.onShow(!1)})):t.$message.error("表单验证失败")}))})),submitEdit:Object(m["a"])((function(){var e=this;this.$http("/intelligent/task/updateIntelligentTaskstate",{params:{id:this.createForm.id,describes:this.createForm.describes,intelligenttaskName:this.createForm.intelligenttaskName}}).then((function(t){t.ok?(e.$message.success("编辑成功"),e.$emit("editSuccess")):e.$message.error("编辑失败"),e.onShow(!1)}))})),getRuleGroup:function(){var e=this;this.ruleGroupList=[],this.$http("/rules/rulesgroup/grouplistById").then((function(t){t.ok||e.$alert("请求失败!");for(var a=0;a<t.data.length;a++)e.ruleGroupList.push({value:t.data[a].id,label:t.data[a].groupName})}))},isOpen:function(){this.getRuleGroup()},typeChange:function(){1===this.createForm.type?(this.createForm.timeIntervalStr=null,this.createForm.timeIntervalEnd=null,this.createForm.selPercentage=null,this.selPerct=null,this.selNum=null,this.isCustomType=!0):0===this.createForm.type&&(this.createForm.cdrIresult=null,this.createForm.telNumber=0,this.isCustomType=!1)},onCreateConsumer:function(){this.$refs.ComConsumer.show()},okDialog:function(e,t){this.createForm.cdrIresult=t,this.createForm.telNumber=e}}}),d=h,p=(a("4aaf"),a("2877")),g=Object(p["a"])(d,l,c,!1,null,"6ca525c2",null),f=g.exports,b=a("7329"),v=a("71df"),w={data:function(){return{searchForm:{uploadTime:null,uploadTimeRange:null,intelligenttaskName:"",state:null,type:null,telnumberstr:null,telnumberend:null,updatetimeend:"",updatetimestr:""},stateList:[{label:"未开始",value:1},{label:"进行中",value:2},{label:"已暂停",value:3},{label:"已完成",value:4}],typeList:[{label:"定时",value:0},{label:"自定义",value:1}],isTimeRangeShow:!1,isShowSearchMore:!1,tableData:[],paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0,layout:"sizes, prev, pager, next, jumper, total"},loading:!1,ruleGroup:["对话规则"],ruleGroupList:[]}},components:{CreateTask:f,ComPagination:b["a"]},created:function(){this.getDataList(),this.getStatusList(),this.groupListById()},methods:{groupListById:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:if(a=t.sent,a.ok){t.next=6;break}return e.$alert("请求失败!"),t.abrupt("return",!1);case 6:e.ruleGroupList=a.data.map((function(e){return{value:e.id,label:e.groupName}}));case 7:case"end":return t.stop()}}),t)})))()},getDataList:function(e){var t=this,a={type:this.searchForm.type,starttime:this.searchForm.uploadTimeRange?this.$adminCore.formatDate(this.searchForm.uploadTimeRange[0]):null,endtime:this.searchForm.uploadTimeRange?this.$adminCore.formatDate(this.searchForm.uploadTimeRange[1]):null,state:this.searchForm.state,intelligenttaskName:this.searchForm.intelligenttaskName,telnumberend:this.searchForm.telnumberend,telnumberstr:this.searchForm.telnumberstr,updatetimestr:this.searchForm.updateTimeRange?this.$adminCore.formatDate(this.searchForm.updateTimeRange[0]):null,updatetimeend:this.searchForm.updateTimeRange?this.$adminCore.formatDate(this.searchForm.updateTimeRange[1]):null,offset:e||1+(this.paginationInfo.currentPage-1)*this.paginationInfo.pageSize,size:this.paginationInfo.pageSize};this.loading=!0,this.$http("/intelligent/task/listByPage",{params:a}).then((function(e){t.tableData=e.data.rows,t.paginationInfo.total=e.data.count})).catch((function(e){t.$message.error("获取数据失败")})).finally((function(){t.loading=!1}))},handleCreateSuccess:function(){this.getDataList()},handleEditSuccess:function(){this.getDataList()},getStatusList:function(){},handleResult:function(e){this.$router.push({path:"/".concat(v["a"],"/qualityInspectionResult/").concat(e.id)})},handleUploadTime:function(){var e=new Date,t=new Date;"最近24小时"===this.searchForm.uploadTime?(t.setTime(t.getTime()-864e5),this.searchForm.uploadTimeRange=[t,e]):"最近3天"===this.searchForm.uploadTime?(t.setTime(t.getTime()-2592e5),this.searchForm.uploadTimeRange=[t,e]):"最近7天"===this.searchForm.uploadTime?(t.setTime(t.getTime()-6048e5),this.searchForm.uploadTimeRange=[t,e]):"最近30天"===this.searchForm.uploadTime&&(t.setTime(t.getTime()-2592e6),this.searchForm.uploadTimeRange=[t,e]),"自定义时间"===this.searchForm.uploadTime?this.isTimeRangeShow=!this.isTimeRangeShow:this.isTimeRangeShow=!1},handleDateRange:function(){this.searchForm.uploadTime=this.searchForm.uploadTimeRange},searchMore:function(){this.isShowSearchMore=!this.isShowSearchMore},onReset:function(){this.searchForm={},this.isTimeRangeShow=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))},onCreate:function(){this.$refs.CreateTask.createForm={},this.$refs.CreateTask.show(),this.$refs.CreateTask.isDisabled=!1},handleEdit:function(e){this.$refs.CreateTask.show(),this.$refs.CreateTask.isEdit=!0,this.$refs.CreateTask.isDisabled=!0,this.$refs.CreateTask.createForm=Object(s["a"])({},e),e.selPercentage.indexOf("%")>=0?(this.$refs.CreateTask.createForm.selPercentage=e.selPercentage.split("%")[0],this.$set(this.$refs.CreateTask.createForm,"selNumValue",1)):(this.$refs.CreateTask.createForm.selPercentage=e.selPercentage,this.$set(this.$refs.CreateTask.createForm,"selNumValue",2))},handleExcute:function(e){var t=e.describes,a=e.id,r=e.intelligenttaskName,i=e.level,s=e.state,n=e.type,o=e.groupId,l=this.ruleGroupList.some((function(e){return e.id===o}));if(!l)return this.$confirm("未找到规则组，任务开始失败！",{confirmButtonText:"确定",type:"warning",showCancelButton:!1}).then((function(){return!1})),!1;this.$set(e,"state",1);var c={describes:t,id:a,intelligenttaskName:r,level:i,state:s,type:n};this.$http("/intelligent/task/updateIntelligentTaskstate",{params:c}).then((function(e){console.log("开始执行"),console.log(e)}))},handleStop:function(e){this.$set(e,"state",2);var t=e.describes,a=e.id,r=e.intelligenttaskName,i=e.level,s=e.state,n=e.type,o={describes:t,id:a,intelligenttaskName:r,level:i,state:s,type:n};this.$http("/intelligent/task/updateIntelligentTaskstate",{params:o}).then((function(e){console.log("暂停"),console.log(e)}))},handleView:function(e){this.$router.push({path:"/smart-quality/callManagement",query:{task:e.id}})}}},F=w,k=(a("7f33"),Object(p["a"])(F,r,i,!1,null,"5de2cf2b",null));t["default"]=k.exports}}]);