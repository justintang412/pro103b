(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d3874"],{"5cc3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("ui-text-field",{attrs:{label:"用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}}),n("ui-select",{attrs:{label:"接入渠道",options:e.channels,clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.channel,callback:function(t){e.$set(e.searchForm,"channel",t)},expression:"searchForm.channel"}}),n("ui-select",{attrs:{label:"技能组",options:e.skills,props:{value:"id",label:"name"},clearable:"",filterable:""},on:{change:e.onSkillChange},model:{value:e.searchForm.skill,callback:function(t){e.$set(e.searchForm,"skill",t)},expression:"searchForm.skill"}}),n("ui-select",{attrs:{label:"坐席",options:e.custs,props:{key:"id",value:"agentno",label:"name"},clearable:"",filterable:""},on:{change:e.onSearch},model:{value:e.searchForm.agentno,callback:function(t){e.$set(e.searchForm,"agentno",t)},expression:"searchForm.agentno"}}),n("el-form-item",{attrs:{label:"咨询时间"}},[n("ui-date-range-picker",{attrs:{type:"datetimerange"},on:{change:e.zTimeChange},model:{value:e.zTime,callback:function(t){e.zTime=t},expression:"zTime"}})],1),n("el-form-item",{attrs:{label:"服务时间"}},[n("ui-date-range-picker",{attrs:{type:"datetimerange"},on:{change:e.sTimeChange},model:{value:e.sTime,callback:function(t){e.sTime=t},expression:"sTime"}})],1)]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],i=n("3835"),s=n("1da1"),o=n("5530"),c=(n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("a02a")),l=n("934a"),u={mixins:[window.mixTableView],data:function(){return{channels:l["a"],columns:[{label:"用户名",prop:"nickname"},{label:"接入渠道",minWidth:80,render:function(e,t){var n=t.row;return e("span",l["a"][n.channel])}},{label:"服务坐席",prop:"agentno",minWidth:80},{label:"咨询时间",prop:"createtime",minWidth:140},{label:"服务时间",prop:"servicetime",minWidth:140},{label:"等待时长",render:function(e,t){var n=t.row;return e("span",Object(c["k"])(n.waittingtime,1))}},{label:"服务时长",render:function(e,t){var n=t.row;return e("span",Object(c["k"])(n.sessiontimes,1))}},{label:"地域",prop:"region",minWidth:200},{label:"操作",width:100,fixed:"right",render:this.$hBtns({label:"查看",action:this.onView})}],skills:[],custs:[],zTime:[],sTime:[]}},computed:{imUser:function(){return this.$store.getters.imUser},orgi:function(){return this.imUser.orgi}},mounted:function(){var e=this;this.setInitForm();var t=function(){e.getData(),e.getSkills()};t(),Object(c["g"])(this,t)},methods:{setInitForm:function(){this.zTime=[],this.sTime=[],this.tableForm={agentno:"",channel:"",sbegin:"",send:"",skill:"",username:"",zbegin:"",zend:""},this.searchForm=Object(o["a"])({},this.tableForm)},fetchMethod:function(e){return this.$imHttp("service/history?orgi=".concat(this.orgi),{params:e}).then((function(e){var t=e.data;return Object(o["a"])(Object(o["a"])({},t),{},{data:t.records})}))},getSkills:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$imHttp("/skill/list?orgi=".concat(e.orgi));case 2:e.skills=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},getCusts:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,t.$imHttp("/skill/custList",{params:{orgi:t.orgi,skillId:e}});case 3:n.t0=n.sent.data,n.next=7;break;case 6:n.t0=[];case 7:t.custs=n.t0;case 8:case"end":return n.stop()}}),n)})))()},onSkillChange:function(e){this.searchForm.agentno="",this.getCusts(e),this.onSearch()},zTimeChange:function(e){var t=e||[],n=Object(i["a"])(t,2),a=n[0],r=void 0===a?"":a,s=n[1],c=void 0===s?"":s;this.searchForm=Object(o["a"])(Object(o["a"])({},this.searchForm),{},{zbegin:r,zend:c}),this.onSearch()},sTimeChange:function(e){var t=e||[],n=Object(i["a"])(t,2),a=n[0],r=void 0===a?"":a,s=n[1],c=void 0===s?"":s;this.searchForm=Object(o["a"])(Object(o["a"])({},this.searchForm),{},{sbegin:r,send:c}),this.onSearch()},onView:function(e){this.$openModal((function(){return n.e("chunk-092df946").then(n.bind(null,"2cc5"))}),{row:Object(o["a"])(Object(o["a"])({},e),{},{agentserviceid:e.id}),imUser:this.imUser})}}},h=u,m=n("2877"),b=Object(m["a"])(h,a,r,!1,null,null,null);t["default"]=b.exports}}]);