(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c313"],{f1d6:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[n("ui-table-view",e._g(e._b({attrs:{inline:!1,columns:e.columns},scopedSlots:e._u([{key:"search",fn:function(){return[n("el-form-item",{attrs:{label:"坐席归属"}},[n("el-radio-group",{on:{change:function(t){return e.changeSeatType(e.seatType)}},model:{value:e.seatType,callback:function(t){e.seatType=t},expression:"seatType"}},e._l(e.radioData,(function(e){return n("el-radio",{key:e,attrs:{label:e}})})),1)],1),n("el-form-item",{attrs:{label:"工号范围"}},[n("el-col",{attrs:{span:11}},[n("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.beginWorkNo,callback:function(t){e.$set(e.searchForm,"beginWorkNo",t)},expression:"searchForm.beginWorkNo"}})],1),n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v(" ~ ")]),n("el-col",{attrs:{span:11}},[n("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.endWorkNo,callback:function(t){e.$set(e.searchForm,"endWorkNo",t)},expression:"searchForm.endWorkNo"}})],1)],1)]},proxy:!0},{key:"actions",fn:function(){return[n("div",{staticStyle:{"text-align":"right"}},["待分配坐席"==e.seatType||"其它队列坐席（除当前队列外坐席）"==e.seatType?n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:!e.selectedRow.length},on:{click:e.numberAdd}},[e._v("添加")]):e._e(),"队内坐席"==e.seatType?n("el-button",{attrs:{type:"primary",icon:"el-icon-minus",disabled:!e.selectedRow.length},on:{click:function(t){return e.onDelete(e.selectedRow)}}},[e._v("移除")]):e._e()],1)]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))],1)},r=[],i=n("5530"),a=(n("d81d"),{mixins:[window.mixTableView],props:["row"],data:function(){return{seatType:"队内坐席",radioData:["队内坐席","待分配坐席","其它队列坐席（除当前队列外坐席）","全部坐席"],modalProps:{title:"成员管理",width:"730px",hideFooter:!0}}},computed:{columns:function(){var e=this;return"队内坐席"===this.seatType?[{type:"selection",width:60,align:"center"},{title:"工号",key:"workNo"},{title:"优先级",key:"worklevel",render:function(t,n){var o=n.row,r=n.$index;return t("el-input-number",{props:{min:0,max:5,controls:!1,value:+o.workLevel||0},on:{change:function(t){e.$post("/cti/work/updateworklevel",{queueId:o.queueId,workNo:o.workNo,workLevel:t,entId:o.entId}).then((function(){e.$set(e.dataModalNumber.list[r],"workLevel",t)}))}}})}},{title:"分配状态",key:"label"}]:[{type:"selection",width:60},{title:"工号",key:"workNo"},{title:"分配状态",key:"label"}]}},mounted:function(){this.setInitForm(),this.getData()},methods:{setInitForm:function(){this.tableForm={entId:this.row.entId,queueId:this.row.queueId},this.searchForm=Object(i["a"])({},this.tableForm)},fetchMethod:function(e){var t=this,n=this.seatType;return"队内坐席"===n?this.$post("/cti/work/queuectiwork",e).then((function(e){var t=e.data;return t.list=t.list.map((function(e){return e.label="已分配到当前坐席",e})),t})):"待分配坐席"===n?this.$http("/cti/work/getWorkWithoutQueue",{params:e}).then((function(e){var t=e.data;return t.list=t.list.map((function(e){return e.label="待分配坐席",e})),t})):"其它队列坐席（除当前队列外坐席）"===n?this.$post("/cti/work/getWorkInAnotherQueue",e).then((function(e){var t=e.data;return t.list=t.list.map((function(e){return e.label="其它队列坐席",e})),t})):"全部坐席"===n?this.$post("/cti/work/searchAllWorkByEntId",e).then((function(e){var n=e.data;return n.list=n.list.map((function(e){return 0===+e.workUsed?e.label="待分配":1===+e.workUsed&&t.workNos.indexOf(e.workNo)>-1?e.label="已分配当前队列":e.label="已分配",e})),n})):void 0},onDelete:function(e){var t=this;this.delData({rows:e,action:function(e){var n=e.map((function(e){return e.workNo})),o=t.searchForm,r=o.entId,i=o.queueId;return t.$http.post("/cti/work/delqueuectiwork",{workNoList:n,entId:r,queueId:i})}})},numberAdd:function(){var e=this,t=this.searchForm,n=t.entId,o=t.queueId;this.$http.post("/cti/work/addqueuectiwork",{entId:n,queueId:o,list:this.selectedRow}).then((function(t){e.$message({message:t.info,type:"success"}),e.selectedRow=[],e.onSearch()}))},changeSeatType:function(e){var t=this;if("全部坐席"===e){var n=this.searchForm,o=n.entId,r=n.queueId;this.$post("/cti/work/getWorkNosInThisQueue",{entId:o,queueId:r}).then((function(e){var n=e.data;t.workNos=n,t.onSearch()}))}else this.onSearch()}}}),s=a,l=n("2877"),u=Object(l["a"])(s,o,r,!1,null,null,null);t["default"]=u.exports}}]);