(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c96d1"],{"58a9":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[e.isSuper?n("el-form-item",{attrs:{label:"选择企业"}},[n("ui-ent-select",{on:{change:e.onSearch},model:{value:e.searchForm.entId,callback:function(t){e.$set(e.searchForm,"entId",t)},expression:"searchForm.entId"}})],1):e._e(),n("ui-select",{attrs:{label:"呼叫方向",placeholder:"选择呼叫方向",clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.dir,callback:function(t){e.$set(e.searchForm,"dir",t)},expression:"searchForm.dir"}},[n("el-option",{attrs:{label:"呼出",value:0}}),n("el-option",{attrs:{label:"呼入",value:1}})],1)]},proxy:!0},{key:"actions",fn:function(){return[n("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.exportFile}},[e._v("导出")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},o=[],a=n("5530"),i=(n("d3b7"),n("3ca3"),n("ddb0"),n("60e2")),l=n("a02a"),c={name:"SmartCallList",mixins:[window.mixTableView],data:function(){var e=this;return{columns:[{label:"主叫号码",prop:"caller",minWidth:120},{label:"联系电话",prop:"called",minWidth:120},{label:"外呼时间",prop:"starttime",minWidth:140},{label:"是否接听",minWidth:80,render:function(e,t){var n=t.row;return e("span",n.connecttime?"已接听":"未接听")}},{label:"呼叫方向",minWidth:80,render:function(e,t){var n=t.row;return e("span",0===n.dir?"呼出":"呼入")}},{label:"接听时间",prop:"connecttime",minWidth:140},{label:"呼叫结果",prop:"calloutresult",minWidth:120},{label:"接通时长",render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.timelen))}},{label:"未接听原因",prop:"dropcause"},{label:"录音转文本",render:function(t,n){var r=n.row;return r.recordfilename?e.$hBtns({label:"查看",action:e.getMore})(t,{row:r}):t("span","-- --")}},{label:"录音",minWidth:160,render:function(t,n){var r=n.row;return r.recordfilename?t("ui-audio-player",{props:{src:e.getSrc(r)}}):t("span","暂无录音")}},{label:"呼叫ID",prop:"id"},{label:"呼叫来源",prop:"fromCallid"},{label:"扩展字段",prop:"extend"},{label:"操作",width:100,fixed:"right",render:function(t,n){var r=n.row;return r.recordfilename?e.$hBtns({label:"录音下载",action:e.onAudioDown})(t,{row:r}):t("span","-- --")}}]}},computed:{isSuper:function(){return this.$store.getters.isAdmin},entId:function(){return this.$store.state.userData.entid}},mounted:function(){this.setInitForm(),this.getData(),Object(l["g"])(this,this.getData)},methods:{setInitForm:function(){this.tableForm={entId:this.entId},this.searchForm=Object(a["a"])({},this.tableForm)},fetchMethod:function(e){return this.$http("/callOutResult/select",{params:e}).then((function(e){var t=e.data;return t}))},getSrc:function(e){return Object(i["c"])("/callOutResult/recorde/download?recordUrl=".concat(e.recordfilename))},getMore:function(e){this.$openModal((function(){return n.e("chunk-9e6185ae").then(n.bind(null,"422c"))}),{content:e.content},{success:this.onEditSuccess})},onAudioDown:function(e){var t=this;Object(l["i"])({fileName:"录音.wav",action:function(){return t.$http("/callOutResult/recorde/download",{params:{recordUrl:e.recordfilename},responseType:"blob"})}})},exportFile:function(){var e=this;this.$confirm("您当前导出数据为该筛选条件下的所有数据,请点击确定,继续导出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(e.tableData.total>5e4)return e.$confirm("当前导出数据量超过最大限制(50000条),请重新筛选数据后重试","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});Object(l["i"])({fileName:"智能呼叫明细导出.xls",action:function(){return e.$http("/callOutResult/export",{params:e.searchForm,responseType:"blob"})}})}))}}},s=c,u=n("2877"),d=Object(u["a"])(s,r,o,!1,null,null,null);t["default"]=d.exports}}]);