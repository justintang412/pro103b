(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21eade"],{d71f:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[r("ui-select",{attrs:{label:"收集人",options:e.users,clearable:""},model:{value:e.searchForm.receiver,callback:function(t){e.$set(e.searchForm,"receiver",t)},expression:"searchForm.receiver"}}),r("ui-text-field",{attrs:{placeholder:"电子全文名称"},model:{value:e.searchForm.itemFullName,callback:function(t){e.$set(e.searchForm,"itemFullName",t)},expression:"searchForm.itemFullName"}}),r("ui-select",{attrs:{label:"全宗号",options:e.archiveNos,prop:"archiveNo"},model:{value:e.searchForm.archiveNo,callback:function(t){e.$set(e.searchForm,"archiveNo",t)},expression:"searchForm.archiveNo"}}),r("ui-select",{attrs:{label:"类目",options:e.series,prop:"seriesNo"},model:{value:e.searchForm.seriesNo,callback:function(t){e.$set(e.searchForm,"seriesNo",t)},expression:"searchForm.seriesNo"}})]},proxy:!0},{key:"actions",fn:function(){return[r("el-button",{attrs:{icon:"el-icon-arrow-down"},on:{click:e.onCustomField}},[e._v("自定义字段")]),r("el-button",{attrs:{icon:"el-icon-plus",disabled:!e.selectedRow.length,type:"primary"},on:{click:function(t){return e.onCreate()}}},[e._v("借阅")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},a=[],s=r("1da1"),i=r("3835"),o=r("5530"),c=r("2909"),l=(r("96cf"),r("99af"),r("4de4"),r("d3b7"),r("b64b"),r("caad"),r("2532"),r("3ca3"),r("ddb0"),r("d81d"),r("159b"),{data:function(){var e=["itemFullName","itemSize","itemFormat","receiver","receiveDate","volumnNo"];return{allColumns:{base:{title:"基础字段",data:[{label:"电子全文名称",prop:"itemFullName"},{label:"电子文件大小",prop:"itemSize"},{label:"电子文件格式",prop:"itemFormat"},{label:"收集人",prop:"receiver"},{label:"收集日期",prop:"receiveDate"}]},customer:{title:"定制字段",data:[{label:"文件ID",prop:"itemId"},{label:"室编电子文档号",prop:"eItemNo"},{label:"部门编电子文档号",prop:"departmentEItemNo"}]}},defaultProps:e,selectedProps:[].concat(e)}},computed:{showedColumns:function(){var e=this;return[{type:"selection"}].concat(Object(c["a"])(Object.keys(this.allColumns).reduce((function(t,r){return[].concat(Object(c["a"])(t),Object(c["a"])(e.allColumns[r].data))}),[]).filter((function(t){return e.selectedProps.includes(t.prop)}))))}},mounted:function(){this.setInitForm&&this.setInitForm(),this.getInitData()},methods:{getInitData:function(){this.isActive?this.getData():(this.onReset(),this.isActive=!0)},onCreate:function(){this.$openModal((function(){return r.e("chunk-5ae62fa8").then(r.bind(null,"007f"))}),{customerInfo:this.selectedRow.map((function(e){return e.itemId}))+""},{success:this.onEditSuccess})},onKeyChange:function(){var e=this;this.options.forEach((function(t){e.$set(e.searchForm,t[0],void 0)}))},onCustomField:function(){var e=this;this.$openModal("UiFieldCustom",{columns:this.allColumns,defaultProps:this.defaultProps,selectedProps:this.selectedProps},{success:function(t){e.selectedProps=t}})}}}),u={name:"file",mixins:[window.mixTableView,l],data:function(){return{timerange:[],users:[],archiveNos:[],series:[]}},computed:{columns:function(){return this.showedColumns.concat({label:"操作",width:100,fixed:"right",render:this.$hBtns({label:"详情",action:this.onView})})}},methods:{setInitForm:function(){var e=this;this.timerange=[],this.tableForm={key:"name",type:5,flag:"1"},this.$http("/user/list",{params:{}}).then((function(t){var r=t.data;e.users=r.map((function(e){return{value:e.username,label:e.fullname}}))})),this.$http("/sys/archive-group/list",{params:{}}).then((function(t){var r=t.data;e.archiveNos=r.map((function(e){return{value:e.archiveNo,label:e.archiveName}}))})),this.$http("/sys/series/list",{params:{}}).then((function(t){var r=t.data;e.series=r.map((function(e){return{value:e.seriesNo,label:e.seriesName}}))}))},fetchMethod:function(e){return this.$http("/sys/item/listAll",{params:Object(o["a"])({},this.searchForm)}).then((function(e){var t=e.data;return{total:t.length,data:t}}))},onTimeChange:function(e){var t=e||[],r=Object(i["a"])(t,2),n=r[0],a=r[1];this.searchForm=Object(o["a"])(Object(o["a"])({},this.searchForm),{},{receiveDate:"".concat(n,",").concat(a)}),this.onSearch()},onDeleteRecords:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("确定删除选中的文件？","提示");case 2:return t.next=4,e.$post("/sys/item/delete",{itemId:e.selectedRow.map((function(e){return e.itemId}))+""});case 4:e.getData();case 5:case"end":return t.stop()}}),t)})))()},onView:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$openModal((function(){return r.e("chunk-4eb722f1").then(r.bind(null,"4126"))}),{row:e},{success:t.onEditSuccess});case 1:case"end":return n.stop()}}),n)})))()}}},h=u,m=r("2877"),p=Object(m["a"])(h,n,a,!1,null,null,null);t["default"]=p.exports}}]);