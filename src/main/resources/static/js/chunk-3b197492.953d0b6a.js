(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b197492"],{"8d62":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-modal",e._g(e._b({attrs:{"custom-class":"com-sckm-importmodal"}},"ui-modal",e.modalProps,!1),e.$listeners),[a("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},on:{change:e.handleFileChange}}),a("p",{staticClass:"title"},[e._v("选择文件导入至【"+e._s(e.categoryName)+"】分类")]),a("div",{staticClass:"btn-upload"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-upload2"},on:{click:e.handleSelectFile}},[e._v("选择文件")])],1),e.file?a("div",{staticClass:"fileinfo"},[e._v(e._s(e.fileName))]):e._e(),a("div",[a("p",[e._v("1.点击下载知识库"),a("a",{on:{click:e.handleGetTemplate}},[e._v("导入模板")]),e._v("；")]),a("p",[e._v("2.导入文件格式必须为Excel。")])])])},i=[],s=a("1da1"),c=(a("b0c0"),a("8a79"),a("96cf"),a("bc53")),r=a("a02a"),l={props:["category"],data:function(){var e=this;return{dept:"",file:null,modalProps:{title:"知识库导入",hideMessage:!0,onSubmit:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.file){t.next=11;break}return t.next=3,Object(c["b"])(e.file);case 3:return a=t.sent,n=a.data,t.next=7,e.$post("/sckm/item/batch/import",{dept:e.dept,excelPath:n.tempPath,categoryId:e.category.id,categoryName:e.categoryName});case 7:i=t.sent.data,e.$message(i),t.next=12;break;case 11:Object(r["x"])("请选择文件");case 12:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}}},computed:{fileName:function(){return window.sckm.getFileName(this.file)},categoryName:function(){return this.category.name||this.category.title}},methods:{handleFileChange:function(e){var t=e.target,a=t.files[0];if(a){var n=function(e){return e.endsWith(".xls")||e.endsWith(".xlsx")};if(a&&!n(a.name))return this.$message.warning("请选择Excel文件");if(a.size>104857600)return this.$message.warning("请选择小于100M的文件.");this.file=a,t.value=""}},handleSelectFile:function(){this.$refs.File.click()},handleGetTemplate:function(){var e=this;Object(r["i"])({fileName:"知识库模板导出.xls",action:function(){return e.$http("sckm/item/excel/template",{responseType:"blob"})}})}}},o=l,u=(a("ae69"),a("2877")),m=Object(u["a"])(o,n,i,!1,null,null,null);t["default"]=m.exports},a768:function(e,t,a){},ae69:function(e,t,a){"use strict";a("a768")}}]);