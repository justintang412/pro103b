(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216404"],{c254:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[n("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"warning",closable:!1,title:"在节假日期间会出现运营平台发送短信排队情况，发送短信记录会有5-30分钟的延迟，请耐心等待。"}}),n("el-form",{ref:"Form",attrs:{"label-width":"6em",model:e.form,rules:e.rules}},[n("ui-text-field",{attrs:{label:"模板名称",prop:"templateName"},model:{value:e.form.templateName,callback:function(t){e.$set(e.form,"templateName",t)},expression:"form.templateName"}}),n("el-form-item",{attrs:{label:"模板类型",prop:"templateType"}},[n("el-radio-group",{on:{change:e.changeType},model:{value:e.form.templateType,callback:function(t){e.$set(e.form,"templateType",t)},expression:"form.templateType"}},[n("el-radio",{attrs:{label:"1"}},[e._v("通知短信")]),n("el-radio",{attrs:{label:"2"}},[e._v("会员营销短信")])],1),n("p",{staticClass:"tip"},[e._v("* 示例：您的会员号将于到期，尽快续费")])],1),n("ui-select",{attrs:{label:"模板签名",prop:"signConfigId",options:e.signList,props:{value:"signConfigId",label:"signContent"},filterable:""},model:{value:e.form.signConfigId,callback:function(t){e.$set(e.form,"signConfigId",t)},expression:"form.signConfigId"}}),n("el-form-item",{attrs:{label:"模板内容",prop:"templateContent"}},[n("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.templateContent,callback:function(t){e.$set(e.form,"templateContent",t)},expression:"form.templateContent"}}),n("p",{staticClass:"tip"},[e._v(" * 说明：模板内容变量用{ }进行表示，并在{ }内填写1～9任意数字； 模板内容不可含有“加微信”、“加公众号”等内容，营销类短信结尾必须加“回TD退订”； 模板签名+模板内容最多500字符，70字符为1条短信，超过70字符则按每条短信67字符计算； 通知类短信模板审核时间为1-2个工作日，营销类短信模板审核时间为1-5个工作日 ")])],1),n("ui-text-field",{attrs:{label:"备注",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)},r=[],s=n("1da1"),i=n("5530"),o=(n("96cf"),n("7db0"),n("d3b7"),n("4de4"),n("a02a")),l={props:["row","entId"],data:function(){var e=this,t=this.row;return{form:t?Object(i["a"])({},t):{},rules:{templateType:Object(o["z"])("请选择模板类型"),signConfigId:Object(o["z"])("请选择模板签名"),templateName:Object(o["y"])("请输入模板名称"),templateContent:Object(o["y"])("请输入模板内容")},signList:[],list:[],modalProps:{isEdit:!!t,drawer:!0,onSubmit:function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$refs.Form.validate();case 2:return n.next=4,e.$http.post("/message/template/".concat(t?"updateMessageTemplate":"saveMessageTemplate"),Object(i["a"])(Object(i["a"])({},e.form),{},{entId:e.entId,templateSignName:(e.signList.find((function(t){return t.signConfigId===e.form.signConfigId}))||{}).signContent}));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));function a(){return n.apply(this,arguments)}return a}()}}},mounted:function(){this.getSignMessage()},methods:{changeType:function(e){this.form=Object(i["a"])(Object(i["a"])({},this.form),{},{signConfigId:void 0}),this.signList=this.list.filter((function(t){return t.signType===e}))},getSignMessage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/message/sign/getSignMessage",{entId:e.entId});case 2:e.list=t.sent.data.list,e.signList=e.list.filter((function(t){return!!e.row&&t.signType===e.form.templateType}));case 4:case"end":return t.stop()}}),t)})))()}}},m=l,p=n("2877"),c=Object(p["a"])(m,a,r,!1,null,null,null);t["default"]=c.exports}}]);