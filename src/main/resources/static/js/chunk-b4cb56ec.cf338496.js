(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4cb56ec"],{2910:function(e,t,r){"use strict";r("8220")},"81d5":function(e,t,r){"use strict";var n=r("7b0b"),a=r("23cb"),o=r("07fa");e.exports=function(e){var t=n(this),r=o(t),i=arguments.length,c=a(i>1?arguments[1]:void 0,r),s=i>2?arguments[2]:void 0,m=void 0===s?r:a(s,r);while(m>c)t[c++]=e;return t}},8220:function(e,t,r){},cb29:function(e,t,r){var n=r("23e7"),a=r("81d5"),o=r("44d2");n({target:"Array",proto:!0},{fill:a}),o("fill")},f935:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[r("el-form",{ref:"Form",attrs:{"label-width":"6em",model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"姓名"}},[r("span",[e._v(e._s(e.form.contactName))])]),r("ui-select",{attrs:{label:"电话",prop:"contactPhone"},model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}},e._l(e.phones,(function(e){return r("el-option",{key:e,attrs:{value:e}})})),1),r("el-form-item",{attrs:{label:"性别"}},[r("el-radio-group",{model:{value:e.form.contactSex,callback:function(t){e.$set(e.form,"contactSex",t)},expression:"form.contactSex"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),r("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"预约时间",prop:"reserveTime"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp"},model:{value:e.form.reserveTime,callback:function(t){e.$set(e.form,"reserveTime",t)},expression:"form.reserveTime"}})],1),r("el-form-item",{attrs:{label:"预约提醒"}},[r("el-radio-group",{model:{value:e.form.remindStatus,callback:function(t){e.$set(e.form,"remindStatus",t)},expression:"form.remindStatus"}},[r("el-radio",{attrs:{label:1}},[r("span",[e._v("开启")]),r("el-select",{staticStyle:{"margin-left":"5px",width:"150px"},attrs:{placeholder:"提醒时间",clearable:""},nativeOn:{click:function(t){return e.onRemindTimeClick.apply(null,arguments)}},model:{value:e.form.remindTime,callback:function(t){e.$set(e.form,"remindTime",t)},expression:"form.remindTime"}},e._l(e.times,(function(e){return r("el-option",{key:e.num,attrs:{value:e.num,label:e.text}})})),1)],1),r("el-radio",{attrs:{label:0}},[e._v("关闭")])],1)],1),r("ui-text-field",{attrs:{label:"备注",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)},a=[],o=r("2909"),i=r("1da1"),c=r("5530"),s=(r("99af"),r("d81d"),r("cb29"),r("4de4"),r("d3b7"),r("ac1f"),r("1276"),r("96cf"),r("a02a")),m=function(){var e=5,t=[];while(e<60)t.push({num:e,text:"-- 提前".concat(e,"分钟 --")}),e+=5;return t},l={props:["row","customerId"],data:function(){var e=this,t=this.row;return{rules:{contactPhone:Object(s["z"])("请选择电话"),reserveTime:{required:!0,validator:function(e,t,r){t?t>Date.now()?r():r(new Error("预约时间必须大于当前时间")):r(new Error("请选择预约时间"))}}},form:t?Object(c["a"])(Object(c["a"])({},t),{},{reserveTime:+new Date(t.reserveTime),remindTime:t.remindTime&&(new Date(t.reserveTime)-new Date(t.remindTime))/6e4}):{remindStatus:0,customerId:this.customerId},modalProps:{isEdit:!!t,onSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:if(r=e.form,!r.remindStatus||r.remindTime){t.next=7;break}throw n="请选择提醒时间",e.$message.error(n),new Error(n);case 7:return t.next=9,e.$post("/ccas/call/manual/contact/save",Object(c["a"])(Object(c["a"])({},r),{},{remindTime:r.remindTime&&r.reserveTime-6e4*r.remindTime}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()},times:[].concat(Object(o["a"])(m()),Object(o["a"])(new Array(24).fill().map((function(e,t){return{num:60*(t+1),text:"-- 提前".concat(t+1,"小时 --")}})))),phones:[]}},mounted:function(){this.getCustomerInfo()},methods:{getCustomerInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.customerId||e.row.customerId,t.next=3,e.$http("/ccas/cc/customer/details/by/".concat(r));case 3:n=t.sent,a=n.data,a&&(e.form=Object(c["a"])(Object(c["a"])({},e.form),{},{contactName:a.customerName||a.customerNickname}),e.phones=a.phone.split(",").filter((function(e){return e})));case 6:case"end":return t.stop()}}),t)})))()},onRemindTimeClick:function(){this.$set(this.form,"remindStatus",1)}}},u=l,f=(r("2910"),r("2877")),d=Object(f["a"])(u,n,a,!1,null,"159fd32e",null);t["default"]=d.exports}}]);