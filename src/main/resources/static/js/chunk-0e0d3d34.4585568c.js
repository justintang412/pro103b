(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e0d3d34"],{"1b60":function(e,t,r){},"541c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[r("ui-text-field",{attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm[e.searchForm.key],callback:function(t){e.$set(e.searchForm,e.searchForm.key,t)},expression:"searchForm[searchForm.key]"}},[r("el-select",{staticStyle:{width:"9em"},attrs:{slot:"prepend"},on:{change:e.onKeyChange},slot:"prepend",model:{value:e.searchForm.key,callback:function(t){e.$set(e.searchForm,"key",t)},expression:"searchForm.key"}},e._l(e.options,(function(e){return r("el-option",{key:e[0],attrs:{value:e[0],label:e[1]}})})),1)],1),r("ui-select",{attrs:{label:"优先级",options:e.priorities,clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.priority,callback:function(t){e.$set(e.searchForm,"priority",t)},expression:"searchForm.priority"}}),r("ui-select",{attrs:{label:"状态",options:e.states,clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}}),r("el-form-item",{attrs:{label:"工单分类"}},[r("el-cascader",{attrs:{options:e.typeList,filterable:"",clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.typeId,callback:function(t){e.$set(e.searchForm,"typeId",t)},expression:"searchForm.typeId"}})],1),r("ui-select",{attrs:{label:"创建渠道",clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.channelId,callback:function(t){e.$set(e.searchForm,"channelId",t)},expression:"searchForm.channelId"}},[r("el-option",{attrs:{label:"工单中心",value:"1"}}),r("el-option",{attrs:{label:"在线客服",value:"2"}})],1),r("ui-select",{attrs:{label:"是否被催单",clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.flag,callback:function(t){e.$set(e.searchForm,"flag",t)},expression:"searchForm.flag"}},[r("el-option",{attrs:{label:"是",value:"1"}}),r("el-option",{attrs:{label:"否",value:"0"}})],1),r("ui-select",{attrs:{label:"受理客服组",options:e.skillGroups,props:{value:"id",label:"name"},clearable:""},on:{change:e.changeSgroup},model:{value:e.searchForm.sGroupId,callback:function(t){e.$set(e.searchForm,"sGroupId",t)},expression:"searchForm.sGroupId"}}),r("ui-select",{attrs:{label:"受理客服",options:e.agents,props:{value:"userId",label:"name"},clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.acceptorId,callback:function(t){e.$set(e.searchForm,"acceptorId",t)},expression:"searchForm.acceptorId"}}),r("ui-select",{attrs:{label:"创建客服组",options:e.skillGroups,props:{value:"id",label:"name"},clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.cGroupId,callback:function(t){e.$set(e.searchForm,"cGroupId",t)},expression:"searchForm.cGroupId"}}),r("el-form-item",{attrs:{label:"创建时间"}},[r("ui-date-range-picker",{on:{change:function(t){return e.formatConversion(t,"beginTime","endTime")}},model:{value:e.timerange1,callback:function(t){e.timerange1=t},expression:"timerange1"}})],1),r("el-form-item",{attrs:{label:"关闭时间"}},[r("ui-date-range-picker",{on:{change:function(t){return e.formatConversion(t,"beginClosedTime","endClosedTime")}},model:{value:e.timerange2,callback:function(t){e.timerange2=t},expression:"timerange2"}})],1),r("el-form-item",{attrs:{label:"更新时间"}},[r("ui-date-range-picker",{on:{change:function(t){return e.formatConversion(t,"beginUpdateTime","endUpdateTime")}},model:{value:e.timerange3,callback:function(t){e.timerange3=t},expression:"timerange3"}})],1),r("el-form-item",{attrs:{label:"解决时间"}},[r("ui-date-range-picker",{on:{change:function(t){return e.formatConversion(t,"beginSolveTime","endSolveTime")}},model:{value:e.timerange4,callback:function(t){e.timerange4=t},expression:"timerange4"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[r("el-button",{attrs:{icon:"el-icon-arrow-down"},on:{click:e.onCustomField}},[e._v("自定义字段")]),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.onCreate()}}},[e._v("创建工单")]),r("el-button",{attrs:{icon:"el-icon-delete",type:"danger",disabled:!e.selectedRow.length},on:{click:function(t){return e.onDelete(e.selectedRow)}}},[e._v("删除工单")]),r("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:e.onBatchImport}},[e._v("批量导入")]),r("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(t){return e.onBatchCustomExport(e.searchForm)}}},[e._v("批量导出")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners),[r("com-custom-filter",{ref:"ComCustomFilter",attrs:{slot:"search-right"},on:{show:e.onCustomFilterShow,reset:e.onReset,search:e.onPopSearch},slot:"search-right"})],1)},n=[],o=r("1da1"),i=r("5530"),s=(r("96cf"),r("99af"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{on:{show:function(t){return e.$emit("show")}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("el-button",{staticClass:"btn-filter",attrs:{slot:"reference",type:"text",icon:"el-icon-edit-outline"},slot:"reference"},[e._v("自定义筛选")]),r("div",{staticClass:"wrapper"},[r("el-form",{attrs:{"label-width":"6em"}},[r("div",{staticClass:"flexbox col-3"},[r("ui-text-field",{attrs:{label:"客户昵称"},model:{value:e.form.customerNickName,callback:function(t){e.$set(e.form,"customerNickName",t)},expression:"form.customerNickName"}}),r("ui-text-field",{attrs:{label:"真实姓名"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}}),r("ui-select",{attrs:{label:"来源",options:e.customerSources,clearable:""},model:{value:e.form.customerSource,callback:function(t){e.$set(e.form,"customerSource",t)},expression:"form.customerSource"}}),r("ui-text-field",{attrs:{label:"电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),r("ui-text-field",{attrs:{label:"邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("ui-select",{attrs:{label:"公司",options:e.companyList,props:{value:"companyName"},clearable:""},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}}),r("ui-text-field",{attrs:{label:"QQ"},model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}}),r("ui-text-field",{attrs:{label:"备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}}),e._l(e.templateData,(function(t){return r("el-form-item",{key:t.id,attrs:{label:t.name}},[0==t.type?r("el-input",{attrs:{placeholder:t.description},model:{value:t.fieldValues,callback:function(r){e.$set(t,"fieldValues",r)},expression:" item.fieldValues"}}):e._e(),1==t.type?r("el-input",{attrs:{type:"textarea",rows:"3",placeholder:t.description},model:{value:t.fieldValues,callback:function(r){e.$set(t,"fieldValues",r)},expression:"item.fieldValues"}}):e._e(),2==t.type?r("el-radio-group",{model:{value:t.fieldValues,callback:function(r){e.$set(t,"fieldValues",r)},expression:" item.fieldValues"}},e._l(t.orderFieldDataLists,(function(e){return r("el-radio",{key:e.id,attrs:{label:e.content}})})),1):e._e(),3==t.type?r("el-checkbox-group",{model:{value:t.fieldValues,callback:function(r){e.$set(t,"fieldValues",r)},expression:" item.fieldValues"}},e._l(t.orderFieldDataLists,(function(e){return r("el-checkbox",{key:e.id,attrs:{label:e.content}})})),1):e._e(),4==t.type?r("el-select",{attrs:{clearable:"",placeholder:t.description},model:{value:t.fieldValues,callback:function(r){e.$set(t,"fieldValues",r)},expression:" item.fieldValues"}},e._l(t.orderFieldDataLists,(function(e){return r("el-option",{key:e.id,attrs:{label:e.content,value:e.content}})})),1):e._e()],1)}))],2)]),r("div",{staticClass:"btn-group"},[r("el-button",{on:{click:e.hide}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1)}),l=[],c=(r("d3b7"),r("159b"),r("d81d"),r("4de4"),r("de0b")),u={data:function(){return{customerSources:c["b"],form:{},visible:!1,companyList:[],templateData:[],customizeFields:[],firstEntry:!0}},methods:{show:function(e){this.form=Object(i["a"])({},e),this.firstEntry&&(this.firstEntry=!1,this.getTemplate(),this.getCompanyList(),this.templateData=[])},hide:function(){this.visible=!1},onSearch:function(){var e=this;this.hide(),this.customizeFields=[],this.templateData.forEach((function(t){t.fieldValues&&t.fieldValues.length&&e.customizeFields.push({fieldId:t.id,content:3===t.type?t.fieldValues+"":t.fieldValues})})),this.$emit("search",this.form,this.customizeFields)},onReset:function(){this.hide(),this.$emit("reset")},getCompanyList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/ccas/cc/company/list").then((function(e){return e.data}));case 2:e.companyList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getTemplate:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/orderField/listByPage").then((function(e){var t=e.data;return t.filter((function(e){return!e.readonly})).map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{fieldValues:3===e.type?[]:""})}))}));case 2:e.templateData=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},m=u,d=(r("b946"),r("2877")),p=Object(d["a"])(m,s,l,!1,null,"6a30ff35",null),f=p.exports,h=r("fffc"),b=r("a02a"),v={name:"WorkorderQueryCustom",mixins:[window.mixTableView,h["m"]],components:{ComCustomFilter:f},data:function(){return{states:h["f"],options:[["name","工单标题"],["number","工单编号"],["description","工单描述"],["creator","创建人"]],customizeFields:[],timerange1:[],timerange2:[],timerange3:[],timerange4:[],agents:[]}},computed:{columns:function(){return this.showedColumns.concat({label:"操作",width:100,fixed:"right",render:this.$hBtns([{label:"详情",action:this.onDetail},{label:"删除",action:this.onDelete}])})}},methods:{setInitForm:function(){var e=this,t=this.$adminCore.formatDate(new Date,"yyyy-MM-dd");this.customizeFields=[],this.timerange1=[t,t],this.timerange2=[],this.timerange3=[],this.timerange4=[],this.tableForm={key:"name",beginTime:t,endTime:t},this.searchForm=Object(i["a"])({},this.tableForm),this.$nextTick((function(){e.$refs.ComCustomFilter.getTemplate()}))},onBatchCustomExport:function(e){var t=this;if(this.typeId)return Object(b["i"])({fileName:"工单批量导出数据.xls",action:function(){return t.$http.post("/customizeQuery/exportCustomizeWorkOrderExcel",t.customizeFields,{responseType:"blob",params:Object(i["a"])(Object(i["a"])({},e),{},{typeId:t.typeId})})}});this.$message("请先选择分类再导出")},fetchMethod:function(e){return this.$http.post("/customizeQuery/listByPage",this.customizeFields,{params:Object(i["a"])(Object(i["a"])({},e),{},{typeId:this.typeId})}).then((function(e){var t=e.data;return{total:t.count,data:t.workOrder}}))},onCustomFilterShow:function(){this.$refs.ComCustomFilter.show(this.searchForm)},onPopSearch:function(e,t){this.customizeFields=t||[],this.searchForm=Object(i["a"])({},e),this.onSearch()},formatConversion:function(e,t,r){this.searchForm[t]=e.length?e[0]:"",this.searchForm[r]=e.length?e[1]:"",this.onSearch()},changeSgroup:function(e){this.$set(this.searchForm,"acceptorId",void 0),this.onSearch(),this.getAgents(e)},getAgents:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=6;break}return r.next=3,t.$post("/orderGroup/listByGroup",{groupId:e}).then((function(e){return e.data}));case 3:r.t0=r.sent,r.next=7;break;case 6:r.t0=[];case 7:t.agents=r.t0;case 8:case"end":return r.stop()}}),r)})))()}}},g=v,k=Object(d["a"])(g,a,n,!1,null,null,null);t["default"]=k.exports},b946:function(e,t,r){"use strict";r("1b60")},de0b:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return l}));var a=r("ade3"),n="customer-center",o={CUSTOMER_CENTER:1,WECHAT:2,APP:3,PC_WEB:4,WEIBO:5,MOB_WEB:6,CALL_CENTER:7,WO_CENTER:8,ENT_WECHAT:9,WECHAT_APP:10,EMAIL:11},i=function(e){var t;return t={},Object(a["a"])(t,e.CUSTOMER_CENTER,"客户中心"),Object(a["a"])(t,e.WECHAT,"微信"),Object(a["a"])(t,e.APP,"APP"),Object(a["a"])(t,e.PC_WEB,"桌面网站"),Object(a["a"])(t,e.WEIBO,"微博"),Object(a["a"])(t,e.MOB_WEB,"移动网站"),Object(a["a"])(t,e.CALL_CENTER,"呼叫中心"),Object(a["a"])(t,e.WO_CENTER,"工单中心"),Object(a["a"])(t,e.ENT_WECHAT,"企业微信"),Object(a["a"])(t,e.WECHAT_APP,"微信小程序"),Object(a["a"])(t,e.EMAIL,"邮件"),t}(o),s={BASE:1,VIP:2},l=function(e){var t;return t={},Object(a["a"])(t,e.BASE,"普通客户"),Object(a["a"])(t,e.VIP,"VIP客户"),t}(s)}}]);