(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b4dd31b"],{"498a":function(t,e,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"8a5f":function(t,e,n){"use strict";n.r(e);var r,i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"warning",closable:!1,title:2===t.wordsType?"添加敏感词后，客户发送的消息如果包含设置的敏感词，本次会话将在会话监控页被标识，提醒管理员处理。":"添加敏感词后，客服发送的消息如果包含设置的敏感词，该条消息将不会发送给客户，并且将在会话监控页被标识，提醒管理员处理。"}}),n("ui-table-view",t._g(t._b({scopedSlots:t._u([{key:"actions",fn:function(){return[n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.onAdd}},[t._v(" 添加"+t._s(t.identity)+"敏感词 ")]),n("el-dropdown",{attrs:{trigger:"click"},on:{command:t.onCommand}},[n("el-button",[t._v(" 批量处理"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"import"}},[t._v("导入"+t._s(t.identity)+"敏感词")]),n("el-dropdown-item",{attrs:{command:"export"}},[t._v("导出"+t._s(t.identity)+"敏感词")]),n("el-dropdown-item",{attrs:{command:"deleteAll"}},[t._v("全部删除")])],1)],1)]},proxy:!0}])},"ui-table-view",t.viewProps,!1),t.viewListeners),[n("ui-text-field",{attrs:{slot:"search",label:"关键字"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},slot:"search",model:{value:t.searchForm.wordsContent,callback:function(e){t.$set(t.searchForm,"wordsContent",e)},expression:"searchForm.wordsContent"}})],1)],1)},s=[],a=n("1da1"),d=n("5530"),c=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("8a79"),n("fb6a"),n("99af"),n("d81d"),n("498a"),n("4328")),l=n.n(c),u=n("60e2"),p=n("a02a"),w={mixins:[window.mixTableView],props:["wordsType"],data:function(){var t=this;return{columns:[{label:"敏感词",prop:"wordsContent"},{label:"更新时间",minWidth:140,render:function(e,n){var r=n.row;return e("span",t.$adminCore.formatDate(r.modifyTime))}},{label:"操作",width:100,fixed:"right",render:this.$hBtns([{label:"编辑",action:this.onEdit},{label:"删除",action:this.onDelete}])}]}},computed:{entid:function(){return this.$store.getters.imUser.orgi},identity:function(){return{1:"客服",2:"客户"}[this.wordsType]}},mounted:function(){this.getData(),Object(p["g"])(this,this.getData)},methods:{fetchMethod:function(t){return this.$imHttp("/ws/sensitive/words/list",{params:Object(d["a"])(Object(d["a"])({},t),{},{entid:this.entid,wordsType:this.wordsType})}).then((function(t){var e=t.data;return{data:e.records,total:e.total}}))},onAdd:function(){this.$openModal((function(){return n.e("chunk-a8cc1bbe").then(n.bind(null,"a287"))}),{row:{entid:this.entid,wordsType:this.wordsType},title:"添加".concat(this.identity,"敏感词")},{success:this.onEditSuccess})},onCommand:function(t){if("export"===t)this.onExport();else if("deleteAll"===t)this.onDeleteAll();else if("import"===t){var e={row:{entid:this.entid,wordsType:this.wordsType}};this.$openModal((function(){return n.e("chunk-2d0e4e82").then(n.bind(null,"91e9"))}),e,{success:this.onEditSuccess})}},onExport:function(){var t=l.a.stringify({entid:this.entid,wordsType:this.wordsType}),e=u["b"];e.endsWith("/")&&(e=e.slice(0,-1)),window.open("".concat(e,"/ws/sensitive/words/export/excel?").concat(t),"_blank")},onDelete:function(t){var e=this;this.delData({rows:t,action:function(t){return e.$imPost("/ws/sensitive/words/del/by/id",{ids:t.map((function(t){return t.wordsId}))+""})}})},onDeleteAll:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确定要删除全部敏感词吗？","删除全部");case 2:return e.next=4,t.$imPost("/ws/sensitive/words/del/all",{entid:t.entid,wordsType:t.wordsType});case 4:t.getData();case 5:case"end":return e.stop()}}),e)})))()},onEdit:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$prompt("敏感词","编辑".concat(e.identity,"敏感词"),{inputValue:t.wordsContent,inputValidator:function(t){return!!t.trim()||"请输入敏感词"}});case 2:return r=n.sent,i=r.value,n.next=6,e.$imPost("/ws/sensitive/words/update",{entid:e.entid,wordsType:e.wordsType,wordsId:t.wordsId,wordsContent:i.trim()});case 6:e.getData();case 7:case"end":return n.stop()}}),n)})))()}}},m=w,h=n("2877"),f=Object(h["a"])(m,o,s,!1,null,null,null),b=f.exports,y=function(t,e){return{label:t,component:{render:function(t){return t(b,{props:{wordsType:e}})}}}},v={name:"SettingsOnlineSensitiveWords",render:function(t){return t("ui-tab-view",{props:{tabs:[y("客服敏感词",1),y("客户敏感词",2)],nocache:!0}})}},g=v,x=Object(h["a"])(g,r,i,!1,null,null,null);e["default"]=x.exports},c8d2:function(t,e,n){var r=n("5e77").PROPER,i=n("d039"),o=n("5899"),s="​᠎";t.exports=function(t){return i((function(){return!!o[t]()||s[t]()!==s||r&&o[t].name!==t}))}}}]);