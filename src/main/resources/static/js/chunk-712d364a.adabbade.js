(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-712d364a"],{8075:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"warning",closable:!1,title:"您可以根据业务需求自定义"+{1:"客户字段",2:"公司字段"}[e.type]+"，定义完毕后可以在客户中心进行查看，填写和导出。"}}),n("ui-table-view",e._b({},"ui-table-view",Object.assign({},e.viewProps,{hidePager:!0}),!1),[n("el-button",{attrs:{slot:"actions",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.onEdit()}},slot:"actions"},[e._v("添加新字段")])],1)],1)},r=[],a=n("1da1"),o=n("2909"),c=(n("96cf"),n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("c740"),n("a02a")),d=n("e139"),u={mixins:[window.mixTableView],props:["type"],data:function(){var e=this;return{columns:[{label:"字段标题",prop:"fieldName"},{label:"字段类型",render:function(e,t){var n=t.row;return e("span",Object(d["b"])(n.fieldType))}},{label:"是否必填",minWidth:80,render:function(e,t){var n=t.row;return e("span",Object(d["d"])(n)?"是":"否")}},{label:"字段描述",prop:"fieldDesc",minWidth:120},{label:"状态",render:function(t,n){var i=n.row,r=n.$index;return i.predefinedType?t("span","-- --"):t("div",[t("el-switch",{style:"margin-right:5px",props:{value:!!i.controlState},on:{change:e.onStateChange.bind(e,r)}}),t("span",i.controlState?"开启":"关闭")])}},{label:"操作",width:160,fixed:"right",render:function(t,n){var i=n.row;return e.$hBtns([{label:"选项",props:{icon:"el-icon-plus",disabled:!i.fieldOptionUpdate},action:e.onAddOptions}].concat(Object(o["a"])(i.predefinedType?[]:[{props:{icon:"el-icon-edit"},action:e.onEdit},{props:{icon:"el-icon-delete"},action:e.onDelete},{props:{icon:"el-icon-top",disabled:e.disableMoveUp(i)},action:e.onMove.bind(e,i,0)},{props:{icon:"el-icon-bottom",disabled:e.disableMoveDown(i)},action:e.onMove.bind(e,i,1)}])))(t,{row:i})}}]}},mounted:function(){this.getData(),Object(c["g"])(this,this.getData)},methods:{fetchMethod:function(){return this.$http("/ccas/cc/field/list",{params:{businessType:this.type}})},onDelete:function(e){var t=this;this.delData({action:function(){return t.$http("/ccas/cc/field/del/".concat(e.fieldId))}})},onEdit:function(e){var t=this;this.$openModal((function(){return n.e("chunk-2d0f0b68").then(n.bind(null,"9e17"))}),{row:e,type:this.type},{success:function(){return t.getData()}})},onStateChange:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.tableData.data,r=i[e],a=+!r.controlState,o=function(e){t.$set(r,"controlState",e)},o(a),n.prev=5,n.next=8,t.$post("/ccas/cc/field/update/show/state",{fieldId:r.fieldId,isControlOrWork:1,state:a});case 8:t.$message.success("操作成功"),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](5),o(+!a);case 14:case"end":return n.stop()}}),n,null,[[5,11]])})))()},updateRow:function(e){return this.$http.post("/orderField/update",e)},disableMoveUp:function(e){var t=this.tableData.data,n=t.findIndex((function(t){return t.fieldId===e.fieldId})),i=t[n-1];return!i||!e.predefinedType&&!!i.predefinedType},disableMoveDown:function(e){var t=this.tableData.data,n=t.findIndex((function(t){return t.fieldId===e.fieldId})),i=t[n+1];return!i||!!e.predefinedType&&!i.predefinedType},onMove:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n.loading=!0;try{n.$post("/ccas/cc/field/update/order",{fieldId:e.fieldId,orderType:t}),n.getData()}catch(r){n.loading=!1}case 2:case"end":return i.stop()}}),i)})))()},onAddOptions:function(e){this.$openModal((function(){return n.e("chunk-dde786e2").then(n.bind(null,"ffd9"))}),{row:e})}}},s=u,l=n("2877"),p=Object(l["a"])(s,i,r,!1,null,null,null);t["default"]=p.exports},c740:function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").findIndex,a=n("44d2"),o="findIndex",c=!0;o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},e139:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return s}));var i,r=n("ade3"),a=(n("caad"),n("2532"),{INPUT:1,TEXTAREA:2,DATE:3,TIME:4,NUM_INPUT:5,SELECT:6,CASCADER:7,RADIO:8,CHECKBOX:9}),o=a,c=(i={},Object(r["a"])(i,o.INPUT,"单行文本框"),Object(r["a"])(i,o.TEXTAREA,"多行文本框"),Object(r["a"])(i,o.DATE,"日期"),Object(r["a"])(i,o.TIME,"时间"),Object(r["a"])(i,o.NUM_INPUT,"数值输入框"),Object(r["a"])(i,o.SELECT,"下拉框"),Object(r["a"])(i,o.CASCADER,"级联下拉框"),Object(r["a"])(i,o.RADIO,"单选框"),Object(r["a"])(i,o.CHECKBOX,"复选框"),i),d=function(e){return[o.SELECT,o.CASCADER,o.RADIO,o.CHECKBOX].includes(+e)},u=function(e){return c[e]},s=function(e){return 1===+e.requireWrite}}}]);