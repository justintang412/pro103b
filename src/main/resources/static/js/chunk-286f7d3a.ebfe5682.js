(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-286f7d3a"],{1148:function(e,t,n){"use strict";var i=n("da84"),r=n("5926"),a=n("577e"),o=n("1d80"),s=i.RangeError;e.exports=function(e){var t=a(o(this)),n="",i=r(e);if(i<0||i==1/0)throw s("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"408a":function(e,t,n){var i=n("e330");e.exports=i(1..valueOf)},b680:function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),a=n("e330"),o=n("5926"),s=n("408a"),c=n("1148"),l=n("d039"),u=r.RangeError,h=r.String,d=Math.floor,m=a(c),f=a("".slice),p=a(1..toFixed),v=function(e,t,n){return 0===t?n:t%2===1?v(e,t-1,n*e):v(e*e,t/2,n)},b=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},w=function(e,t,n){var i=-1,r=n;while(++i<6)r+=t*e[i],e[i]=r%1e7,r=d(r/1e7)},g=function(e,t){var n=6,i=0;while(--n>=0)i+=e[n],e[n]=d(i/t),i=i%t*1e7},k=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var i=h(e[t]);n=""===n?i:n+m("0",7-i.length)+i}return n},x=l((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!l((function(){p({})}));i({target:"Number",proto:!0,forced:x},{toFixed:function(e){var t,n,i,r,a=s(this),c=o(e),l=[0,0,0,0,0,0],d="",p="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return h(a);if(a<0&&(d="-",a=-a),a>1e-21)if(t=b(a*v(2,69,1))-69,n=t<0?a*v(2,-t,1):a/v(2,t,1),n*=4503599627370496,t=52-t,t>0){w(l,0,n),i=c;while(i>=7)w(l,1e7,0),i-=7;w(l,v(10,i,1),0),i=t-1;while(i>=23)g(l,1<<23),i-=23;g(l,1<<i),w(l,1,1),g(l,2),p=k(l)}else w(l,0,n),w(l,1<<-t,0),p=k(l)+m("0",c);return c>0?(r=p.length,p=d+(r<=c?"0."+m("0",c-r)+p:f(p,0,r-c)+"."+f(p,r-c))):p=d+p,p}})},cc93:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({attrs:{columns:e.columns},scopedSlots:e._u([{key:"search",fn:function(){return[e.isSuper?n("el-form-item",{attrs:{label:"选择企业"}},[n("ui-ent-select",{on:{change:function(t){return e.changeEntId(e.searchForm.entId)}},model:{value:e.searchForm.entId,callback:function(t){e.$set(e.searchForm,"entId",t)},expression:"searchForm.entId"}})],1):e._e(),"statistics"===e.activedTab?n("ui-text-field",{attrs:{label:"工号/姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.condition,callback:function(t){e.$set(e.searchForm,"condition",t)},expression:"searchForm.condition"}}):e._e(),n("el-form-item",{attrs:{label:"选择时间范围"}},[n("ui-date-range-picker",{attrs:{type:"datetimerange"},on:{change:e.onTimeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),n("ui-select",{attrs:{label:"技能组",options:e.skillGroups,props:{value:"queueName"},clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.queueName,callback:function(t){e.$set(e.searchForm,"queueName",t)},expression:"searchForm.queueName"}}),n("ui-select",{attrs:{label:"统计周期",options:e.timeUnits},on:{change:e.onSearch},model:{value:e.searchForm.dateType,callback:function(t){e.$set(e.searchForm,"dateType",t)},expression:"searchForm.dateType"}})]},proxy:!0},{key:"actions",fn:function(){return[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.exportFile}},[e._v("导出")])],1),n("el-tabs",{on:{"tab-click":e.onSearch},model:{value:e.activedTab,callback:function(t){e.activedTab=t},expression:"activedTab"}},[n("el-tab-pane",{attrs:{label:"统计表",name:"statistics"}}),n("el-tab-pane",{attrs:{label:"汇总表",name:"summary"}})],1)]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],a=n("5530"),o=n("3835"),s=n("2909"),c=(n("b680"),n("99af"),n("a02a")),l={name:"LevelOperation",mixins:[window.mixTableView],data:function(){return{skillGroups:[],timerange:[],activedTab:"statistics",timeUnits:{hour:"按小时统计",day:"按天统计",week:"按周统计",month:"按月统计"}}},computed:{isSuper:function(){return this.$store.getters.isAdmin},entId:function(){return this.$store.state.userData.entid},columns:function(){var e,t=[{title:"企业名称",key:"entname",minWidth:100}],n=[{title:"时间",key:"timeType",minWidth:160,sortable:!0}],i=[{title:"工号",key:"workno",minWidth:80},{title:"姓名",key:"workname",minWidth:100}],r=[{title:"技能组",key:"name",minWidth:100},{title:"呼入数",key:"callCount",width:100},{title:"接通数",key:"connectedCount",width:100},{title:"接通率",width:100,render:function(e,t){var n=t.row;return e("span","".concat((100*n.connectedRate).toFixed(2),"%"))}},{title:"10s以下",width:100,render:function(e,t){var n=t.row;return e("span",null===n.serviceLevel4Rate?"":"".concat((100*n.serviceLevel4Rate).toFixed(2),"%"))}},{title:"15S以下",width:100,render:function(e,t){var n=t.row;return e("span","".concat((100*n.serviceLevel1Rate).toFixed(2),"%"))}},{title:"15S~25S",width:100,render:function(e,t){var n=t.row;return e("span","".concat((100*n.serviceLevel2Rate).toFixed(2),"%"))}},{title:"最长振铃时间",width:110,render:function(e,t){var n=t.row;return e("span",Object(c["k"])(n.maxRingTimes))}}];return e="statistics"===this.activedTab?[].concat(n,i,r):[].concat(n,r),this.isSuper?[].concat(t,Object(s["a"])(e)):e},Searchurl:function(){return"statistics"===this.activedTab?"/analysis/service/level/get/list":"/analysis/service/level/get/list/queue"},exportUrl:function(){return"statistics"===this.activedTab?"/analysis/service/level/export":"/analysis/service/level/export/queue"}},mounted:function(){var e=this;this.setInitForm();var t=function(){e.getData(),e.getSkillGroups(e.entId)};t(),Object(c["g"])(this,t)},methods:{fetchMethod:function(e){return this.$http(this.Searchurl,{params:e}).then((function(e){var t=e.data;return t}))},setInitForm:function(){var e=Object(c["o"])(),t=Object(o["a"])(e,2),n=t[0],i=t[1];this.timerange=[n,i],this.tableForm={dateUnitType:"second",dateType:"hour",entId:this.entId,beginDate:+n,endDate:+i},this.searchForm=Object(a["a"])({},this.tableForm)},onTimeChange:function(e){var t=e||[],n=Object(o["a"])(t,2),i=n[0],r=n[1];this.searchForm.beginDate=i&&new Date(i).getTime(),this.searchForm.endDate=r&&new Date(r).getTime(),this.onSearch()},exportFile:function(){var e=this;this.$confirm("您当前导出数据为该筛选条件下的所有数据,请点击确定,继续导出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(e.tableData.total>5e4)return e.$confirm("当前导出数据量超过最大限制(50000条),请重新筛选数据后重试","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});Object(c["i"])({fileName:"statistics"===e.activedTab?"服务水平统计表导出.xls":"服务水平汇总表导出.xls",action:function(){return e.$http(e.exportUrl,{params:e.searchForm,responseType:"blob"})}})}))},changeEntId:function(e){this.onSearch(),this.getSkillGroups(e)},getSkillGroups:function(e){var t=this;this.skillGroups=[],this.searchForm.queueName="",this.$http("/queue/getAllQueueNoPage",{params:{entId:e}}).then((function(e){var n=e.data;t.skillGroups=n}))}}},u=l,h=n("2877"),d=Object(h["a"])(u,i,r,!1,null,null,null);t["default"]=d.exports}}]);