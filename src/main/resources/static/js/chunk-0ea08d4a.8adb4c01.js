(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ea08d4a"],{"008b":function(t,e,i){},"266d":function(t,e,i){},"95fb":function(t,e,i){"use strict";i("266d")},"9e68":function(t,e,i){"use strict";i("c060")},c060:function(t,e,i){},f485:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-modal",t._g(t._b({},"ui-modal",t.modalProps,!1),t.$listeners),[i("ComArticle",{attrs:{canCollect:t.canCollect,data:t.detail}})],1)},l=[],n=(i("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com-sckm-article"},[i("SckmTitleBar",{attrs:{noBorder:"",label:t.itemDetail.title}}),i("div",{staticClass:"com-sckm-article--body"},[i("div",{staticClass:"com-sckm-article--left-wrap"},[t.data.errmsg?i("el-alert",{attrs:{type:"error",title:"查看出错",description:t.data.errmsg,"show-icon":"",closable:!1}}):[i("div",{staticClass:"com-sckm-article--info"},[i("div",{staticClass:"userinfo"},[i("el-avatar",{staticClass:"avator",attrs:{icon:"el-icon-user-solid",size:"small"}}),i("span",{staticClass:"username"},[t._v(t._s(t.itemDetail.authorName))])],1),i("p",{staticClass:"date"},[i("span",[t._v(t._s(t.itemDetail.modifyTime))]),i("span",[t._v("收藏："+t._s(t.data.collectionCount))])])]),i("div",{staticClass:"ql-snow"},[i("div",{staticClass:"ql-editor",domProps:{innerHTML:t._s(t.data.context)}})]),i("ComAttachList",{attrs:{value:t.annexFilePath},on:{"item-click":t.handleAttachClick}})]],2),t.canCollect?i("div",{staticClass:"com-sckm-article--right-wrap"},[i("ComCircleButton",{staticClass:"btn-collect",attrs:{toggle:"",checked:!!t.data.itemCollectionId,icon:"el-icon-star-on",label:"收藏"},on:{click:t.toggleCollect}})],1):t._e()])],1)}),c=[],s=(i("d3b7"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com-sckm-attachlist"},[i("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",multiple:""},on:{change:t.handleFileChange}}),i("ul",[t._l(t.list,(function(e,a){return i("li",{key:a,class:{editMode:t.editMode},attrs:{title:t.getTitle(e)},on:{click:function(e){return t.handleItemClick(a)}}},[i("div",{staticClass:"image"},[i("i",{staticClass:"el-icon-document"}),t.editMode?i("el-link",{staticClass:"icon-delete",attrs:{icon:"el-icon-error",type:"warning",underline:!1},on:{click:function(e){return t.handleDelete(a)}}}):t._e()],1),i("div",{staticClass:"title"},[t._v(t._s(t.getFileName(e)))])])})),t.editMode&&t.list.length<10?i("li",{staticClass:"btn-add",attrs:{title:"添加附件"},on:{click:t.handleAdd}},[i("i",{staticClass:"el-icon-plus"})]):t._e()],2)])}),o=[],r=i("2909"),d=(i("a434"),i("159b"),i("fb6a"),{data:function(){return{list:this.value}},props:{value:{type:Array,default:function(){return[]}},editMode:Boolean},watch:{value:function(t){this.list=t},list:function(t){this.$emit("input",t)}},methods:{getFileName:function(t){return window.sckm.getFileName(t)},getTitle:function(t){var e=this.getFileName(t);return this.editMode?e:"下载附件: ".concat(e)},handleDelete:function(t){this.list.splice(t,1)},removeMaxFiles:function(t){var e={pass:[],limit:[]},i=function(t){return t.size>104857600};return Object(r["a"])(t).forEach((function(t){e[i(t)?"limit":"pass"].push(t)})),e},handleFileChange:function(t){var e=t.target,i=e.files,a=this.removeMaxFiles(i);a.limit.length&&this.$message.error("请选择小于100M的文件."),this.list=[].concat(Object(r["a"])(this.list),Object(r["a"])(a.pass)).slice(0,10),e.value=""},handleAdd:function(){this.$refs.File.click()},handleItemClick:function(t){this.$emit("item-click",t)}}}),u=d,m=(i("f7c5"),i("2877")),h=Object(m["a"])(u,s,o,!1,null,null,null),f=h.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{class:[t.prefix,{toggle:t.toggle,checked:t.checked}],on:{click:function(e){return t.$emit("click",e)}}},[i("i",{class:[t.icon,"icon"]}),i("span",{class:t.prefix+"--label"},[t._v(t._s(t.label))])])},C=[],g={data:function(){return{prefix:"com-sckm-circlebutton"}},props:{toggle:Boolean,icon:String,label:String,checked:Boolean}},v=g,k=(i("95fb"),Object(m["a"])(v,p,C,!1,null,null,null)),b=k.exports,_={components:{ComAttachList:f,ComCircleButton:b},data:function(){return{loading:!1}},props:{data:{type:Object,default:function(){return{}}},canCollect:{type:Boolean,default:!0}},computed:{annexFilePath:function(){return this.data.annexFilePath||[]},itemDetail:function(){return this.data.itemDetail||{}}},methods:{handleAttachClick:function(t){location.href="sckm/item/downloadFileById?itemFileId=".concat(this.data.itemFileIds[t])},toggleCollect:function(){var t=this;if(!this.loading){this.loading=!0;var e=this.data,i=e.itemCollectionId,a=e.itemDetail,l=e.collectionCount,n=void 0===l?0:l;this.$post("sckm/item/coll/collection",{itemId:a.itemId,addOrDel:+!!i,itemCollectionId:i}).then((function(e){var a=e.data;t.$set(t.data,"itemCollectionId",i?"":a),t.$set(t.data,"collectionCount",i?n-1:n+1)})).finally((function(){t.loading=!1}))}}}},w=_,F=(i("9e68"),Object(m["a"])(w,n,c,!1,null,null,null)),x=F.exports,y={components:{ComArticle:x},props:{row:{},isManage:Boolean,canCollect:{type:Boolean,default:!0}},data:function(){return{detail:{}}},computed:{modalProps:function(){var t=this.row;return{title:t.title,width:"600px",hideOK:!0,drawer:!0}}},mounted:function(){this.getData()},methods:{getData:function(){var t=this,e=this.row,i=this.isManage;this.$http("sckm/item/query/detail".concat(i?"/for/manage":"","/").concat(e.itemId)).then((function(e){t.detail=e.data})).catch((function(i){t.detail={errmsg:i.message,itemDetail:{title:e.title}}}))}}},$=y,D=Object(m["a"])($,a,l,!1,null,null,null);e["default"]=D.exports},f7c5:function(t,e,i){"use strict";i("008b")}}]);