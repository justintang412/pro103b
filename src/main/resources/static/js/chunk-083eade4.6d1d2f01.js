(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-083eade4"],{"07e5":function(t,e,i){},"6c47":function(t,e,i){"use strict";i("07e5")},"9ad2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-table-view",t._g(t._b({scopedSlots:t._u([{key:"search",fn:function(){return[i("el-form-item",{attrs:{label:"会话开始时间"}},[i("ui-date-range-picker",{attrs:{clearable:!1},on:{change:t.onSearch},model:{value:t.timerange,callback:function(e){t.timerange=e},expression:"timerange"}})],1),i("ui-select",{attrs:{label:"质检方案",filterable:"",clearable:""},on:{change:t.onSearch},model:{value:t.searchForm.programmeId,callback:function(e){t.$set(t.searchForm,"programmeId",e)},expression:"searchForm.programmeId"}},t._l(t.options,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.companyId}})})),1),i("ui-select",{attrs:{label:"技能组",options:t.onlineSkills,props:{value:"id",label:"name"},multiple:"",filterable:"",clearable:""},on:{change:t.onChangeSkill},model:{value:t.searchForm.agentSkill,callback:function(e){t.$set(t.searchForm,"agentSkill",e)},expression:"searchForm.agentSkill"}}),i("ui-select",{attrs:{label:"人工客服",options:t.onlineUsers,props:{key:"id",value:"agentno",label:"name"},multiple:"",filterable:"",clearable:""},on:{change:t.onSearch},model:{value:t.searchForm.seatId,callback:function(e){t.$set(t.searchForm,"seatId",e)},expression:"searchForm.seatId"}})]},proxy:!0},{key:"actions",fn:function(){return[i("div",{staticClass:"inspection-title"},[t._v("质检概览")]),i("ul",{staticClass:"inspection-list"},[i("li",{staticClass:"inspection-item"},[i("div",{staticClass:"inspection-item-title"},[t._v("客户会话总数 "),i("el-tooltip",{attrs:{content:"人工客服会话的总数。每转接一次都计入总数",placement:"top"}},[i("i",{staticClass:"el-icon-question",staticStyle:{"margin-left":"5px"}})])],1),i("div",{staticClass:"inspection-item-value"},[t._v(t._s(t.overview.totalConversation||0))])]),i("li",{staticClass:"inspection-item"},[i("div",{staticClass:"inspection-item-title"},[t._v("已质检数 "),i("el-tooltip",{attrs:{content:"所有客服会话中，已质检的会话数量",placement:"top"}},[i("i",{staticClass:"el-icon-question",staticStyle:{"margin-left":"5px"}})])],1),i("div",{staticClass:"inspection-item-value"},[t._v(t._s(t.overview.alreadyQuality||0))])]),i("li",{staticClass:"inspection-item"},[i("div",{staticClass:"inspection-item-title"},[t._v("有效会话质检率 "),i("el-tooltip",{attrs:{content:"有效会话（客户、客服至少一方发送过消息）质检率=已质检有效会话数/有效会话总数",placement:"top"}},[i("i",{staticClass:"el-icon-question",staticStyle:{"margin-left":"5px"}})])],1),i("div",{staticClass:"inspection-item-value"},[t._v(t._s(t.overview.QualityRate||0))])])]),i("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-download",disabled:!t.tableData.data.length},on:{click:t.onExport}},[t._v("导出质检报表")])]},proxy:!0}])},"ui-table-view",t.viewProps,!1),t.viewListeners))},a=[],s=i("5530"),o=i("a02a"),r=i("c035"),l={name:"QualitySessionStatistics",mixins:[window.mixTableView,r["a"]],data:function(){return{timerange:[],overview:{},columns:[{label:"客服",prop:"seatName",minWidth:120},{label:"客服会话/次",prop:"TTLConversation",minWidth:120},{label:"已质检",prop:"qualityTimes",minWidth:120},{label:"质检频率",prop:"QCRate",minWidth:120},{label:"平均标准分得分",prop:"stand",minWidth:140},{label:"平均附加分得分",prop:"add",minWidth:140},{label:"平均总得分",prop:"ttl",minWidth:120}]}},mounted:function(){var t=this;this.setInitForm();var e=function(){t.getData(),t.getOptionsData(),t.getOnlineSkills(),t.getOnlineUsers([])};e(),Object(o["g"])(this,e)},methods:{setInitForm:function(){var t=this.$adminCore.formatDate(new Date,"yyyy-MM-dd");this.timerange=[t,t],this.searchForm={},this.tableForm={}},onExport:function(){var t=this,e=Object(s["a"])(Object(s["a"])({},this.searchForm),{},{conversationStartDay:this.timerange[0],conversationEndDay:this.timerange[1],entId:this.entId,agentSkill:(this.searchForm.agentSkill||"")+"",seatId:(this.searchForm.seatId||"")+""});e.programmeId?Object(o["i"])({fileName:"质检报表导出.xls",action:function(){return t.$http("/quality/statistics/resultDownload",{params:e,responseType:"blob"})}}):this.$message.info("请先选择质检方案")},fetchMethod:function(t){var e=this;return t=Object(s["a"])(Object(s["a"])({},t),{},{conversationStartDay:this.timerange[0],conversationEndDay:this.timerange[1],entId:this.entId,agentSkill:(this.searchForm.agentSkill||"")+"",seatId:(this.searchForm.seatId||"")+""}),t=this.checkValue(t),this.$http("/quality/statistics/select",{params:t}).then((function(t){var i=t.data;return e.overview=i,i}))},onReset:function(){this.setInitForm(),this.onSearch(),this.getOnlineUsers([])}}},c=l,h=(i("6c47"),i("2877")),u=Object(h["a"])(c,n,a,!1,null,null,null);e["default"]=u.exports},c035:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("5530"),a=i("3835"),s=(i("d3b7"),i("3ca3"),i("ddb0"),i("159b"),i("b64b"),{data:function(){return{show:!1,options:[],users:[],channels:{weixin:"微信",weibo:"微博",webim:"网页",app:"app"},handleTypes:{inservice:"服务中",end:"结束",inqueue:"队列中"},onlineUsers:[],onlineSkills:[],sessionStatistics:{}}},computed:{entId:function(){return this.$store.state.userData.entid}},methods:{getOptionsData:function(){var t=this;this.$http("/quality/programme/getAllProgramme",{params:{entId:this.entId}}).then((function(e){e=e.data,t.options=e.params}))},getSessionStatistics:function(t){var e=this;this.$http("/quality/statistics/summary",{params:t}).then((function(t){var i=t.data;e.sessionStatistics=i}))},getUsers:function(){var t=this;this.$http("/ccas/auth/user/list?entId=".concat(this.entId)).then((function(e){t.users=e.data}))},onRowClick:function(t){this.$openModal((function(){return Promise.all([i.e("chunk-45682ea3"),i.e("chunk-422b85c9"),i.e("chunk-4642dcbf"),i.e("chunk-74d195c1")]).then(i.bind(null,"218b"))}),{row:t,viewsType:this.viewsType,options:this.options,programId:this.searchForm.programId,store:this.$store,router:this.$router},{close:this.getData.bind(this)})},onTimeChange:function(t){var e=this.$adminCore.formatDate(new Date,"yyyy-MM-dd"),i=t||[e,e],n=Object(a["a"])(i,2),s=n[0],o=n[1];this.searchForm.beginTime=s,this.searchForm.endTime=o,this.onSearch()},onFilterShow:function(){this.$refs.ComFilter.show(this.searchForm)},getQualityStatusText:function(t){return{1:"未质检",2:"已质检",3:"未申诉",4:"申诉中",5:"驳回",6:"已重检"}[t]||""},onPopSearch:function(t){this.searchForm=Object(n["a"])({},t),this.tableForm=Object(n["a"])({},t),this.onSearch()},getOnlineSkills:function(){var t=this;this.$imHttp("/skill/list",{params:{orgi:this.entId}}).then((function(e){var i=e.data;t.onlineSkills=i}))},onChangeSkill:function(t){this.$set(this.searchForm,"seatId",[]),this.onSearch(),this.getOnlineUsers(t)},getOnlineUsers:function(t){var e=this;this.$imHttp.post("/skill/multiSkillCustList",{skillIds:t,orgi:this.entId}).then((function(t){var i=t.data;e.onlineUsers=i}))},checkValue:function(t){return Object.keys(t).forEach((function(e){"undefined"!==t[e]&&""!==t[e]||delete t[e]})),t}}})}}]);