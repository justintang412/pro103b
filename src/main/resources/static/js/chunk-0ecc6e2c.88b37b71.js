(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ecc6e2c"],{"33d0":function(t,e,a){},"5ee3":function(t,e,a){"use strict";a("33d0")},c1f3:function(t,e,a){"use strict";a("f91a")},dd13:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SckmMainLayout",{staticClass:"page-sckm-search"},[a("SckmStructure",{attrs:{slot:"left",disabled:"",data:t.treeData},on:{"on-change":t.handleNodeSelectChange},slot:"left",model:{value:t.selectedNodeData,callback:function(e){t.selectedNodeData=e},expression:"selectedNodeData"}}),a("SckmDataTable",t._b({attrs:{title:"知识搜索"},on:{"on-change":t.getData}},"SckmDataTable",t.bindProps,!1),[a("div",{staticClass:"search-form",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{attrs:{placeholder:"输入关键字进行搜索",maxlength:60},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.input.tempValue,callback:function(e){t.$set(t.input,"tempValue",e)},expression:"input.tempValue"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),t.input.keywords?a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clearInput}},[t._v("返回热搜")]):t._e()],1),t.input.keywords?t._e():a("div",{staticClass:"page-sckm-search--hot-wrapper",attrs:{slot:"bottom"},slot:"bottom"},[a("el-tabs",{on:{"tab-click":function(e){return t.getHotData(e.name)}},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"今日热点",name:"0"}},[a("ComHotPoints",{attrs:{data:t.hotData[0]}})],1),a("el-tab-pane",{attrs:{label:"周热点",name:"1"}},[a("ComHotPoints",{attrs:{data:t.hotData[1]}})],1),a("el-tab-pane",{attrs:{label:"月热点",name:"2"}},[a("ComHotPoints",{attrs:{data:t.hotData[2]}})],1)],1)],1)])],1)},i=[],s=a("5530"),o=(a("d3b7"),a("a02a")),l=a("0053"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"com-sckm-hotpoints"},t._l(t.data,(function(e,n){return a("li",{key:e.itemId},[a("span",{staticClass:"index"},[t._v(t._s(n+1))]),a("span",{staticClass:"title"},[a("a",{staticClass:"link",on:{click:function(a){return t.openArticle(e)}}},[t._v(t._s(e.title))])]),a("span",{staticClass:"count"},[t._v(t._s(e.readCount))])])})),0)},c=[],u=(a("3ca3"),a("ddb0"),{props:{data:{type:Array,default:function(){return[]}}},methods:{openArticle:function(t){this.$openModal((function(){return a.e("chunk-0478937c").then(a.bind(null,"f52f"))}),{row:t,isManage:!1})}}}),d=u,p=(a("5ee3"),a("2877")),h=Object(p["a"])(d,r,c,!1,null,null,null),m=h.exports,f={components:{ComHotPoints:m},data:function(){return{loading:!1,currentTab:"0",input:{keywords:"",tempValue:""},selectedNodeData:null,treeData:[],hotData:{0:[],1:[],2:[]},tableData:{data:[],total:0,pageNum:1,pageSize:10},columns:[{title:"热度",key:"readCountTotal",minWidth:80},Object(l["b"])(),{title:"分类",key:"categoryName",ellipsis:!0,minWidth:130},{title:"关联内容",key:"lightContent",ellipsis:!0,minWidth:210,render:function(t,e){return t("span",{domProps:{innerHTML:e.row.lightContent},class:"light-content"})}},{title:"录入日期",key:"createTime",ellipsis:!0,minWidth:170}]}},computed:{bindProps:function(){return Object(s["a"])(Object(s["a"])({},this.tableData),{},{columns:this.columns,loading:this.loading})},userType:function(){return this.$store.getters.isAdmin?"1":this.$store.state.permissions.indexOf("kbm")>-1?"2":"3"}},beforeRouteEnter:function(t,e,a){a((function(t){return t.initState()}))},methods:{initState:function(){this.currentTab="0",this.input.keywords=this.input.tempValue="",this.getHotData(),this.getTreeData()},getTreeData:function(){var t=this;return this.$http("/sckm/category/nodes").then((function(t){var e=t.data;return[{title:"知识库",name:"知识库",expand:!0,id:"-1",children:Object(o["F"])(e,{parentId:"pId"})}]})).then((function(e){t.treeData=e,t.selectedNodeData=e[0]}))},getHotData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";this.$http("/sckm/item/hot",{params:{hotType:e,userType:this.userType}}).then((function(a){var n=a.data;t.hotData[e]=n.list}))},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0;var a=this.tableData,n=a.pageSize,i=a.pageNum,o=this.selectedNodeData?this.selectedNodeData.id:"-1";this.$http("/sckm/item/list/by/keywords",{params:Object(s["a"])(Object(s["a"])({pageSize:n,pageNum:i,categoryId:o,keywords:this.input.keywords},e),{},{userType:this.userType})}).then((function(a){var n=a.data;t.tableData=Object(s["a"])(Object(s["a"])({},t.tableData),{},{data:n.list,total:n.total,pageNum:e.pageNum})})).finally((function(){t.loading=!1}))},handleNodeSelectChange:function(t){this.input.tempValue=this.input.keywords,t&&this.input.keywords&&this.getData({pageNum:1})},handleSearch:function(){this.input.keywords=this.input.tempValue,this.input.keywords&&this.getData({pageNum:1})},clearInput:function(){this.getHotData(this.currentTab),this.input.keywords=this.input.tempValue=""}}},b=f,k=(a("c1f3"),Object(p["a"])(b,n,i,!1,null,null,null));e["default"]=k.exports},f91a:function(t,e,a){}}]);