(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32063e30"],{"45f7":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[l("el-form",{ref:"Form",attrs:{"label-width":"10em",model:e.form,rules:e.rules}},[l("div",{staticClass:"box"},[l("ui-text-field",{attrs:{label:"队列名",prop:"queueName"},model:{value:e.form.queueName,callback:function(t){e.$set(e.form,"queueName",t)},expression:"form.queueName"}}),l("ui-text-field",{attrs:{label:"最大排队人数",prop:"waitCount"},model:{value:e.form.waitCount,callback:function(t){e.$set(e.form,"waitCount",t)},expression:"form.waitCount"}}),l("ui-text-field",{attrs:{label:"等待接通时限",prop:"waitAnswerTime"},model:{value:e.form.waitAnswerTime,callback:function(t){e.$set(e.form,"waitAnswerTime",t)},expression:"form.waitAnswerTime"}},[l("template",{slot:"suffix"},[e._v("秒")])],2),l("ui-select",{attrs:{label:"报工号",prop:"playWorknoFlag"},model:{value:e.form.playWorknoFlag,callback:function(t){e.$set(e.form,"playWorknoFlag",t)},expression:"form.playWorknoFlag"}},[l("el-option",{attrs:{value:0,label:"不播放"}}),l("el-option",{attrs:{value:1,label:"播放"}})],1),l("ui-select",{attrs:{label:"呼叫分配策略",prop:"dispatchFlag"},model:{value:e.form.dispatchFlag,callback:function(t){e.$set(e.form,"dispatchFlag",t)},expression:"form.dispatchFlag"}},[l("el-option",{attrs:{value:0,label:"按照次序连续分配"}}),l("el-option",{attrs:{value:1,label:"轮选（记住最后一个）"}}),l("el-option",{attrs:{value:2,label:"每个呼叫都从头开始"}}),l("el-option",{attrs:{value:3,label:"随机"}}),l("el-option",{attrs:{value:4,label:"最长空闲时间"}}),l("el-option",{attrs:{value:5,label:"最少通话时间"}}),l("el-option",{attrs:{value:6,label:"最少通话次数"}})],1),l("ui-select",{attrs:{label:"状态",prop:"queueState"},model:{value:e.form.queueState,callback:function(t){e.$set(e.form,"queueState",t)},expression:"form.queueState"}},[l("el-option",{attrs:{value:0,label:"停用"}}),l("el-option",{attrs:{value:1,label:"启用"}})],1),l("ui-text-field",{attrs:{label:"排队时限",prop:"waitTime"},model:{value:e.form.waitTime,callback:function(t){e.$set(e.form,"waitTime",t)},expression:"form.waitTime"}},[l("template",{slot:"suffix"},[e._v("秒")])],2),l("el-form-item",{attrs:{label:"报位置",prop:"playPosition"}},[l("el-select",{staticStyle:{width:"85%"},model:{value:e.form.playPosition,callback:function(t){e.$set(e.form,"playPosition",t)},expression:"form.playPosition"}},[l("el-option",{attrs:{value:0,label:"不播放"}}),l("el-option",{attrs:{value:1,label:"播放"}})],1),l("el-tooltip",{attrs:{content:"播报当前排队位置,前面排队等待人数",placement:"top"}},[l("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"20px","margin-left":"5px"}})])],1),l("el-form-item",{attrs:{label:"外呼主叫号码",prop:"callNum"}},[l("ul",{staticClass:"flexbox-group"},e._l(e.form.callNum,(function(t,a){return l("li",{key:a,staticClass:"item"},[l("el-input",{model:{value:e.form.callNum[a],callback:function(t){e.$set(e.form.callNum,a,t)},expression:"form.callNum[i]"}}),l("el-link",0===a?{attrs:{icon:"el-icon-circle-plus",underline:!1,type:"primary"},on:{click:e.onAddCallNum}}:{attrs:{icon:"el-icon-remove",underline:!1,type:"primary"},on:{click:function(t){return e.onRemoveCallNum(a)}}})],1)})),0)]),l("ui-select",{attrs:{label:"技能优先",prop:"workLevelFlag"},model:{value:e.form.workLevelFlag,callback:function(t){e.$set(e.form,"workLevelFlag",t)},expression:"form.workLevelFlag"}},[l("el-option",{attrs:{value:0,label:"停用"}}),l("el-option",{attrs:{value:1,label:"启用"}})],1),l("ui-select",{attrs:{label:"通话结束转满意度",prop:"satisfactionFlag"},model:{value:e.form.satisfactionFlag,callback:function(t){e.$set(e.form,"satisfactionFlag",t)},expression:"form.satisfactionFlag"}},[l("el-option",{attrs:{value:0,label:"停用"}}),l("el-option",{attrs:{value:1,label:"启用"}})],1),l("ui-select",{attrs:{label:"客户优先级排队",prop:"contactLevelFlag"},model:{value:e.form.contactLevelFlag,callback:function(t){e.$set(e.form,"contactLevelFlag",t)},expression:"form.contactLevelFlag"}},[l("el-option",{attrs:{value:0,label:"停用"}}),l("el-option",{attrs:{value:1,label:"启用"}})],1)],1),l("el-button",{attrs:{type:"text",icon:e.isAddition?"el-icon-caret-top":"el-icon-caret-bottom"},on:{click:function(t){e.isAddition=!e.isAddition}}},[e._v("高级配置")]),l("transition",{attrs:{name:"slide-fade"}},[l("div",{directives:[{name:"show",rawName:"v-show",value:e.isAddition,expression:"isAddition"}],staticClass:"box"},[l("ui-text-field",{attrs:{label:"默认排队次数",prop:"queueCount"},model:{value:e.form.queueCount,callback:function(t){e.$set(e.form,"queueCount",t)},expression:"form.queueCount"}}),l("ui-select",{attrs:{label:"坐席忙转IVR",prop:"queueIvr"},model:{value:e.form.queueIvr,callback:function(t){e.$set(e.form,"queueIvr",t)},expression:"form.queueIvr"}},[l("el-option",{attrs:{value:0,label:"排队无选项"}}),l("el-option",{attrs:{value:1,label:"排队后语音提示转"}}),l("el-option",{attrs:{value:2,label:"不排队直接转"}})],1),l("el-form-item",{attrs:{label:"呼叫等待音乐"}},[l("el-upload",{attrs:{action:e.tenantUploadUrl,"show-file-list":!1,"before-upload":e.beforeUploadunctionHoldmusic,"with-credentials":!0}},[l("el-button",{attrs:{icon:"el-icon-upload"}},[e._v("选择文件")])],1),e.holdMusicName?l("div",{staticClass:"filename"},[e._v(e._s(e.holdMusicName))]):e._e()],1),l("el-form-item",{attrs:{label:"队列忙提示音"}},[l("el-upload",{attrs:{action:e.tenantUploadUrl,"show-file-list":!1,"before-upload":e.beforeUploadunctionCallseatBusy,"with-credentials":!0}},[l("el-button",{attrs:{icon:"el-icon-upload"}},[e._v("选择文件")])],1),e.callSeatBusyName?l("div",{staticClass:"filename"},[e._v(e._s(e.callSeatBusyName))]):e._e()],1),l("ui-select",{attrs:{label:"坐席忙转语音信箱"},model:{value:e.form.queueMail,callback:function(t){e.$set(e.form,"queueMail",t)},expression:"form.queueMail"}},[l("el-option",{attrs:{value:0,label:"排队无选项"}}),l("el-option",{attrs:{value:1,label:"排队后语音提示转"}}),l("el-option",{attrs:{value:2,label:"不排队直接转"}})],1),l("el-form-item",{attrs:{label:"无人接听留言提示音",prop:"callseatfail"}},[l("el-upload",{attrs:{action:e.tenantUploadUrl,"show-file-list":!1,"before-upload":e.beforeUploadunctionCallseatfail,"with-credentials":!0}},[l("el-button",{attrs:{icon:"el-icon-upload"}},[e._v("选择文件")])],1),e.callSeatFailName?l("div",{staticClass:"filename"},[e._v(e._s(e.callSeatFailName))]):e._e()],1),l("el-form-item",{attrs:{label:"排队音乐"}},[l("el-upload",{attrs:{action:e.tenantUploadUrl,"show-file-list":!1,"before-upload":e.beforeUploadunctionCallmusic,"with-credentials":!0}},[l("el-button",{attrs:{icon:"el-icon-upload"}},[e._v("选择文件")])],1),e.callMusicName?l("div",{staticClass:"filename"},[e._v(e._s(e.callMusicName))]):e._e()],1)],1)])],1)],1)},o=[],i=l("5530"),n=l("2909"),r=l("1da1"),s=(l("96cf"),l("d3b7"),l("498a"),l("4de4"),l("d81d"),l("99af"),l("ac1f"),l("1276"),l("b0c0"),l("a434"),l("60e2")),u=l("a02a"),c={props:["row","entId"],data:function(){var e=this,t=this.row;return{tenantUploadUrl:Object(s["c"])("/queue/upload"),isAddition:!1,holdMusicName:"",callSeatBusyName:"",callSeatFailName:"",callMusicName:"",rules:{queueName:Object(u["y"])("队列名不能为空"),waitCount:Object(u["y"])("最大排队人数不能为空"),callNum:{required:!0,trigger:"blur",validator:function(e,t,l){t.some((function(e){return e.trim()}))?l():l(new Error("外呼主叫号码不能为空"))}},waitAnswerTime:Object(u["y"])("等待接通时限不能为空"),waitTime:Object(u["y"])("排队时限不能为空")},form:{},modalProps:{title:"队列".concat(t?"编辑":"新增"),isEdit:!!t,width:"720px",onSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var l,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:return l=e.form,a=l.callNum.map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){return e.indexOf(t)<0?[].concat(Object(n["a"])(e),[t]):e}),[])+"",t.next=6,e.$http.post("/queue/saveOrUpdate?callNum=".concat(a),Object(i["a"])(Object(i["a"])({},l),{},{callNum:a}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));function l(){return t.apply(this,arguments)}return l}()}}},mounted:function(){var e=this.row;this.form=e?Object(i["a"])(Object(i["a"])({},e),{},{callNum:e.callNum.split(","),holdMusicName:this.setFileName(e.holdMusic),callSeatFailName:this.setFileName(e.callSeatFail),callSeatBusyName:this.setFileName(e.callSeatBusy),callMusicName:this.setFileName(e.callMusic),entId:this.entId}):{callNum:[""],waitTime:"30",waitCount:"10",waitAnswerTime:"30",queueCount:"3",playWorknoFlag:1,dispatchFlag:0,queueState:1,playPosition:1,workLevelFlag:1,satisfactionFlag:1,contactLevelFlag:1,queueIvr:0,queueMail:0,entId:this.entId}},methods:{setFileName:function(e){if(e){var t=e.split("/");return t[t.length-1]}return""},beforeUploadunctionHoldmusic:function(e){return this.holdMusicName=e.name,this.upload(e,"holdMusic"),!1},beforeUploadunctionCallseatBusy:function(e){return this.callSeatBusyName=e.name,this.upload(e,"callSeatBusy"),!1},beforeUploadunctionCallseatfail:function(e){return this.callSeatFailName=e.name,this.upload(e,"callSeatFail"),!1},beforeUploadunctionCallmusic:function(e){return this.callMusicName=e.name,this.upload(e,"callMusic"),!1},upload:function(e,t){var l=this,a=new FormData;a.append("file",e),this.$http.post("/queue/upload",a).then((function(e){l.$set(l.form,t,e.data)})).catch((function(e){l[t+"Name"]=""}))},onAddCallNum:function(){this.form.callNum.push("")},onRemoveCallNum:function(e){this.form.callNum.splice(e,1)}}},m=c,f=(l("567f"),l("2877")),p=Object(f["a"])(m,a,o,!1,null,"7f04361e",null);t["default"]=p.exports},"498a":function(e,t,l){"use strict";var a=l("23e7"),o=l("58a8").trim,i=l("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return o(this)}})},"567f":function(e,t,l){"use strict";l("b471")},b471:function(e,t,l){},c8d2:function(e,t,l){var a=l("5e77").PROPER,o=l("d039"),i=l("5899"),n="​᠎";e.exports=function(e){return o((function(){return!!i[e]()||n[e]()!==n||a&&i[e].name!==e}))}}}]);