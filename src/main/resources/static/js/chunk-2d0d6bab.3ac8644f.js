(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6bab"],{7491:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("ui-text-field",{attrs:{label:"联系人"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.contactName,callback:function(t){e.$set(e.searchForm,"contactName",t)},expression:"searchForm.contactName"}}),n("ui-text-field",{attrs:{label:"联系电话"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.contactPhone,callback:function(t){e.$set(e.searchForm,"contactPhone",t)},expression:"searchForm.contactPhone"}}),n("ui-select",{attrs:{label:"外呼状态",options:e.callStatus,clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.callStatus,callback:function(t){e.$set(e.searchForm,"callStatus",t)},expression:"searchForm.callStatus"}})]},proxy:!0},{key:"actions",fn:function(){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.taskDetail.assignType,expression:"taskDetail.assignType === 2"}],attrs:{type:"primary"},on:{click:function(t){return e.onGrab()}}},[e._v("抢单")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],i=n("1da1"),c=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("a02a")),s=n("5cdf"),o={name:"OcmPreviewMyBatchDetails",mixins:[window.mixTableView],data:function(){var e=this;return{callStatus:s["c"],taskDetail:{},columns:[{label:"联系人",prop:"contactName"},{label:"联系电话",minWidth:120,render:function(t,n){var a=n.row;return t("span",e.$getPhoneText(a.contactPhone))}},{label:"性别",minWidth:80,render:function(e,t){var n=t.row;return e("div",s["k"][n.contactSex])}},{label:"当前状态",minWidth:80,render:function(e,t){var n=t.row;return e("div",s["c"][n.callStatus])}},{label:"呼叫时间",prop:"callTime",minWidth:140},{label:"通话时长",render:function(e,t){var n=t.row;return e("div",Object(c["k"])(n.callTimeLen))}},{label:"操作",width:160,fixed:"right",render:function(t,n){var a=n.row,r=e.$isEncrypted(a.contactPhone);return e.$hBtns([{label:"呼叫",action:e.onCall,props:{disabled:r}},{label:"短信",action:e.onSendSms,props:{disabled:r}},{label:"详情",action:e.onView}])(t,{row:a})}}]}},computed:{id:function(){return this.$route.params.id}},mounted:function(){this.getInitData(),Object(c["g"])(this,this.getInitData)},methods:{getInitData:function(){this._id&&this._id!==this.id?this.onReset():this.getData(),this.getTaskDetail(),this._id=this.id},fetchMethod:function(e){return this.$http("/ccas/call/manual/event/list/my/list?eventId=".concat(this.id),{params:e}).then((function(e){return e.data}))},onView:function(e){this.$router.push({name:"".concat(s["g"],"-preview-batch-name-list-details"),params:{id:e.eventListId}})},onSendSms:function(e){this.$openModal((function(){return n.e("chunk-97d13c26").then(n.bind(null,"3772"))}),{row:e,userData:this.$store.state.userData,templateId:this.taskDetail.messageTemplateId})},onCall:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$http("/ccas/call/info/event/list/call/check/".concat(e.eventListId));case 3:t.$eventBus.$emit("phonebar",{type:"makecall",payload:{args:[e.contactPhone,""],params:{eventListId:e.eventListId}}}),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),t.getData();case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},getTaskDetail:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/ccas/call/manual/event/details/".concat(e.id));case 2:e.taskDetail=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},onGrab:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/ccas/call/manual/event/list/grab/list/".concat(e.id));case 2:e.$message.success("抢单成功"),e.getData();case 4:case"end":return t.stop()}}),t)})))()}}},l=o,u=n("2877"),d=Object(u["a"])(l,a,r,!1,null,null,null);t["default"]=d.exports}}]);