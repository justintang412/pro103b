(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c8e2a99"],{"1c93":function(t,e,r){"use strict";r("75e9")},"364c":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ui-modal",t._g(t._b({ref:"Modal"},"ui-modal",t.modalProps,!1),t.$listeners),[r("div",{ref:"body",class:t.prefix+"_body"},[r("aside",{class:t.prefix+"_control-list"},t._l(t.controls,(function(e){return r("div",{key:e.type,class:[t.prefix+"_control",{active:t.curControl&&t.curControl.type===e.type}],on:{click:function(r){return t.onControlClick(e)}}},[t._v(t._s(e.title))])})),0),r("main",{ref:"editor",class:t.prefix+"_editor",on:{click:t.onEditorClick}}),r("aside",{class:t.prefix+"_settings"},[r("el-scrollbar",{staticClass:"ui-scrollbar"},[r("div",{class:t.prefix+"_settings-inner"},[r("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"选择控件后，单击编辑区以添加控件",closable:!1}}),r("el-form",{ref:"Form",attrs:{"label-width":"6em","inline-message":"",model:t.form,rules:t.rules}},[r("ui-text-field",{attrs:{label:"页面名称",prop:"pageName",placeholder:"请输入页面名称"},model:{value:t.form.pageName,callback:function(e){t.$set(t.form,"pageName",e)},expression:"form.pageName"}}),r("ui-text-field",{attrs:{label:"页面描述",type:"textarea",placeholder:"请输入页面描述"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}}),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-view"},on:{click:t.onView}},[t._v("预览")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-finished"},on:{click:t.submit}},[t._v("保存")])],1),r("el-form-item",{attrs:{label:"页面背景"}},[r("img",{ref:"BackgroundImg",attrs:{width:"32",height:"32"},on:{click:t.onSetPageBackground}})]),1===t.curItem.type?[r("el-form-item",{attrs:{label:"文本内容"}},[r("div",{staticClass:"flexbox"},[r("el-input",{ref:"ContentInput",attrs:{type:"textarea",rows:"3"},on:{change:t.updateItem},model:{value:t.curItem.content,callback:function(e){t.$set(t.curItem,"content",e)},expression:"curItem.content"}}),r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.onInsertVar}},[t._v("插入变量")])],1)]),r("ui-text-field",{attrs:{label:"文字大小"},on:{change:t.updateItem},model:{value:t.curItem.fontSize,callback:function(e){t.$set(t.curItem,"fontSize",e)},expression:"curItem.fontSize"}},[r("template",{slot:"append"},[t._v("px")])],2),r("ui-text-field",{attrs:{label:"行高"},on:{change:t.updateItem},model:{value:t.curItem.lineHeight,callback:function(e){t.$set(t.curItem,"lineHeight",e)},expression:"curItem.lineHeight"}},[r("template",{slot:"append"},[t._v("em")])],2),r("ui-text-field",{attrs:{label:"填充"},on:{change:t.updateItem},model:{value:t.curItem.padding,callback:function(e){t.$set(t.curItem,"padding",e)},expression:"curItem.padding"}}),r("ui-text-field",{attrs:{label:"边框圆角"},on:{change:t.updateItem},model:{value:t.curItem.borderRadius,callback:function(e){t.$set(t.curItem,"borderRadius",e)},expression:"curItem.borderRadius"}}),r("ui-text-field",{attrs:{label:"文字间距"},on:{change:t.updateItem},model:{value:t.curItem.letterSpacing,callback:function(e){t.$set(t.curItem,"letterSpacing",e)},expression:"curItem.letterSpacing"}},[r("template",{slot:"append"},[t._v("px")])],2),r("el-form-item",{attrs:{label:"文字颜色"}},[r("el-color-picker",{attrs:{"show-alpha":""},on:{change:t.updateItem},model:{value:t.curItem.color,callback:function(e){t.$set(t.curItem,"color",e)},expression:"curItem.color"}})],1),r("el-form-item",{attrs:{label:"背景颜色"}},[r("el-color-picker",{attrs:{"show-alpha":""},on:{change:t.updateItem},model:{value:t.curItem.backgroundColor,callback:function(e){t.$set(t.curItem,"backgroundColor",e)},expression:"curItem.backgroundColor"}})],1),r("el-form-item",{attrs:{label:"字体样式"}},[r("el-checkbox",{on:{change:t.updateItem},model:{value:t.curItem.italic,callback:function(e){t.$set(t.curItem,"italic",e)},expression:"curItem.italic"}},[t._v("斜体")]),r("el-checkbox",{on:{change:t.updateItem},model:{value:t.curItem.bold,callback:function(e){t.$set(t.curItem,"bold",e)},expression:"curItem.bold"}},[t._v("粗体")])],1)]:2===t.curItem.type?[r("el-form-item",{attrs:{label:"选择图片"}},[r("img",{attrs:{width:"32",height:"32",src:t.curItem.src},on:{click:t.onAddMaterial}})]),r("ui-text-field",{attrs:{label:"图片宽度"},on:{change:t.updateItem},model:{value:t.curItem.width,callback:function(e){t.$set(t.curItem,"width",e)},expression:"curItem.width"}},[r("template",{slot:"append"},[t._v("px")])],2),r("ui-text-field",{attrs:{label:"图片高度"},on:{change:t.updateItem},model:{value:t.curItem.height,callback:function(e){t.$set(t.curItem,"height",e)},expression:"curItem.height"}},[r("template",{slot:"append"},[t._v("px")])],2)]:t._e()],2)],1)])],1)])])},a=[],o=r("1da1"),i=r("5530"),l=(r("96cf"),r("d3b7"),r("159b"),r("d81d"),r("ac1f"),r("1276"),r("498a"),r("a630"),r("3ca3"),r("ddb0"),r("ade3"));r("99af"),r("cc71"),r("c5d0");const s=t=>"undefined"!==typeof t,c=t=>"boolean"===typeof t,u=t=>!!t,h=t=>!isNaN(t),d=t=>parseFloat(t),p=t=>h(t)&&t===(0|t),g=t=>"string"===typeof t||s(t)&&t instanceof String,m=t=>s(t)?t.toString():"",f=t=>"function"===typeof t,y=t=>s(t)&&Array.isArray(t),b=t=>t&&p(t.length)&&0<=t.length,v=t=>Array.prototype.slice.call(t),w=t=>Object.keys(t),I=(t,e=(()=>{}),r)=>w(t).forEach(n=>e.call(r,t[n],n,t)),x=(t,e=(()=>{}),r)=>w(t).reduce((r,n)=>e(r,t[n],n,t),r),E=(t,e=(()=>{}),r)=>x(t,(n,a,o)=>({...n,[o]:e.call(r,a,o,t)}),{}),k=t=>x(t,(t,e)=>t.concat([e]),[]),C=t=>s(t)&&(t instanceof Element||t instanceof Window||t instanceof Document),A=t=>t.currentStyle||window.getComputedStyle(t),S=(...t)=>t.reduce((t,e)=>{if(C(e))return t.includes(e)?t:t.concat(e);if(y(e))return e.reduce((t,e)=>t.concat(S(e)),t);if(b(e))return t.concat(S(v(e)));throw new Error("Invalid element: "+m(e))},[]),M=t=>{if(!g(t))throw new Error("Invalid name: "+m(t));const[e,r]=t.split(".");if(!s(e))throw new Error("Illegal name: "+m(t));return[e,r]},R=t=>{if(g(t))t=t.split(" ");else if(!y(t))throw new Error("Invalid names: "+m(t));return t.map(t=>M(t))},O=t=>{if(f(t))return[t];if(!y(t))throw new Error("Invalid funcs: "+m(t));return t.map(t=>{if(!f(t))throw new Error("Invaqlid func: "+m(t));return t})};function _(t){if(!this instanceof _)return new _(...arguments);Object.defineProperties(this,{ref:{value:t},dom:{value:C(t)?t:document.createElement("eh")},events:{value:{}}})}["on","off","trigger"].forEach(t=>{_[t]=(e,...r)=>{if(e instanceof _)e[t](...r);else if(!C(e))throw new Error("Invalid element: "+m(e));return e._eventHandler=(e._eventHandler||new _(e))[t](...r),_}}),_.prototype.on=function(t,e){return e=O(e),s(this.ref)&&(e=e.map(t=>t.bind(this.ref))),R(t).forEach(([t,r])=>{e.forEach(e=>this.dom.addEventListener(t,e)),this.events[t]=(this.events[t]||[]).concat(e.map(t=>({minor:r,func:t})))}),this},_.prototype.off=function(t){return R(t).forEach(([t,e])=>{const r=this.events[t]||[],n=[];if(s(e))for(let a=r.length-1;0<=a;a--){let t=r[a];e===t.minor&&(n.push(t),r.splice(a,1))}else r.splice(0,r.length).forEach(t=>{n.push(t)});n.forEach(({func:e})=>{this.dom.removeEventListener(t,e)}),0===r.length&&delete this.events[t]}),this},_.prototype.trigger=function(t,e,r){if(s(r)&&!f(r))throw new Error("Invalid onPrevent function: "+m(r));return R(t).forEach(([t,n])=>{let a=!1;if(s(n)){let r=!1;const o=()=>a=!0,i=()=>r=!0,l=(this.events[t]||[]).filter(({minor:t})=>t===n);for(let t=0;!r&&t<l.length;t++)!1===l[t].func({detail:e,preventDefault:o,stopImmediatePropagation:i})&&(a=!0)}else{const r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,e),!1===this.dom.dispatchEvent(r)&&(a=!0)}a&&r&&r(t)}),this};var D=_;const K={tt:"topToTop",rr:"rightToRight",bb:"bottomToBottom",ll:"leftToLeft",tb:"topToBottom",bt:"bottomToTop",rl:"rightToLeft",lr:"leftToRight",xx:"xCenter",yy:"yCenter"};var P=Object.create(null,E(K,(t,e)=>({get:()=>K[e],set:t=>{if(k(K).includes(t))throw new Error("Already assign property name: "+t);K[e]=t},enumerable:!0})));const q=(t,e=1e-10)=>{if(!s(t))return!1;const{x:r,y:n,top:a=n,right:o,bottom:i,left:l=r,width:c,height:u}=t,d=t=>!(s(t)&&!h(t));if(!d(a)||!d(o)||!d(i)||!d(l)||!d(c)||!d(u)||!d(r)||!d(n))return!1;if(s(c)){if(c<0)return!1;if(s(l)){if(s(o)&&e<Math.abs(c-(o-l)))return!1}else if(!s(o))return!1}else if(!s(l)||!s(o)||o<l)return!1;if(s(u)){if(u<0)return!1;if(s(a)){if(s(i)&&e<Math.abs(u-(i-a)))return!1}else if(!s(i))return!1}else if(!s(a)||!s(i)||i<a)return!1;return!0},H=t=>{if(q(t)){const{x:e,y:r,right:n,bottom:a,width:o,height:i,top:l=(s(r)?r:a-i),left:c=(s(e)?e:n-o)}=t;return{top:l,left:c,x:s(e)?e:c,y:s(r)?r:l,right:s(n)?n:c+o,bottom:s(a)?a:l+i,width:s(o)?o:n-c,height:s(i)?i:a-l}}if(C(t)){const{rect:e,border:r}=t instanceof Element?{rect:t.getBoundingClientRect(),border:(({borderTopWidth:t,borderRightWidth:e,borderBottomWidth:r,borderLeftWidth:n})=>({t:t,r:e,b:r,l:n}))(A(t))}:{rect:{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},border:{t:0,r:0,b:0,l:0}},n=e.top+parseFloat(r.t),a=e.right-parseFloat(r.r),o=e.bottom-parseFloat(r.b),i=e.left+parseFloat(r.l);return{top:n,right:a,bottom:o,left:i,width:a-i,height:o-n,x:i,y:n}}throw new Error("Invalid element to rectangle: "+m(t))},L=(t,e,{alignments:r=k(P),absDistance:n=!0}={})=>{const a=H(t),o=H(e),i={rect:a},l={rect:o},s=n?Math.abs:t=>t,c=E(x(P,(t,e)=>r.includes(e)?{...t,[e]:NaN}:t,{}),(t,e)=>{switch(e){case P.tt:return s(a.top-o.top);case P.bb:return s(o.bottom-a.bottom);case P.rr:return s(o.right-a.right);case P.ll:return s(a.left-o.left);case P.tb:return s(a.top-o.bottom);case P.bt:return s(o.top-a.bottom);case P.rl:return s(o.left-a.right);case P.lr:return s(a.left-o.right);case P.xx:return s((a.right-o.right+(a.left-o.left))/2);case P.yy:return s((a.top-o.top+(a.bottom-o.bottom))/2)}}),u=w(c).sort((t,e)=>c[t]-c[e]);return C(t)&&(i.element=t),C(e)&&(l.element=e),{source:i,target:l,results:c,ranking:u,min:u[0],max:u[c.length-1]}};function T(t){if(!this instanceof T)return new T(...arguments);objForEach(H(t),(t,e)=>this[e]=t)}T.stdRect=H,T.diffRect=L,T.prototype.diff=function(t,...e){return L(this,t,...e)};const U=[P.tb,P.rl,P.bt,P.lr],$=[P.tt,P.rr,P.bb,P.ll],j=[P.xx,P.yy],B={append:"magnet",attract:"attract",unattract:"unattract",attracted:"attracted",unattracted:"unattracted",attractStart:"attractstart",attractMove:"attractmove",attractEnd:"attractend",magnetStart:["magnetenter","magnetstart","enter","start"],magnetChange:["magnetchange","change"],magnetEnd:["magnetend","magnetleave","end","leave"],mouseDown:["mousedown","touchstart"],mouseMove:["mousemove","touchmove"],mouseUp:["mouseup","touchend"],keyDown:"keydown",keyUp:"keyup"},N=t=>t+"px",F=t=>100*t+"%",z=({clientX:t,clientY:e,touches:[{clientX:r=t,clientY:n=e}={}]=[]})=>({x:r,y:n}),X=(t,...e)=>{const{[Y.id]:r}=t;return e.reduce((e,n)=>y(n)?e.concat(X(t,...n)):e.concat(n.split(" ").map(t=>`${t}.${r}`)),[])},V=t=>{for(let e=t.parentElement;e;e=e.parentElement)if("static"!==A(e).position)return e;return document},Y={id:"_id",temp:"_temp",targets:"_targets",eventHandler:"_eventHandler",manualHandler:"_manualHandler",distance:"_distance",attractable:"_attractable",allowCtrlKey:"_allowCtrlKey",allowDrag:"_allowDrag",useRelativeUnit:"_useRelativeUnit",stayInParent:"_stayInParent",alignOuter:"_alignOuter",alignInner:"_alignInner",alignCenter:"_alignCenter",alignParentCenter:"_alignParentCenter"},G={distance:0,attractable:!0,allowCtrlKey:!0,allowDrag:!0,useRelativeUnit:!1,stayInParent:!1,alignOuter:!0,alignInner:!0,alignCenter:!0,alignParentCenter:!1};function W(...t){if(!this instanceof W)return new W(...arguments);Object.defineProperties(this,{[Y.id]:{value:"magnet_"+Date.now()},[Y.temp]:{value:[],writable:!0},[Y.targets]:{value:[],writable:!0},[Y.eventHandler]:{value:new D(this)},[Y.manualHandler]:{value:{},writable:!0},[Y.distance]:{value:G.distance,writable:!0},[Y.attractable]:{value:G.attractable,writable:!0},[Y.allowCtrlKey]:{value:G.allowCtrlKey,writable:!0},[Y.allowDrag]:{value:G.allowDrag,writable:!0},[Y.useRelativeUnit]:{value:G.useRelativeUnit,writable:!0},[Y.stayInParent]:{value:G.stayInParent,writable:!0},[Y.alignOuter]:{value:G.alignOuter,writable:!0},[Y.alignInner]:{value:G.alignInner,writable:!0},[Y.alignCenter]:{value:G.alignCenter,writable:!0},[Y.alignParentCenter]:{value:G.alignParentCenter,writable:!0}}),I(G,(t,e)=>s(this[e])&&this[e](t)),t.length&&this.add(t)}W.prototype.getDistance=function(){return this[Y.distance]},W.prototype.setDistance=function(t){if(isNaN(t))throw new Error("Invalid distance: "+m(t));if(t<0)throw new Error("Illegal distance: "+t);return this[Y.distance]=d(t),this},W.prototype.distance=function(t){return s(t)?this.setDistance(t):this.getDistance()},W.prototype.getAttractable=function(){return this[Y.attractable]},W.prototype.setAttractable=function(t){return this[Y.attractable]=u(t),this},W.prototype.attractable=function(t){return s(t)?this.setAttractable(t):this.getAttractable()},W.prototype.getAllowCtrlKey=function(){return this[Y.allowCtrlKey]},W.prototype.setAllowCtrlKey=function(t){return this[Y.allowCtrlKey]=u(t),this},W.prototype.allowCtrlKey=function(t){return s(t)?this.setAllowCtrlKey(t):this.getAllowCtrlKey()},W.prototype.getAllowDrag=function(){return this[Y.allowDrag]},W.prototype.setAllowDrag=function(t){return this[Y.allowDrag]=u(t),this},W.prototype.allowDrag=function(t){return s(t)?this.setAllowDrag(t):this.getAllowDrag()},W.prototype.getUseRelativeUnit=function(){return this[Y.useRelativeUnit]},W.prototype.setUseRelativeUnit=function(t){return t=u(t),this[Y.useRelativeUnit]!==t&&(S(this[Y.targets]).forEach(t=>this.setMemberRectangle(t)),this[Y.useRelativeUnit]=t),this},W.prototype.useRelativeUnit=function(t){return s(t)?this.setUseRelativeUnit(t):this.getUseRelativeUnit()},W.prototype.getStayInParent=function(){return this[Y.stayInParent]},W.prototype.setStayInParent=function(t){return this[Y.stayInParent]=u(t),this},W.prototype.stayInParent=W.prototype.stayInParentEdge=W.prototype.stayInParentElem=function(t){return s(t)?this.setStayInParent(t):this.getStayInParent()},["Outer","Inner","Center","ParentCenter"].forEach(t=>{const e="align"+t,r="Align"+t;W.prototype["get"+r]=function(){return this[Y[e]]},W.prototype["set"+r]=function(t){return this[Y[e]]=u(t),this},W.prototype[e]=W.prototype["enabled"+r]=function(t){return s(t)?this["set"+r](t):this["get"+r]()}}),["on","off"].forEach(t=>{W.prototype[t]=function(...e){return this[Y.eventHandler][t](...e),this}}),W.prototype.check=function(t,e=H(t),r=[].concat(this.getAlignOuter()?U:[],this.getAlignInner()?$:[],this.getAlignCenter()?j:[])){if(!C(t))throw new Error("Invalid DOM: "+m(t));y(e)&&(r=e,e=H(t));const n=V(t),a=H(n),o=this[Y.targets].filter(e=>e!==t).map(t=>L(e,t,{alignments:r})),i=o.reduce((t,e)=>(I(e.results,(r,n)=>{t[n]=t[n]||[],t[n].push(e)}),t),{}),l=E(i,(t,e)=>t.concat().sort((t,r)=>t.results[e]-r.results[e]));return{source:{rect:e,element:t},parent:{rect:a,element:n},targets:o,results:i,rankings:l,mins:E(l,t=>t[0]),maxs:E(l,t=>t[t.length-1])}};const J=(t,e)=>!t.includes(e)&&t.push(e),Q=t=>{if(t){const{prop:e,target:{rect:r,element:n}}=t,a=H(V(n)),[o,i]=(({top:t,right:r,bottom:n,left:a},{top:o,left:i})=>{switch(e){case P.tt:case P.bt:return[t,o];case P.bb:case P.tb:return[n,o];case P.rr:case P.lr:return[r,i];case P.ll:case P.rl:return[a,i];case P.xx:return[(r+a)/2,i];case P.yy:return[(t+n)/2,o]}})(r,a);return{type:e,rect:r,element:n,position:o,offset:o-i}}return null},Z=(t,e)=>!!t!==!!e||(t?t.target.element:null)!==(e?e.target.element:null);W.prototype.handle=function(t,e=H(t),r=this.getAttractable()){if(!C(t))throw new Error("Invalid DOM: "+m(t));const n=tt(this,t);if(-1===n)throw new Error("Invalid member: "+m(t));c(e)&&(r=e,e=t),e=H(e);const{_lastAttractedX:a,_lastAttractedY:o}=this[Y.temp][n],{top:i,left:l,width:u,height:h}=e,d=r?this.getDistance():0,{parent:p,targets:g}=this.check(t,e,r?void 0:[]),{rect:y,element:b}=p,v={x:l,y:i},{x:w,y:I}=g.concat(this.getStayInParent()?L(e,b,{alignments:$,absDistance:!1}):[],this.getAlignParentCenter()?L(e,b,{alignments:j}):[]).reduce(({x:t,y:e},r)=>{const{target:n,results:a,ranking:o}=r;return o.reduce(({x:t,y:e},r)=>{let o=a[r];if(o<=d)switch(r){case P.rr:case P.ll:case P.rl:case P.lr:case P.xx:(!t||o<t.value)&&(t={prop:r,value:o,target:n});break;case P.tt:case P.bb:case P.tb:case P.bt:case P.yy:(!e||o<e.value)&&(e={prop:r,value:o,target:n});break}return{x:t,y:e}},{x:t,y:e})},{x:null,y:null}),x=[],E=[];if(w){const{prop:t,target:{rect:e}}=w;switch(t){case P.rr:v.x=e.right-u;break;case P.ll:v.x=e.left;break;case P.rl:v.x=e.left-u;break;case P.lr:v.x=e.right;break;case P.xx:v.x=(e.left+e.right-u)/2;break}}if(I){const{prop:t,target:{rect:e}}=I;switch(t){case P.tt:v.y=e.top;break;case P.bb:v.y=e.bottom-h;break;case P.tb:v.y=e.bottom;break;case P.bt:v.y=e.top-h;break;case P.yy:v.y=(e.top+e.bottom-h)/2;break}}const k=Z(a,w),A=Z(o,I);k&&(w&&J(x,w.target.element),a&&J(E,a.target.element)),A&&(I&&J(x,I.target.element),o&&J(E,o.target.element)),x.forEach(e=>D.trigger(e,B.attracted,t)),E.forEach(e=>D.trigger(e,B.unattracted,t));const S=!(!w&&!I),M=!(!a&&!o),R=this[Y.eventHandler],O={x:Q(w),y:Q(I)},_={x:Q(a),y:Q(o)};if(S){const e=k||A;M?e||!k&&w&&a&&w.prop!==a.prop||!A&&I&&o&&I.prop!==o.prop?(R.trigger(B.magnetChange,{source:t,...O}),D.trigger(t,B.attract,O)):e&&R.trigger(B.magnetChange,{source:t,...O}):(R.trigger(B.magnetChange,{source:t,...O}),R.trigger(B.magnetStart,{source:t,...O}),D.trigger(t,B.attract,O)),e&&D.trigger(t,B.unattract,_)}else M&&(R.trigger(B.magnetChange,{source:t,x:null,y:null}),R.trigger(B.magnetEnd,{source:t,..._}),D.trigger(t,B.unattract,_));const K=this[Y.manualHandler],{beforeAttract:T,afterAttract:U,doAttract:N}=K;let F=((t,e)=>H({top:e,right:t+u,bottom:e+h,left:t,width:u,height:h}))(v.x-y.left,v.y-y.top);if(f(T)){const r=T.bind(this)(t,{origin:H(e),target:H(F)},{current:O,last:_});if(q(r))F=r;else if(c(r)&&!1===r)F=e;else if(s(r))throw new Error("Invalid return value: "+m(r))}return D.trigger(t,B.attractMove,{rects:{origin:H(e),target:H(F)},attracts:{current:O,last:_}},()=>{F=e}),f(N)?N.bind(this)(t,{origin:H(e),target:H(F)},{current:O,last:_}):this.setMemberRectangle(t,F),f(U)&&U.bind(this)(t,{origin:H(e),target:H(F)},{current:O,last:_}),this[Y.temp][n]={_lastAttractedX:w,_lastAttractedY:I},this},W.prototype.setMemberRectangle=function(t,e=H(t),r=this.getUseRelativeUnit()){if(!C(t))throw new Error("Invalid DOM: "+m(t));if(!this.hasMember(t))throw new Error("Invalid member: "+m(t));c(e)&&(r=e,e=H(t)),e=H({right:e.right,bottom:e.bottom,width:e.width,height:e.height});const{top:n,left:a,width:o,height:i}=e;if(r){const{width:e,height:r}=H(V(t));t.style.top=F(n/r),t.style.left=F(a/e),t.style.width=F(o/e),t.style.height=F(i/r)}else t.style.top=N(n),t.style.left=N(a),t.style.width=N(o),t.style.height=N(i);return t.style.position="absolute",t.style.right="auto",t.style.bottom="auto",this},["before","after","do"].forEach(t=>{const e=t+"Attract";Object.defineProperty(W.prototype,e,{get:function(){return this[Y.manualHandler][e]},set:function(t){this[Y.manualHandler][e]=t}})}),W.prototype.add=function(...t){return t=S(...t),[window,document,document.body].forEach(e=>{if(t.includes(e))throw new Error("Illegal element: "+m(src))}),t.forEach(t=>{this[Y.targets].includes(t)||(D.on(t,X(this,B.mouseDown),e=>{if(!this.getAllowDrag())return;e.preventDefault();let r=!e.ctrlKey,n=e;const{left:a,top:o,width:i,height:l}=H(t),{x:s,y:c}=z(e),u=e=>{const n=!!this.getAttractable()&&(!this.getAllowCtrlKey()||r),{x:u,y:h}=z(e),d=u-s,p=h-c,g=a+d,m=o+p,f=H({top:m,right:g+i,bottom:m+l,left:g});this.handle(t,f,n)};D.trigger(t,B.attractStart,H(t)),D.off(document.body,X(this,B.mouseMove,B.mouseUp,B.keyDown,B.keyUp)),D.on(document.body,X(this,B.keyDown,B.keyUp),t=>{const e=!t.ctrlKey;e!==r&&(r=e,u(n))}),D.on(document.body,X(this,B.mouseUp),()=>{const e=[],r=tt(this,t),{_lastAttractedX:n,_lastAttractedY:a}=this[Y.temp][r];if(D.off(document.body,X(this,B.mouseMove,B.mouseUp,B.keyDown,B.keyUp)),n&&J(e,n.target.element),a&&J(e,a.target.element),e.forEach(e=>D.trigger(e,B.unattracted,t)),D.trigger(t,B.attractEnd,H(t)),n||a){const e=this[Y.eventHandler];D.trigger(t,B.unattract),e.trigger(B.magnetChange,{source:t,x:null,y:null}),e.trigger(B.magnetEnd,{source:t})}this[Y.temp][r]={}}),D.on(document.body,X(this,B.mouseMove),t=>{u(t),n=t})}),this[Y.targets].push(t),this[Y.temp].push({}),this.setMemberRectangle(t))}),this};const tt=(t,e)=>t[Y.targets].indexOf(e);W.prototype.hasMember=function(t){return-1!==tt(this,t)};const et=(t,...e)=>S(...e).reduce((e,r)=>{const n=t[Y.targets],a=t[Y.temp],o=n.indexOf(r);return-1!==o&&(n.splice(o,1),a.splice(o,1),D.off(r,X(t,B.mouseDown)),e.push(r)),e},[]);W.prototype.remove=function(...t){return et(this,...t),this},W.prototype.removeFull=function(...t){return et(this,...t).forEach(t=>{t.style.position="",t.style.top="",t.style.right="",t.style.bottom="",t.style.left="",t.style.width="",t.style.height="",t.style.zIndex=""}),this};const rt=t=>{const e=t[Y.targets];return t[Y.temp]=[],e.splice(0,e.length).map(e=>(D.off(e,X(t,B.mouseDown)),e))};W.prototype.clear=function(){return rt(this),this},W.prototype.clearFull=function(){return rt(this).forEach(t=>{t.style.position="",t.style.top="",t.style.right="",t.style.bottom="",t.style.left="",t.style.width="",t.style.height="",t.style.zIndex=""}),this},W.isRect=t=>q(t),W.stdRect=t=>H(t),W.measure=W.diffRect=(t,e,...r)=>L(t,e,...r);var nt=W,at=r("ac27"),ot=r.n(at),it=function(t,e){var r=document.createElement("div"),n=document.createElement("span"),a=document.createElement("span");r.appendChild(n),r.appendChild(a);var o="ivrVideoPageEdit",i="".concat(o,"-maskLineBox"),l="".concat(i,"-hori"),s="".concat(i,"-vert");r.id=i,n.className=l,a.className=s,"string"===typeof e&&(e=document.querySelector(e)),e.appendChild(r),t.on("end",(function(){n.classList.remove("show"),a.classList.remove("show")})).on("change",(function(t){var e=t.detail,r=e.x,o=e.y;r?(a.style.left=r.position+"px",a.classList.add("show")):a.classList.remove("show"),o?(n.style.top=o.position+"px",n.classList.add("show")):n.classList.remove("show")}));var c=document.getElementById(o);c||(c=document.createElement("style"),c.id=o,c.innerHTML="\n    #".concat(i," {\n      z-index: 1;\n      pointer-events: none;\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n    #").concat(i," > * {\n      position: absolute;\n      width: 1px;\n      height: 1px;\n      background-color: #999;\n      opacity: 0;\n    }\n    #").concat(i," > .show {\n      opacity: .5;\n    }\n    #").concat(i," .").concat(s," {\n      transform: translateX(-50%);\n      height: 100%;\n    }\n    #").concat(i," .").concat(l," {\n      transform: translateY(-50%);\n      width: 100%;\n    }\n  "),document.head.appendChild(c))},lt=function(t){var e=new nt;return e.distance(5),e.attractable(!0),e.allowCtrlKey(!0),e.setStayInParent(!0),e.stayInParentElem(!0),e.setAlignParentCenter(!0),e.setAlignOuter(!1),e.setAlignInner(!0),e.setAlignCenter(!0),it(e,t),e},st={TEXT:1,IMG:2},ct=[{type:st.TEXT,title:"文本控件"},{type:st.IMG,title:"图片控件"}],ut=function(t,e,r){var n,a=r.layerX,o=r.layerY,i=(n={},Object(l["a"])(n,st.TEXT,'\n        <span tabindex="0" style="display:inline-block;vertical-align:middle;" class="ctrl ctrlText">'.concat(t.title,"</span>\n    ")),Object(l["a"])(n,st.IMG,'\n      <img tabindex="0" class="ctrl ctrlImg" style="vertical-align:middle;width:48px;height:48px;" src="'.concat(ot.a,'">\n    ')),n)[t.type];if(i){var s=document.createElement("div");s.className="ctrlItem",s.style.position="absolute",s.dataset.type=t.type,s.innerHTML="".concat(i,'<i style="display:none;" class="el-icon-close btnRemove"></i>'),r.target.appendChild(s),e.add(s);var c=r.target.offsetWidth,u=r.target.offsetHeight;return s.style.left=a/c*100+"%",s.style.top=o/u*100+"%",s}},ht=function(t){var e;if(t.classList.contains("ctrlItem")?e=t:t.classList.contains("ctrl")&&(e=t.parentNode),e){var r=e.parentNode,n=r.childNodes;n.forEach((function(t){t.nodeType===t.ELEMENT_NODE&&t.classList.remove("active")})),e.classList.add("active")}return e},dt=function(t){var e,r=+t.dataset.type;t=t.querySelector(".ctrl");var n=window.getComputedStyle(t),a=(e={},Object(l["a"])(e,st.TEXT,{content:t.textContent,fontSize:parseInt(n.fontSize),color:n.color,bold:["bold","bolder"].indexOf(n.fontWeight)>-1||n.fontWeight>400,italic:"italic"===n.fontStyle,lineHeight:parseFloat(n.lineHeight)/parseInt(n.fontSize),padding:n.padding,letterSpacing:parseFloat(n.letterSpacing)||0,backgroundColor:n.backgroundColor,borderRadius:n.borderRadius}),Object(l["a"])(e,st.IMG,{src:t.src,width:parseInt(n.width),height:parseInt(n.height)}),e)[r];return a?Object(i["a"])(Object(i["a"])({},a),{},{type:r,el:t}):{}},pt=function(t){var e=t.el;if(t.type===st.TEXT){var r=t.content&&t.content.trim();r&&(e.textContent=r),e.style.color=t.color,e.style.fontSize=t.fontSize+"px",e.style.fontWeight=t.bold?"bold":"",e.style.fontStyle=t.italic?"italic":"",e.style.lineHeight=t.lineHeight+"em",e.style.padding=t.padding,e.style.letterSpacing=t.letterSpacing+"px",e.style.backgroundColor=t.backgroundColor,e.style.borderRadius=t.borderRadius}else t.type===st.IMG&&(e.src=t.src,e.style.width=t.width+"px",e.style.height=t.height+"px")},gt=function(t){var e=window.getComputedStyle(t.parentElement);t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.fontSize="14px",t.style.fontFamily=e.fontFamily},mt=r("a02a"),ft={props:["row","params"],data:function(){var t=this,e="ivr-page-edit";return{form:this.row?Object(i["a"])(Object(i["a"])({},this.row),this.params):Object(i["a"])({},this.params),prefix:e,controls:ct,curControl:null,curItem:{},rules:{pageName:Object(mt["y"])("请输入页面名称"),entid:Object(mt["z"])("请选择所属企业")},modalProps:{width:"1000px",isEdit:!!this.row,customClass:e,hideFooter:!0,onSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.Form.validate();case 2:return r=t.$refs.editor.querySelectorAll(".ctrlItem"),r.forEach((function(t){var e=t.style.inset;e&&(e=e.split(" ").map((function(t){return t.trim()})),t.style.inset="",t.style.top=e[0],t.style.left=e[3]),t.style.width=t.style.height=""})),e.next=6,t.$post("/ccas/call/ivr/video/page/save",Object(i["a"])(Object(i["a"])({},t.form),{},{pageContent:t.$refs.editor.innerHTML}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()}}},mounted:function(){var t=this;this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n,a,o,i,l,s,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.$refs,n=r.editor,a=r.body,o='<div class="ctrlBox"></div>',n.innerHTML=o,gt(n.querySelector(".ctrlBox")),i=t.$refs.BackgroundImg,i.removeAttribute("src"),t.magnet=lt(a),!t.row){e.next=18;break}return e.next=10,t.$http("/ccas/call/ivr/video/page/details/".concat(t.row.pageId));case 10:l=e.sent,s=l.data,n.innerHTML=s.pageContent,c=n.querySelector(".ctrlBox"),c||(n.innerHTML=o,c=n.querySelector(".ctrlBox"),c.innerHTML=s.pageContent,gt(c)),u=c.dataset.bg,u&&(i.src=u),Array.from(n.querySelectorAll(".ctrlItem")).forEach((function(e){e.classList.remove("active");var r=window.getComputedStyle(e),n=r.left,a=r.top;t.magnet.add(e),e.style.left=n,e.style.top=a}));case 18:case"end":return e.stop()}}),e)}))))},methods:{submit:function(){this.$refs.Modal.submit()},onInsertVar:function(){this.$openModal((function(){return r.e("chunk-2d231081").then(r.bind(null,"ef8b"))}),{params:{entid:this.form.entid}},{select:this.onSelectVar})},onSelectVar:function(t){var e=this.$refs.ContentInput.$el.querySelector("textarea");this.curItem=Object(i["a"])(Object(i["a"])({},this.curItem),{},{content:Object(mt["u"])(e,"{".concat(t,"}"))}),this.updateItem(this.curItem)},onAddMaterial:function(){this.$openModal((function(){return r.e("chunk-207d5157").then(r.bind(null,"d190"))}),{},{select:this.onSelectMaterial})},onSelectMaterial:function(t){var e=document.createElement("a");e.href=t,t=e.href,this.curItem=Object(i["a"])(Object(i["a"])({},this.curItem),{},{src:t}),this.updateItem(this.curItem)},onSetPageBackground:function(){this.$openModal((function(){return r.e("chunk-207d5157").then(r.bind(null,"d190"))}),{},{select:this.onSelectPageMaterial})},onSelectPageMaterial:function(t){var e=document.createElement("a");e.href=t,t=e.href,this.$refs.BackgroundImg.src=t;var r=this.$el.querySelector(".ctrlBox"),n=r.style;n.backgroundSize="100% 100%",n.backgroundImage="url(".concat(t,")"),r.dataset.bg=t},updateItem:function(){pt(this.curItem)},onControlClick:function(t){this.curControl=t},onEditorClick:function(t){var e=t.target,r=this.$el.querySelector(".ctrlBox");if(e===r){if(this.curControl){var n=ut(this.curControl,this.magnet,t);ht(n),n&&(this.curItem=dt(n))}}else if(e.classList.contains("btnRemove")){var a=e.parentNode;a.classList.contains("active")&&(this.curItem={}),this.magnet.remove(a),a.remove()}else{var o=ht(e);o&&(this.curItem=dt(o))}},onView:function(){var t="<style>body{margin:0;}</style>"+this.$refs.editor.innerHTML;window.open("javascript:document.body.innerHTML='".concat(t,"';"),"__blank")}}},yt=ft,bt=(r("1c93"),r("2877")),vt=Object(bt["a"])(yt,n,a,!1,null,null,null);e["default"]=vt.exports},"498a":function(t,e,r){"use strict";var n=r("23e7"),a=r("58a8").trim,o=r("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return a(this)}})},"75e9":function(t,e,r){},"857a":function(t,e,r){var n=r("e330"),a=r("1d80"),o=r("577e"),i=/"/g,l=n("".replace);t.exports=function(t,e,r,n){var s=o(a(t)),c="<"+e;return""!==r&&(c+=" "+r+'="'+l(o(n),i,"&quot;")+'"'),c+">"+s+"</"+e+">"}},ac27:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAbFBMVEUAAACKioqKioqLi4uKioqKioqHh4eMjIyLi4uKioqKioqJiYmKioqLi4uKioqLi4uKioqIiIiKioqKioqKioqKioqKioqKioqKioqLi4uLi4uJiYmKioqKioqSkpKKioqLi4uLi4uSkpKKiooC3Gn2AAAAI3RSTlMAv4DGrqI9KPTvzHNMG+q3mR/55d7TintiNK1oVRMOsI+IB/0XDL8AAAEHSURBVEjHvdbbboMwEEXRE2wwYIc7BJqmt/n/f6zaOjGZh9qjqtlvI1jSCFnCeEDHp4YSG1sDHEnUBYsMdDiQrD+CNs86PaSDAl8VUyow8FVpoMM1lwYMbk0pYERIE6/OMg5qhN6IdfoAVr7SSwCKQuHzHRh4DuexpFB4wkFzAx3bBxz4lF8qp7tyMBBqbIHtXNNdChz83gQZKCEERggcZMAiAtTS7scFEZADOO3HCKguAOBmP7aIgRXf9bk/vTGgcc0ORGMfA9XuDVcPBWLgjF29QwxosCKgMkJgIQMaMlBtQmAhAxpCsAnBDCEojXSlOUvqB7ySqBLvMqCkP/ZCdHUo1Yr/7xOiNKhPumzq3QAAAABJRU5ErkJggg=="},af03:function(t,e,r){var n=r("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},c5d0:function(t,e,r){"use strict";var n=r("23e7"),a=r("857a"),o=r("af03");n({target:"String",proto:!0,forced:o("italics")},{italics:function(){return a(this,"i","","")}})},c8d2:function(t,e,r){var n=r("5e77").PROPER,a=r("d039"),o=r("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!o[t]()||i[t]()!==i||n&&o[t].name!==t}))}},cc71:function(t,e,r){"use strict";var n=r("23e7"),a=r("857a"),o=r("af03");n({target:"String",proto:!0,forced:o("bold")},{bold:function(){return a(this,"b","","")}})}}]);