(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ebd262e"],{"224f":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[r("el-form",{ref:"Form",attrs:{"label-width":"8em",model:e.form,rules:e.rules}},[r("ui-text-field",{attrs:{label:"流程名称",prop:"flowname"},model:{value:e.form.flowname,callback:function(t){e.$set(e.form,"flowname",t)},expression:"form.flowname"}}),r("ui-text-field",{attrs:{label:"流程引导码",prop:"hotlineno"},model:{value:e.form.hotlineno,callback:function(t){e.$set(e.form,"hotlineno",t)},expression:"form.hotlineno"}},[r("el-select",{attrs:{slot:"append"},on:{change:e.onHotlineChange},slot:"append",model:{value:e.form.selectedHotlineno,callback:function(t){e.$set(e.form,"selectedHotlineno",t)},expression:"form.selectedHotlineno"}},e._l(e.hotlines,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("ui-select",{attrs:{label:"流程状态",prop:"state"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},e._l(["发布","编辑"],(function(e){return r("el-option",{key:e,attrs:{value:e,label:e}})})),1),r("ui-select",{attrs:{label:"流程属性",prop:"atype"},model:{value:e.form.atype,callback:function(t){e.$set(e.form,"atype",t)},expression:"form.atype"}},e._l(["门户流程","挂机流程","鉴权流程","自定义流程","子流程"],(function(e){return r("el-option",{key:e,attrs:{value:e,label:e}})})),1),"子流程"!==e.form.atype?[r("div",{staticClass:"flexbox"},[r("el-form-item",{attrs:{label:"每周执行时段",prop:"weekstart"}},[r("el-input-number",{attrs:{placeholder:"开始星期","controls-position":"right",min:1,max:7},model:{value:e.form.weekstart,callback:function(t){e.$set(e.form,"weekstart",t)},expression:"form.weekstart"}})],1),r("span",{staticStyle:{"margin-bottom":"24px"}},[e._v("-")]),r("el-form-item",{attrs:{"label-width":"0",prop:"weekend"}},[r("el-input-number",{attrs:{placeholder:"结束星期","controls-position":"right",min:1,max:7},model:{value:e.form.weekend,callback:function(t){e.$set(e.form,"weekend",t)},expression:"form.weekend"}})],1)],1),r("el-form-item",{attrs:{label:"每天执行时段",prop:"weekstarttime"}},[r("el-time-picker",{attrs:{"is-range":""},model:{value:e.form.weekstarttime,callback:function(t){e.$set(e.form,"weekstarttime",t)},expression:"form.weekstarttime"}})],1),r("el-form-item",{attrs:{label:"流程执行时限",prop:"startdate"}},[r("el-date-picker",{attrs:{type:"daterange"},model:{value:e.form.startdate,callback:function(t){e.$set(e.form,"startdate",t)},expression:"form.startdate"}})],1),r("el-form-item",{attrs:{label:"中继字冠",prop:"trunkNo"}},[r("el-input",{staticStyle:{width:"92%","margin-right":"5px"},attrs:{placeholder:"中继字冠为数字类型,多个以逗号隔开"},model:{value:e.form.trunkNo,callback:function(t){e.$set(e.form,"trunkNo",t)},expression:"form.trunkNo"}}),r("el-tooltip",{attrs:{placement:"top",content:"相同引导码的ivr流程的中继字冠共享；ivr流程配置独有的中继字冠,需设置不同的引导码"}},[r("i",{staticClass:"el-icon-question"})])],1),r("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[r("div",{staticClass:"flexbox"},[r("el-input-number",{attrs:{placeholder:"数字1~9","controls-position":"right",min:1,max:9},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}}),r("el-tooltip",{attrs:{placement:"top",content:"请按具体需求酌情分配优先级"}},[r("i",{staticClass:"el-icon-question"})])],1)])]:e._e()],2)],1)},a=[],n=r("2909"),s=r("3835"),i=r("15fd"),l=r("1da1"),m=r("5530"),c=(r("96cf"),r("d3b7"),r("ac1f"),r("1276"),r("00b4"),r("6062"),r("3ca3"),r("ddb0"),r("d81d"),r("a02a")),u=["modifytime"],d={name:"TestEdit",props:["row","entId"],data:function(){var e=this,t=this.row;return{rules:{flowname:Object(c["y"])("请输入流程名称"),hotlineno:{required:!0,pattern:/^\d{4,}$/,message:"请输入4位以上数字类型流程引导码"},state:{required:!0,message:"请选择流程状态"},atype:{required:!0,message:"请选择流程属性"},weekstart:{required:!0,message:"请输入开始星期"},weekend:{required:!0,message:"请输入结束星期"},weekstarttime:{required:!0,type:"array",message:"请选择每天执行时段"},startdate:{required:!0,type:"array",message:"请选择流程执行时限"},trunkNo:{trigger:"blur",required:!0,validator:function(e,t,r){t?t.split(",").every((function(e){return/^\d+$/.test(e)}))?r():r(new Error("请输入数字类型的中继字冠")):r(new Error("请输入中继字冠"))}},priority:{required:!0,message:"请输入优先级"}},form:t?Object(m["a"])(Object(m["a"])({},t),{},{trunkNo:t.trunkno,startdate:[t.startdate,t.enddate],weekstarttime:["2000-10-10 ".concat(t.weekstarttime),"2000-10-10 ".concat(t.weekendtime)]}):{startdate:[],entid:this.entId},modalProps:{drawer:!0,isEdit:!!t,onSubmit:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var r,o,a,n,l,c,d,p,f,b,k;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:return r=e.form,r.modifytime,o=Object(i["a"])(r,u),a=e.$adminCore.formatDate,n=o.startdate||[],l=Object(s["a"])(n,2),c=l[0],d=l[1],p=o.weekstarttime||[],f=Object(s["a"])(p,2),b=f[0],k=f[1],t.next=8,e.$post("/pm/cti/rootflow/save",Object(m["a"])(Object(m["a"])({},o),{},{startdate:c&&a(c,"yyyy-MM-dd"),enddate:d&&a(d,"yyyy-MM-dd"),weekstarttime:b&&a(b,"HH:mm:ss"),weekendtime:k&&a(k,"HH:mm:ss")}));case 8:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()},hotlines:[]}},mounted:function(){this.getHotline()},methods:{getHotline:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/pm/cti/rootflow/searchthotline",{entId:e.entId});case 2:r=t.sent,o=r.data,e.hotlines=Object(n["a"])(new Set(o.map((function(e){return e.hotline}))));case 5:case"end":return t.stop()}}),t)})))()},onHotlineChange:function(e){this.$set(this.form,"hotlineno",e)}}},p=d,f=(r("853a"),r("2877")),b=Object(f["a"])(p,o,a,!1,null,"ecd2d116",null);t["default"]=b.exports},5332:function(e,t,r){},"853a":function(e,t,r){"use strict";r("5332")}}]);