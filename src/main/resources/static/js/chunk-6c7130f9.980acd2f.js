(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c7130f9"],{7711:function(e,t,n){"use strict";n("78d3")},"78d3":function(e,t,n){},cd98:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.prefix},[n("ui-calendar",{attrs:{readonly:""},on:{"date-change":e.onDateChange},model:{value:e.dayData,callback:function(t){e.dayData=t},expression:"dayData"}}),n("ui-data-view",{ref:"UiDataView",class:e.prefix+"_dataView",on:{"update-calendar":e.getRestdays}})],1)},r=[],i=n("1da1"),s=(n("96cf"),n("d81d"),n("f949")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"actions",fn:function(){return[n("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.onEdit()}}},[e._v("新增")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onUpdateState()}}},[e._v(" "+e._s(e.calendarsConfig.isCurrentYearUpdate?"关闭":"开启")+" ")])]},proxy:!0}])},"ui-table-view",Object.assign({},e.viewProps,{hidePager:!0}),!1),e.viewListeners))},c=[],u=n("5530"),d=(n("d3b7"),n("3ca3"),n("ddb0"),n("a15b"),{mixins:[window.mixTableView],data:function(){return{calendarsConfig:{},columns:[{label:"节日名称",prop:"festivalName",minWidth:85},{label:"开始时间",prop:"startTime",minWidth:85},{label:"结束时间",prop:"endTime",minWidth:85},{label:"操作",width:120,fixed:"right",render:this.$hBtns([{label:"查看",action:this.onView},{label:"修改",action:this.onEdit},{label:"删除",action:this.onDelete}])}]}},methods:{getInitData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getData(),t.next=3,e.$http("/outbound/calendars/calendarsConfig");case 3:e.calendarsConfig=t.sent.data;case 4:case"end":return t.stop()}}),t)})))()},fetchMethod:function(e){return this.$http("/outbound/calendars/festival/list",{params:e})},onDelete:function(e){var t=this;this.delData({action:function(){return t.$http.delete("/outbound/calendars/festival/remove/".concat(e.festivalCode)).then((function(){t.$emit("update-calendar")}))}})},onEdit:function(e){var t=this;this.$openModal((function(){return n.e("chunk-2d0cfa39").then(n.bind(null,"6526"))}),{row:e},{success:function(){t.getData(),t.$emit("update-calendar")}})},onUpdateState:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("确定要更改日历配置？","更新配置");case 2:return n=+!e.calendarsConfig.isCurrentYearUpdate,t.next=5,e.$http.put("/outbound/calendars/calendarsConfig",Object(u["a"])(Object(u["a"])({},e.calendarsConfig),{},{id:e.calendarsConfig.id||1,isCurrentYearUpdate:n}));case 5:e.$message.success("日历配置已更改成功"),e.calendarsConfig.isCurrentYearUpdate=n;case 7:case"end":return t.stop()}}),t)})))()},onView:function(e){var t=(e.festivalWorks||[]).map((function(e){return"<b>".concat(e.workTime,"</b>")}));this.$alert(t.length?'因假日调为上班的时间为：<p style="padding-left:2em;">'.concat(t.join("<br>"),"</p>"):"没有因假期需要调整为上班的时间！","查看",{dangerouslyUseHTMLString:!0})}}}),l=d,f=n("2877"),p=Object(f["a"])(l,o,c,!1,null,null,null),h=p.exports,m={mixins:[window.mixTableView],components:{UiDataView:h},data:function(){return{date:new Date,prefix:"page-global-calendar",dayData:{restdays:[],workdays:[]}}},mounted:function(){this.getRestdays(),this.$refs.UiDataView.getInitData()},methods:{getRestdays:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.date,a=n.getFullYear(),r=n.getMonth()+1,t.next=5,e.$http("/outbound/calendars/",{params:{monthNum:r,yearNum:a}});case 5:e.dayData.restdays=t.sent.data.map(s["i"]);case 6:case"end":return t.stop()}}),t)})))()},onDateChange:function(e){this.date=e,this.getRestdays()}}},g=m,b=(n("7711"),Object(f["a"])(g,a,r,!1,null,null,null));t["default"]=b.exports}}]);