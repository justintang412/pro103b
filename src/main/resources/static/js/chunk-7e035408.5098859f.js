(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e035408"],{"152f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"qualityTask"},[a("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-radio-group",{on:{change:e.handleUploadTime},model:{value:e.searchForm.uploadTime,callback:function(t){e.$set(e.searchForm,"uploadTime",t)},expression:"searchForm.uploadTime"}},[a("el-radio-button",{attrs:{label:"最近24小时"}}),a("el-radio-button",{attrs:{label:"最近3天"}}),a("el-radio-button",{attrs:{label:"最近7天"}}),a("el-radio-button",{attrs:{label:"最近30天"}}),a("el-radio-button",{attrs:{label:"自定义时间"}})],1),e.isTimeRangeShow?a("el-date-picker",{staticClass:"uploadDatePicker",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleDateRange},model:{value:e.searchForm.uploadTimeRange,callback:function(t){e.$set(e.searchForm,"uploadTimeRange",t)},expression:"searchForm.uploadTimeRange"}}):e._e()],1),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.taskName,callback:function(t){e.$set(e.searchForm,"taskName",t)},expression:"searchForm.taskName"}})],1),a("el-form-item",{attrs:{label:"状态"}},[e.$hasPerm("smart-quality_artificialQuality")?a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择状态"},model:{value:e.searchForm.auditStatus,callback:function(t){e.$set(e.searchForm,"auditStatus",t)},expression:"searchForm.auditStatus"}},e._l(e.stateListManager,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1),a("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getDataList(1)}}},[e._v("查询")]),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1)],1),a("div",{staticClass:"actionBar"},[a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.onCreate()}}},[e._v("创建质检任务")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"任务名称",prop:"taskName","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"描述",prop:"taskDesc","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"insertTime","show-overflow-tooltip":"","min-width":"130"}}),a("el-table-column",{attrs:{label:"创建人",prop:"taskCreator","show-overflow-tooltip":"","min-width":"130"}}),a("el-table-column",{attrs:{label:"时间范围","show-overflow-tooltip":"","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.callEndTime)+" - "+e._s(a.callStartTime)+" ")]}}])}),a("el-table-column",{attrs:{label:"质检进度","show-overflow-tooltip":"","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[null===r.finishQtTask||null===r.totalQtTask?a("span",[e._v("0%")]):a("span",[e._v(e._s(100*(r.finishQtTask/r.totalQtTask).toFixed(2))+"%")])]}}])}),a("el-table-column",{attrs:{label:"审核进度","show-overflow-tooltip":"","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[null===r.finishReqtTask||null===r.totalQtTask?a("span",[e._v("0%")]):a("span",[e._v(e._s(100*(r.finishReqtTask/r.totalQtTask).toFixed(2))+"%")])]}}])}),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":"","min-width":"100"},scopedSlots:e._u([e.$hasPerm("smart-quality_artificialQuality")?{key:"default",fn:function(t){var r=t.row;return[0===r.auditStatus||null===r.auditStatus?a("span",[e._v("未开始")]):e._e(),-1===r.auditStatus?a("span",[e._v("已暂停")]):e._e(),1===r.auditStatus?a("span",[e._v("开始")]):e._e(),3===r.auditStatus?a("span",[e._v("进行中")]):e._e(),5===r.auditStatus?a("span",[e._v("待审核")]):e._e(),6===r.auditStatus?a("span",[e._v("完成")]):e._e()]}}:null],null,!0)}),e.$hasPerm("smart-quality_artificialQuality")?a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",{staticClass:"ui-text-btns"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleView(r)}}},[e._v("查看通话")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),1===r.auditStatus||3===r.auditStatus?a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"text"},on:{click:function(t){return e.handleExcute(r)}}},[e._v("暂停")]):e._e(),0===r.auditStatus||null===r.auditStatus||-1===r.auditStatus||5===r.auditStatus?a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"text"},on:{click:function(t){return e.handleStop(r)}}},[e._v("开始")]):e._e(),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])],1)]}}],null,!1,564273169)}):e._e()],1),a("com-pagination",{ref:"ComPagination",attrs:{paginationInfo:e.paginationInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}}),a("artificial-create-task",{ref:"CreateTask",on:{createSuccess:e.handleCreateSuccess,editSuccess:e.handleEditSuccess}})],1)},n=[],i=a("5530"),o=a("1da1"),s=(a("96cf"),a("d81d"),a("d3b7"),a("ca7c")),l=a("2bcb"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-drawer",e._b({attrs:{title:e.isEdit?"编辑人工质检任务":"创建人工质检任务",size:"730px"},on:{close:e.handleClose,open:e.isOpen},scopedSlots:e._u([{key:"footer",fn:function(){return[e.isEdit?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEdit(e.rowId,e.taskName)}}},[e._v("编辑")]):a("el-button",{attrs:{type:"primary"},on:{click:e.submitCreate}},[e._v("创建")]),a("el-button",{on:{click:function(t){return e.onShow(!1)}}},[e._v("取消")])]},proxy:!0}])},"ui-drawer",Object.assign({},e.modalProps),!1),[a("el-form",{ref:"ruleForm",staticStyle:{"font-size":"12px"},attrs:{"label-width":"8em",rules:e.rules,model:e.createForm}},[a("div",{staticClass:"flexbox col-2"},[a("el-form-item",{attrs:{label:"任务名称",prop:"taskName"}},[a("el-input",{attrs:{placeholder:"最多输入100个字符"},model:{value:e.createForm.taskName,callback:function(t){e.$set(e.createForm,"taskName",t)},expression:"createForm.taskName"}})],1)],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.createForm.taskDesc,callback:function(t){e.$set(e.createForm,"taskDesc",t)},expression:"createForm.taskDesc"}})],1),a("el-form-item",{attrs:{label:"规则组",size:"mini",prop:"ruleGroupId"}},[a("el-select",{attrs:{placeholder:"请选择规则"},model:{value:e.createForm.ruleGroupId,callback:function(t){e.$set(e.createForm,"ruleGroupId",t)},expression:"createForm.ruleGroupId"}},e._l(e.ruleGroupList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","font-size":"12px"}},[a("h5",[e._v("范围设置"),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text"},on:{click:e.resetRange}},[e._v("重置")])],1),a("div",[e._v("当前范围内有"),a("span",{staticStyle:{margin:"0 10px",color:"#33d7c1"}},[e._v(e._s(e.callNum))]),e._v("个通话")])]),a("el-form-item",{attrs:{label:"通话开始时间",required:"",size:"mini"}},[a("el-date-picker",{staticClass:"uploadDatePicker",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleCallTime},model:{value:e.createForm.callTimeRange,callback:function(t){e.$set(e.createForm,"callTimeRange",t)},expression:"createForm.callTimeRange"}})],1),a("el-form-item",{attrs:{label:"机器是否评分",required:"",size:"mini"}},[a("el-radio-group",{on:{change:e.handleCallTime},model:{value:e.createForm.isScore,callback:function(t){e.$set(e.createForm,"isScore",t)},expression:"createForm.isScore"}},[a("el-radio",{attrs:{label:"",value:""}},[e._v("全部")]),a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:0,value:0}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"机器分数",required:"",size:"mini"}},[a("el-radio-group",{on:{change:e.handleCallTime},model:{value:e.createForm.scoreType,callback:function(t){e.$set(e.createForm,"scoreType",t)},expression:"createForm.scoreType"}},[a("el-radio",{attrs:{label:"1",value:"1"}},[e._v("不限制")]),a("el-radio",{attrs:{label:"2",value:"2"}},[e._v("自定义范围")])],1),"2"==e.createForm.scoreType?a("div",{staticStyle:{"margin-top":"15px"}},[a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.createForm.downScore,callback:function(t){e.$set(e.createForm,"downScore",t)},expression:"createForm.downScore"}}),e._v(" - "),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.createForm.upperScore,callback:function(t){e.$set(e.createForm,"upperScore",t)},expression:"createForm.upperScore"}})],1):e._e()],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","font-size":"12px"}},[a("h5",[e._v("抽检设置"),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text"},on:{click:e.resetCheckType}},[e._v("重置")])],1),a("div",[e._v("已选择共计"),a("span",{staticStyle:{margin:"0 10px",color:"#33d7c1"}},[e._v(e._s(e.callNum2))]),e._v("个通话")])]),a("el-form-item",{attrs:{label:"在此范围内",size:"mini",prop:"checkType"}},[a("el-select",{staticStyle:{width:"140px","margin-right":"10px",float:"left"},attrs:{placeholder:"请选择"},model:{value:e.createForm.checkType,callback:function(t){e.$set(e.createForm,"checkType",t)},expression:"createForm.checkType"}},e._l(e.checkTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"1"===e.createForm.checkType?a("div",{staticStyle:{display:"flex"}},[e._v(" 抽检"),a("el-input",{staticStyle:{width:"60px",margin:"0 10px"},model:{value:e.createForm.checkValue,callback:function(t){e.$set(e.createForm,"checkValue",t)},expression:"createForm.checkValue"}}),e._v("% ")],1):"2"===e.createForm.checkType?a("div",{staticStyle:{display:"flex"}},[e._v(" 抽检"),a("el-input",{staticStyle:{width:"60px",margin:"0 10px"},model:{value:e.createForm.checkValue,callback:function(t){e.$set(e.createForm,"checkValue",t)},expression:"createForm.checkValue"}}),e._v("个 ")],1):e._e()],1)],1),a("select-call",{ref:"SelectCall",on:{okDialog:e.okDialog}})],1)},u=[],m=a("548f"),h=a("5e23"),p=window.createEditView({data:function(){return{callNum:0,rowId:null,taskName:null,ruleGroupList:[],checkTypeOptions:[{value:1,label:"按百分比抽检"},{value:2,label:"按个数抽检"}],selecOption:[{value:"1",label:"%"},{value:"2",label:"个"}],rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],ruleGroupId:[{required:!0,message:"请选择类型",trigger:"change"}],checkType:[{required:!0,message:"请选择范围",trigger:"change"}]},selNumValue:null,createForm:{callTimeRange:[]},isTimedType:!0,isCustomType:!1,isEdit:!1,value1:"",selPerct:null,selNum:null,isDisabled:!1}},components:{SelectCall:m["a"]},computed:{callNum2:function(){return this.createForm.checkValue?"1"===this.createForm.checkType?Math.ceil(this.callNum*(this.createForm.checkValue/100)):"2"===this.createForm.checkType?this.createForm.checkValue<=this.callNum?this.createForm.checkValue:0:void 0:0}},methods:{handleClose:function(){this.$refs.ruleForm.resetFields(),this.onShow(!1)},resetRange:function(){this.createForm.callTimeRange=[],this.createForm.isScore="",this.createForm.scoreType="",this.createForm.downScore="",this.createForm.upperScore=""},resetCheckType:function(){this.createForm.checkType="",this.createForm.checkValue=""},handleCallTime:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={callStartTime:e.createForm.callTimeRange[0],callEndTime:e.createForm.callTimeRange[1],isScore:e.createForm.isScore,downScore:e.createForm.downScore,upperScore:e.createForm.upperScore},t.next=3,Object(s["c"])(a);case 3:r=t.sent,e.callNum=r.data.count;case 5:case"end":return t.stop()}}),t)})))()},onSelectCall:function(){this.$refs.SelectCall.show()},submitCreate:Object(h["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=Object(i["a"])({callStartTime:this.createForm.callTimeRange?this.$adminCore.formatDate(this.createForm.callTimeRange[0]):null,callEndTime:this.createForm.callTimeRange?this.$adminCore.formatDate(this.createForm.callTimeRange[1]):null},this.createForm),this.$refs.ruleForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,Object(s["a"])(a);case 3:n=e.sent,n.ok?(r.$message.success("创建成功"),r.$emit("createSuccess")):r.$message.error("创建失败"),r.onShow(!1),r.createForm={},e.next=10;break;case 9:r.$message.error("表单验证失败");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),submitEdit:Object(h["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.ruleForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return n=Object(i["a"])({},r.createForm),e.next=4,Object(s["f"])(t,n);case 4:o=e.sent,o.ok?(r.$message.success("编辑成功"),r.onShow(!1),r.$emit("editSuccess")):r.$message.error("编辑失败"),e.next=9;break;case 8:r.$message.error("表单验证失败");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()),getRuleGroup:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:for(a=t.sent,a.ok||e.$alert("请求失败!"),e.ruleGroupList=[],r=0;r<a.data.length;r++)e.ruleGroupList.push({value:a.data[r].id,label:a.data[r].groupName});case 6:case"end":return t.stop()}}),t)})))()},typeChange:function(){1===this.createForm.type?(this.createForm.timeIntervalStr=null,this.createForm.timeIntervalEnd=null,this.createForm.selPercentage=null,this.selPerct=null,this.selNum=null,this.isTimedType=!1,this.isCustomType=!0):0===this.createForm.type&&(this.createForm.cdrIresult=null,this.createForm.telNumber=0,this.isCustomType=!1,this.isTimedType=!0)},isOpen:function(){this.getRuleGroup()},onCreateConsumer:function(){this.$refs.ComConsumer.show()},okDialog:function(e,t){this.createForm.cdrIresult=t,this.createForm.telNumber=e},handleSelPerct:function(){},handleSelNum:function(){}}}),d=p,f=(a("dc53"),a("2877")),g=Object(f["a"])(d,c,u,!1,null,"73e0d486",null),b=g.exports,v=a("7329"),k={name:"QualityArtificial",data:function(){return{searchForm:{},stateListManager:[{label:"未开始",value:0},{label:"已暂停",value:-1},{label:"开始",value:1},{label:"进行中",value:3},{label:"待审核",value:5},{label:"完成",value:6}],stateList:[{label:"进行中",value:3},{label:"待审核",value:5},{label:"完成",value:6}],isTimeRangeShow:!1,isShowSearchMore:!1,tableData:[],paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0,layout:"sizes, prev, pager, next, jumper, total"},loading:!1,ruleGroupList:[]}},components:{ArtificialCreateTask:b,ComPagination:v["a"]},created:function(){this.getDataList(),this.groupListById()},computed:{durationTime:function(e,t){var a=e.getTime()-t.getTime();return this.$adminCore.formatDate(a)},loginUser:function(){return this.$store.state.roles}},methods:{groupListById:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["c"])();case 2:if(a=t.sent,a.ok){t.next=6;break}return e.$alert("请求失败!"),t.abrupt("return",!1);case 6:e.ruleGroupList=a.data.map((function(e){return{value:e.id,label:e.groupName}})),console.log(e.ruleGroupList);case 8:case"end":return t.stop()}}),t)})))()},getDataList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,n={createTimeDown:t.searchForm.uploadTimeRange?t.$adminCore.formatDate(t.searchForm.uploadTimeRange[0]):null,createTimeUpper:t.searchForm.uploadTimeRange?t.$adminCore.formatDate(t.searchForm.uploadTimeRange[1]):null,auditStatus:t.searchForm.auditStatus,taskName:t.searchForm.taskName,offset:e||1+(t.paginationInfo.currentPage-1)*t.paginationInfo.pageSize,size:t.paginationInfo.pageSize},t.loading=!0,a.next=5,Object(s["b"])(n);case 5:i=a.sent,i.ok?(r.tableData=i.data.rows,r.paginationInfo.total=i.data.count):t.$message.error("获取数据失败"),t.loading=!1;case 8:case"end":return a.stop()}}),a)})))()},handleCreateSuccess:function(){this.getDataList()},handleEditSuccess:function(){this.getDataList()},handleUploadTime:function(){var e=new Date,t=new Date;"最近24小时"===this.searchForm.uploadTime?(t.setTime(t.getTime()-864e5),this.searchForm.uploadTimeRange=[t,e]):"最近3天"===this.searchForm.uploadTime?(t.setTime(t.getTime()-2592e5),this.searchForm.uploadTimeRange=[t,e]):"最近7天"===this.searchForm.uploadTime?(t.setTime(t.getTime()-6048e5),this.searchForm.uploadTimeRange=[t,e]):"最近30天"===this.searchForm.uploadTime&&(t.setTime(t.getTime()-2592e6),this.searchForm.uploadTimeRange=[t,e]),"自定义时间"===this.searchForm.uploadTime?this.isTimeRangeShow=!this.isTimeRangeShow:this.isTimeRangeShow=!1},handleDateRange:function(){this.searchForm.uploadTime=this.searchForm.uploadTimeRange},onReset:function(){this.searchForm={},this.isTimeRangeShow=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))},onCreate:function(){this.$refs.CreateTask.show(),this.$refs.CreateTask.isDisabled=!1,this.$refs.CreateTask.createForm={},this.$refs.CreateTask.callNum=0,this.$refs.CreateTask.checkTypeOptions=[{value:"1",label:"按百分比抽检"},{value:"2",label:"按个数抽检"}]},handleEdit:function(e){this.$refs.CreateTask.show(),this.$refs.CreateTask.createForm=Object(i["a"])({},e),console.log("-----row------"),console.log(e),this.$refs.CreateTask.isDisabled=!0,this.$refs.CreateTask.isEdit=!0,this.$refs.CreateTask.rowId=e.id,this.$refs.CreateTask.taskName=e.taskName,this.$refs.CreateTask.createForm.callTimeRange=[e.callStartTime,e.callEndTime],this.$refs.CreateTask.handleCallTime(),null===e.isScore?this.$refs.CreateTask.createForm.isScore="":this.$refs.CreateTask.createForm.isScore=e.isScore,null===e.upperScore||null===e.downScore?this.$refs.CreateTask.createForm.scoreType="1":this.$refs.CreateTask.createForm.scoreType="2"},handleExcute:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$set(e,"auditStatus",-1),r={manualTaskId:e.id,manualTaskstate:e.auditStatus},a.next=4,Object(s["e"])(r);case 4:n=a.sent,n.ok&&t.getDataList();case 6:case"end":return a.stop()}}),a)})))()},handleDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={id:e.id},a.next=3,t.$http("/manualTask/deleteManualTask",{params:r});case 3:n=a.sent,n.ok?t.$message.success("删除成功"):t.$message.error("删除失败"),t.getDataList();case 6:case"end":return a.stop()}}),a)})))()},handleStop:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.id,n=e.auditStatus,i=e.ruleGroupId,o=t.ruleGroupList.some((function(e){return e.id===i})),o){a.next=5;break}return t.$confirm("未找到规则组，任务开始失败",{confirmButtonText:"确定",type:"warning",showCancelButton:!1}).then((function(){return!1})).catch((function(){return!1})),a.abrupt("return",!1);case 5:return t.$set(e,"auditStatus",3),l={manualTaskId:r,manualTaskstate:n},a.next=9,Object(s["e"])(l);case 9:c=a.sent,c.ok&&t.getDataList();case 11:case"end":return a.stop()}}),a)})))()},handleView:function(e){this.$router.push({path:"/smart-quality/ViewCall/".concat(e.id)})}},deactivated:function(){this.$destroy("QualityArtificial")}},w=k,T=(a("7bc0"),Object(f["a"])(w,r,n,!1,null,"68bda024",null));t["default"]=T.exports},2765:function(e,t,a){},"2bcb":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return m}));var r=a("fa65"),n=function(e){return Object(r["e"])("/rules/rulesgroup/getrulesById",{params:e})},i=function(e){return Object(r["e"])("/rules/rulesgroup/grouplistById",{params:e})},o=function(e){return Object(r["e"])("/rules/rulesgroup/grouplistByPage",{params:e})},s=function(e){return Object(r["e"])("/rules/rulesgroup/remove",{params:e})},l=function(e){return r["e"].post("/rules/rulesgroup/savegrouprules",e)},c=function(e){return Object(r["e"])("/rules/rulesgroup/updategrouprules",{params:e})},u=function(e){return Object(r["e"])("/rules/rulesgroup/chekremove",{params:e})},m=function(e){return Object(r["e"])("/rules/rulesgroup/cheksave",{params:e})}},"548f":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",e._b({staticClass:"callDialog",on:{close:function(t){return e.onShow(!1)}}},"el-dialog",Object.assign({},e.modalProps,{title:"选择通话",showClose:!1,width:"80%"}),!1),[a("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-radio-group",{on:{change:e.handleStartTime},model:{value:e.searchForm.startTime,callback:function(t){e.$set(e.searchForm,"startTime",t)},expression:"searchForm.startTime"}},[a("el-radio-button",{attrs:{label:"最近24小时"}}),a("el-radio-button",{attrs:{label:"最近3天"}}),a("el-radio-button",{attrs:{label:"最近7天"}}),a("el-radio-button",{attrs:{label:"最近30天"}}),a("el-radio-button",{attrs:{label:"自定义时间"}})],1),e.isTimeRangeShow?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleStartDateRange},model:{value:e.searchForm.startTimeRange,callback:function(t){e.$set(e.searchForm,"startTimeRange",t)},expression:"searchForm.startTimeRange"}}):e._e()],1),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1),a("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getDataList(1)}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1),a("br")],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-key":"cdrId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),a("el-table-column",{attrs:{label:"通话ID",prop:"cdrId","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"文件名",prop:"fileName","show-overflow-tooltip":"","min-width":"80"}}),a("el-table-column",{attrs:{label:"开始时间",prop:"starttime","show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{label:"结束时间",prop:"endtime","show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{label:"通话时长",prop:"conDuration","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"上传时间",prop:"insertTime","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"坐席工号",prop:"seatsId","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"坐席姓名",prop:"seatsName","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"客户姓名",prop:"customerName","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"呼叫方向",prop:"dir","min-width":"80","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"主叫号码",prop:"caller","min-width":"80","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"被叫号码",prop:"called","min-width":"80","show-overflow-tooltip":""}})],1),a("el-pagination",{staticClass:"is-background",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":e.paginationInfo.currentPage,"page-sizes":e.paginationInfo.pageSizes,"page-size":e.paginationInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("div",{staticClass:"dialog-footer",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[a("div",{staticStyle:{"text-align":"left"}},[e._v("已选择共计"),a("span",{staticStyle:{margin:"0 10px",color:"#00CDB1"}},[e._v(e._s(e.selectedCalls))]),e._v("个通话")]),a("div",[a("el-button",{on:{click:e.handleCancelSelection}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleOkDialog}},[e._v("确 定")])],1)])],1)},n=[],i=(a("d3b7"),window.createEditView({data:function(){return{searchForm:{uploadTime:"",uploadTimeRange:"",keywords:null},isTimeRangeShow:!1,tableData:[],paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0},loading:!1,multipleSelection:[],selectedCallId:[]}},created:function(){this.getDataList()},computed:{selectedCalls:function(){return this.multipleSelection.length}},methods:{getDataList:function(e){var t=this,a={startTime:this.searchForm.startTimeRange?this.$adminCore.formatDate(this.searchForm.startTimeRange[0]):null,endTime:this.searchForm.startTimeRange?this.$adminCore.formatDate(this.searchForm.startTimeRange[1]):null,keyword:this.searchForm.keywords,offset:e||1+(this.paginationInfo.currentPage-1)*this.paginationInfo.pageSize,size:this.paginationInfo.pageSize};this.loading=!0,this.$http("/cti/cdr",{params:a}).then((function(e){e.ok?(t.tableData=e.data.rows,t.paginationInfo.total=e.data.count):t.$message.error(e.info)})).catch((function(e){t.$message.error("获取数据失败")})).finally((function(){t.loading=!1}))},handleStartTime:function(){var e=new Date,t=new Date;"最近24小时"===this.searchForm.startTime?(t.setTime(t.getTime()-864e5),this.searchForm.startTimeRange=[t,e]):"最近3天"===this.searchForm.startTime?(t.setTime(t.getTime()-2592e5),this.searchForm.startTimeRange=[t,e]):"最近7天"===this.searchForm.startTime?(t.setTime(t.getTime()-6048e5),this.searchForm.startTimeRange=[t,e]):"最近30天"===this.searchForm.startTime&&(t.setTime(t.getTime()-2592e6),this.searchForm.startTimeRange=[t,e]),"自定义时间"===this.searchForm.startTime?this.isTimeRangeShow=!this.isTimeRangeShow:this.isTimeRangeShow=!1},handleStartDateRange:function(){this.searchForm.startTime=this.searchForm.startTimeRange},onReset:function(){this.searchForm={},this.isShowSearchMore=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))},handleSelectionChange:function(e){if(this.multipleSelection=e,this.selectedCallId=[],this.multipleSelection.length)for(var t=0;t<this.multipleSelection.length;t++)this.selectedCallId.push(this.multipleSelection[t].id)},handleOkDialog:function(){this.onShow(!1),this.$emit("okDialog",this.multipleSelection.length,this.selectedCallId)},handleCancelSelection:function(){this.$refs.multipleTable.clearSelection(),this.onShow(!1)}}})),o=i,s=(a("a141"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,"1d6065fb",null);t["a"]=l.exports},"5e23":function(e,t,a){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,a=null;return function(){var r=arguments,n=this;a&&clearTimeout(a),a=setTimeout((function(){e.apply(n,r),a=null}),t)}}a.d(t,"a",(function(){return r}))},"6c9b":function(e,t,a){},7329:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{staticClass:"is-background",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":e.paginationInfo.currentPage,"page-sizes":e.paginationInfo.pageSizes,"page-size":e.paginationInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i={props:{paginationInfo:{type:Object,required:!0}},methods:{handleSizeChange:function(e){this.paginationInfo.pageSize=e,this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.paginationInfo.currentPage=e,this.$emit("currentChange",e)}}},o=i,s=a("2877"),l=Object(s["a"])(o,r,n,!1,null,null,null);t["a"]=l.exports},"7bc0":function(e,t,a){"use strict";a("c392")},a141:function(e,t,a){"use strict";a("6c9b")},c392:function(e,t,a){},ca7c:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return u}));var r=a("fa65"),n=function(e){return Object(r["e"])("/manualTask/queryList",{params:e})},i=function(e){return r["e"].post("/manualTask",e)},o=function(e,t){return r["e"].post("/manualTask/update",t)},s=function(){return Object(r["e"])("/rules/rulesgroup/grouplistById")},l=function(e){return r["e"].post("/manualTask/queryCallCount",e)},c=function(e){return Object(r["e"])("/manualTask/queryManualTaskCall",{params:e})},u=function(e){return Object(r["e"])("/manualTask/startManualTask",{params:e})}},dc53:function(e,t,a){"use strict";a("2765")},fa65:function(e,t,a){"use strict";a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return f})),a.d(t,"d",(function(){return g})),a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return v}));a("d3b7"),a("b0c0");var r=a("4328"),n=a.n(r),i=a("bc3a"),o=a.n(i),s=a("5c96"),l=a("e5ac"),c=a("a02a"),u=a("60e2"),m=function(e){var t=e.statusCode,a=e.message,r=e.data,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&s["Message"].error(a||"发生未知异常");var i=new Error(a);return i.data=r,i.statusCode=t,Promise.reject(i)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u["a"],a=o.a.create();return a.defaults.baseURL=t,a.defaults.withCredentials=!0,e&&(a.defaults.transformRequest=[function(e){return n.a.stringify(e)}]),a.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return t&&!1!==e.isAuth&&(e.headers.Authorization=t),e})),a.interceptors.response.use((function(e){var t=e.data;return t instanceof Blob&&(t.name=Object(c["n"])(e.headers["content-disposition"])),"number"===typeof t.code?t.code?m({message:t.msg,data:t,statusCode:e.status}):t:!1!==t.ok?(Object(l["b"])(e.config.url)&&sessionStorage.setItem("token",e.headers.authorization||e.headers.Authorization),t):m({message:t.info,data:t,statusCode:e.status},"-20"!==t.code)}),(function(e){var t=e.response,a=t||{},r=a.data,n=a.status,i=t?r.info||e.message:"请求失败，请稍候重试";return 401===n?(sessionStorage.removeItem("token"),window.opener?window.close():(c["t"].close(),l["a"].dispatch("GO_LOGIN")),m({message:i,data:r,statusCode:n},!1)):m({message:i,data:r,statusCode:n})})),a},p=h(!0,u["b"]),d=h(),f=h(!0),g=function(){return f.post.apply(f,arguments)},b=h(!1,u["b"]),v=function(){return p.post.apply(p,arguments)}}}]);