(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f240503"],{1148:function(e,t,n){"use strict";var i=n("da84"),r=n("5926"),a=n("577e"),o=n("1d80"),s=i.RangeError;e.exports=function(e){var t=a(o(this)),n="",i=r(e);if(i<0||i==1/0)throw s("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"408a":function(e,t,n){var i=n("e330");e.exports=i(1..valueOf)},b680:function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),a=n("e330"),o=n("5926"),s=n("408a"),c=n("1148"),l=n("d039"),u=r.RangeError,f=r.String,h=Math.floor,d=a(c),m=a("".slice),p=a(1..toFixed),b=function(e,t,n){return 0===t?n:t%2===1?b(e,t-1,n*e):b(e*e,t/2,n)},v=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},w=function(e,t,n){var i=-1,r=n;while(++i<6)r+=t*e[i],e[i]=r%1e7,r=h(r/1e7)},x=function(e,t){var n=6,i=0;while(--n>=0)i+=e[n],e[n]=h(i/t),i=i%t*1e7},y=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var i=f(e[t]);n=""===n?i:n+d("0",7-i.length)+i}return n},k=l((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!l((function(){p({})}));i({target:"Number",proto:!0,forced:k},{toFixed:function(e){var t,n,i,r,a=s(this),c=o(e),l=[0,0,0,0,0,0],h="",p="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return f(a);if(a<0&&(h="-",a=-a),a>1e-21)if(t=v(a*b(2,69,1))-69,n=t<0?a*b(2,-t,1):a/b(2,t,1),n*=4503599627370496,t=52-t,t>0){w(l,0,n),i=c;while(i>=7)w(l,1e7,0),i-=7;w(l,b(10,i,1),0),i=t-1;while(i>=23)x(l,1<<23),i-=23;x(l,1<<i),w(l,1,1),x(l,2),p=y(l)}else w(l,0,n),w(l,1<<-t,0),p=y(l)+d("0",c);return c>0?(r=p.length,p=h+(r<=c?"0."+d("0",c-r)+p:m(p,0,r-c)+"."+m(p,r-c))):p=h+p,p}})},cc2c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({attrs:{columns:e.columns},scopedSlots:e._u([{key:"search",fn:function(){return[e.isSuper?n("el-form-item",{attrs:{label:"选择企业"}},[n("ui-ent-select",{on:{change:e.onSearch},model:{value:e.searchForm.entId,callback:function(t){e.$set(e.searchForm,"entId",t)},expression:"searchForm.entId"}})],1):e._e(),n("el-form-item",{attrs:{label:"选择时间范围"}},[n("ui-date-range-picker",{attrs:{type:"datetimerange"},on:{change:e.onTimeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),"statistics"===e.activedTab?n("ui-text-field",{attrs:{label:"工号/姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.condition,callback:function(t){e.$set(e.searchForm,"condition",t)},expression:"searchForm.condition"}}):e._e(),n("ui-select",{attrs:{label:"统计周期",options:e.timeUnits},on:{change:e.onSearch},model:{value:e.searchForm.dateType,callback:function(t){e.$set(e.searchForm,"dateType",t)},expression:"searchForm.dateType"}})]},proxy:!0},{key:"actions",fn:function(){return[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.exportFile}},[e._v("导出")])],1),n("el-tabs",{on:{"tab-click":e.onSearch},model:{value:e.activedTab,callback:function(t){e.activedTab=t},expression:"activedTab"}},[n("el-tab-pane",{attrs:{label:"统计表",name:"statistics"}}),n("el-tab-pane",{attrs:{label:"汇总表",name:"summary"}})],1)]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],a=n("5530"),o=n("3835"),s=n("2909"),c=(n("b680"),n("99af"),n("a02a")),l={name:"AgentOperate",mixins:[window.mixTableView],data:function(){return{skillGroups:[],timerange:[],activedTab:"statistics",timeUnits:{hour:"按小时统计",day:"按天统计",week:"按周统计",month:"按月统计"}}},computed:{isSuper:function(){return this.$store.getters.isAdmin},entId:function(){return this.$store.state.userData.entid},columns:function(){var e=[{title:"企业名称",key:"entname",minWidth:100,fixed:"left"}],t=[{title:"时间",key:"timeType",minWidth:160,sortable:!0,fixed:"left"}],n=[{title:"签入时长",render:function(e,t){var n=t.row;return e("span",Object(c["k"])(n.inTime))}},{title:"服务用户时长",minWidth:130,render:function(e,t){var n=t.row;return e("span",Object(c["k"])(n.serviceUserTime))}},{title:"示忙时长",render:function(e,t){var n=t.row;return e("span",Object(c["k"])(n.busyTime))}},{title:"服务用户占比",key:"serviceUserRate",minWidth:120,render:function(e,t){var n=t.row;return e("span","".concat((100*n.serviceUserRate).toFixed(2),"%"))}}],i="statistics"===this.activedTab?[{title:"工号",key:"workno",minWidth:80,fixed:"left"},{title:"姓名",key:"workname",minWidth:100,fixed:"left"}]:[{title:"技能组",key:"queueName",minWidth:100,fixed:"left"}],r=this.isSuper?[].concat(e,t,i):[].concat(t,i);return[].concat(Object(s["a"])(r),n)},Searchurl:function(){return"statistics"===this.activedTab?"/analysis/workopt/get/list":"/analysis/workopt/get/list/queue"},exportUrl:function(){return"statistics"===this.activedTab?"/analysis/workopt/export":"/analysis/workopt/export/queue"}},mounted:function(){this.setInitForm(),this.getData(),Object(c["g"])(this,this.getData)},methods:{setInitForm:function(){var e=Object(c["o"])(),t=Object(o["a"])(e,2),n=t[0],i=t[1];this.timerange=[n,i],this.tableForm={dateType:"hour",dateUnitType:"second",entId:this.entId,beginDate:+n,endDate:+i},this.searchForm=Object(a["a"])({},this.tableForm)},fetchMethod:function(e){return this.$http(this.Searchurl,{params:e}).then((function(e){var t=e.data;return t}))},onTimeChange:function(e){var t=e||[],n=Object(o["a"])(t,2),i=n[0],r=n[1];this.searchForm.beginDate=i&&new Date(i).getTime(),this.searchForm.endDate=r&&new Date(r).getTime(),this.onSearch()},exportFile:function(){var e=this;this.$confirm("您当前导出数据为该筛选条件下的所有数据,请点击确定,继续导出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(e.tableData.total>5e4)return e.$confirm("当前导出数据量超过最大限制(50000条),请重新筛选数据后重试","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});Object(c["i"])({fileName:"statistics"===e.activedTab?"坐席操作分析统计表.xls":"坐席操作分析汇总表.xls",action:function(){return e.$post(e.exportUrl,e.searchForm,{responseType:"blob"})}})}))}}},u=l,f=n("2877"),h=Object(f["a"])(u,i,r,!1,null,null,null);t["default"]=h.exports}}]);