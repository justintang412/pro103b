(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48bc7b15"],{"4b13":function(t,e,a){"use strict";a("fa1c")},7329:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-pagination",{staticClass:"is-background",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":t.paginationInfo.currentPage,"page-sizes":t.paginationInfo.pageSizes,"page-size":t.paginationInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.paginationInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],r={props:{paginationInfo:{type:Object,required:!0}},methods:{handleSizeChange:function(t){this.paginationInfo.pageSize=t,this.$emit("sizeChange",t)},handleCurrentChange:function(t){this.paginationInfo.currentPage=t,this.$emit("currentChange",t)}}},i=r,s=a("2877"),l=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=l.exports},ca7c:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"e",(function(){return c}));var n=a("fa65"),o=function(t){return Object(n["e"])("/manualTask/queryList",{params:t})},r=function(t){return n["e"].post("/manualTask",t)},i=function(t,e){return n["e"].post("/manualTask/update",e)},s=function(){return Object(n["e"])("/rules/rulesgroup/grouplistById")},l=function(t){return n["e"].post("/manualTask/queryCallCount",t)},u=function(t){return Object(n["e"])("/manualTask/queryManualTaskCall",{params:t})},c=function(t){return Object(n["e"])("/manualTask/startManualTask",{params:t})}},ec0c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"callManage"},[a("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:t.searchForm}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"},model:{value:t.searchForm.keywords,callback:function(e){t.$set(t.searchForm,"keywords",e)},expression:"searchForm.keywords"}})],1),a("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-search"},on:{click:function(e){return t.getDataList(1)}}},[t._v("查询")]),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-refresh"},on:{click:t.onReset}},[t._v("重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"通话ID",prop:"cdrId","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"文件名",prop:"fileName","show-overflow-tooltip":"","min-width":"80"}}),a("el-table-column",{attrs:{label:"开始时间",prop:"starttime","show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{label:"结束时间",prop:"endtime","show-overflow-tooltip":"","min-width":"110"}}),a("el-table-column",{attrs:{label:"通话时长",prop:"conDuration","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"上传时间",prop:"insertTime","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"坐席工号",prop:"seatsId","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"坐席姓名",prop:"seatsName","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"客户姓名",prop:"customerName","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"呼叫方向",prop:"dir","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[1===n.dir?a("el-tag",{attrs:{effect:"plain"}},[t._v("呼入")]):a("el-tag",{attrs:{effect:"plain",type:"success"}},[t._v("呼出")])]}}])}),a("el-table-column",{attrs:{label:"主叫号码",prop:"caller","show-overflow-tooltip":"","min-width":"80"}}),a("el-table-column",{attrs:{label:"被叫号码",prop:"called","show-overflow-tooltip":"","min-width":"80"}}),a("el-table-column",{attrs:{label:"质检状态",prop:"auditState","show-overflow-tooltip":"","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.auditState?a("span",[t._v(t._s(n.auditState))]):n.auditState?t._e():a("span",[t._v("未质检")])]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"ui-text-btns"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleResult(n,t.routeVal)}}},[t._v("开始人工质检")])],1)]}}])})],1),a("ComPagination",{ref:"ComPagination",attrs:{paginationInfo:t.paginationInfo},on:{sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange}})],1)},o=[],r=a("1da1"),i=(a("96cf"),a("ac1f"),a("1276"),a("ca7c")),s=a("7329"),l={name:"ViewCall",components:{ComPagination:s["a"]},data:function(){return{callId:null,searchForm:{},taskList:[],isTimeRangeShow:!1,isShowSearchMore:!1,tableData:[],paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0},loading:!1,ruleGroup:["对话规则"]}},beforeRouteEnter:function(t,e,a){a((function(t){t.callId=t.$route.params.id,t.getDataList()}))},beforeRouteUpdate:function(t,e,a){this.searchForm.task=null,this.getDataList(1)},computed:{routeVal:function(){var t=window.location.href.split("/"),e=t[t.length-2];return e},routeVal2:function(){var t=window.location.href.split("/"),e=t[t.length-1];return e}},methods:{getDataList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={manualTaskId:e.$route.params.id,keyword:e.searchForm.keywords,offset:t||1+(e.paginationInfo.currentPage-1)*e.paginationInfo.pageSize,size:e.paginationInfo.pageSize},e.loading=!0,a.next=4,Object(i["g"])(n);case 4:o=a.sent,console.log(o),o.ok?(e.tableData=o.data.rows,e.paginationInfo.total=o.data.count):e.$message.error("获取数据失败"),e.loading=!1;case 8:case"end":return a.stop()}}),a)})))()},handleResult:function(t){this.$router.push({name:"qualityInspectionResult",params:{id:t.id,routeVal:this.routeVal,routeVal2:this.routeVal2}})},onReset:function(){this.searchForm={},this.isShowSearchMore=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},handleSizeChange:function(t){var e=this;this.$nextTick((function(){e.paginationInfo.pageSize=t,e.$set(e.paginationInfo,"offset",1+(e.paginationInfo.currentPage-1)*t),e.getDataList()}))},handleCurrentChange:function(t){var e=this;this.$nextTick((function(){e.paginationInfo.currentPage=t,e.$set(e.paginationInfo,"offset",1+(t-1)*e.paginationInfo.pageSize),e.getDataList()}))}}},u=l,c=(a("4b13"),a("2877")),p=Object(c["a"])(u,n,o,!1,null,"687e9174",null);e["default"]=p.exports},fa1c:function(t,e,a){},fa65:function(t,e,a){"use strict";a.d(e,"e",(function(){return h})),a.d(e,"a",(function(){return g})),a.d(e,"d",(function(){return m})),a.d(e,"c",(function(){return w})),a.d(e,"b",(function(){return b}));a("d3b7"),a("b0c0");var n=a("4328"),o=a.n(n),r=a("bc3a"),i=a.n(r),s=a("5c96"),l=a("e5ac"),u=a("a02a"),c=a("60e2"),p=function(t){var e=t.statusCode,a=t.message,n=t.data,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o&&s["Message"].error(a||"发生未知异常");var r=new Error(a);return r.data=n,r.statusCode=e,Promise.reject(r)},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c["a"],a=i.a.create();return a.defaults.baseURL=e,a.defaults.withCredentials=!0,t&&(a.defaults.transformRequest=[function(t){return o.a.stringify(t)}]),a.interceptors.request.use((function(t){var e=sessionStorage.getItem("token");return e&&!1!==t.isAuth&&(t.headers.Authorization=e),t})),a.interceptors.response.use((function(t){var e=t.data;return e instanceof Blob&&(e.name=Object(u["n"])(t.headers["content-disposition"])),"number"===typeof e.code?e.code?p({message:e.msg,data:e,statusCode:t.status}):e:!1!==e.ok?(Object(l["b"])(t.config.url)&&sessionStorage.setItem("token",t.headers.authorization||t.headers.Authorization),e):p({message:e.info,data:e,statusCode:t.status},"-20"!==e.code)}),(function(t){var e=t.response,a=e||{},n=a.data,o=a.status,r=e?n.info||t.message:"请求失败，请稍候重试";return 401===o?(sessionStorage.removeItem("token"),window.opener?window.close():(u["t"].close(),l["a"].dispatch("GO_LOGIN")),p({message:r,data:n,statusCode:o},!1)):p({message:r,data:n,statusCode:o})})),a},d=f(!0,c["b"]),h=f(),g=f(!0),m=function(){return g.post.apply(g,arguments)},w=f(!1,c["b"]),b=function(){return d.post.apply(d,arguments)}}}]);