(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e53d4"],{9447:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({},"ui-table-view",e.viewProps,!1),e.viewListeners))},a=[],s=n("1da1"),i=n("5530"),o=(n("96cf"),n("d3b7"),n("d81d"),n("3ca3"),n("ddb0"),n("a02a")),u={name:"SystemUser",mixins:[window.mixTableView],data:function(){return{columns:[{label:"编号",prop:"borrowId"},{label:"借阅人",prop:"borrower"},{label:"申请时间",prop:"createTime"},{label:"借阅内容",prop:"borrowList"},{label:"审批时间",prop:"approveDate"},{label:"审批结果",prop:"approveResult"},{label:"申请备注",prop:"applyRemark"},{label:"审批备注",prop:"approveRemark"}],roles:[]}},computed:{userData:function(){return this.$store.state.userData},isAdmin:function(){return this.$store.getters.isAdmin}},mounted:function(){this.setInitForm(),this.getInitData(),Object(o["g"])(this,this.getInitData)},methods:{getInitData:function(){this.getData()},setInitForm:function(){this.tableForm={entid:this.userData.entid},this.searchForm=Object(i["a"])({},this.tableForm)},fetchMethod:function(e){return this.$http("/workflow/borrow/list",{params:e}).then((function(e){var t=e.data;return{total:t.length,data:t}}))},onDelete:function(e){var t=this;if(e instanceof Array||(e=[e]),e.some((function(e){return!e.state})))return this.$message.warning("已启用的账号不能删除");this.delData({desc:"确定要删除所选用户？",action:function(){return t.$http("/ccas/auth/user/del",{params:{ids:e.map((function(e){return e.userId}))+""}})}})},onEdit:function(e){this.$openModal((function(){return n.e("chunk-2d0b37ae").then(n.bind(null,"290a"))}),{row:e,entid:this.searchForm.entid},{success:this.onEditSuccess})},onUpdatePwd:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$prompt("请输入新密码","修改密码",{inputPlaceholder:"请输入新密码",inputPattern:o["e"].pattern,inputErrorMessage:o["e"].message});case 2:return r=n.sent,a=r.value,n.next=6,t.$post("/ccas/auth/user/update/password/for/manage",{password:a,userId:e.userId});case 6:t.$message.success("密码修改成功");case 7:case"end":return n.stop()}}),n)})))()},onSettingRoles:function(e){this.$openModal((function(){return n.e("chunk-d32c6d18").then(n.bind(null,"6dc7"))}),{row:e})},getRoles:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/ccas/auth/role/all/list").then((function(e){return e.data}));case 2:e.roles=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},c=u,l=n("2877"),p=Object(l["a"])(c,r,a,!1,null,null,null);t["default"]=p.exports}}]);