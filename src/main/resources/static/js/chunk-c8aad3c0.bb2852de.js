(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8aad3c0"],{a466:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("el-alert",{directives:[{name:"show",rawName:"v-show",value:!t.customerId,expression:"!customerId"}],attrs:{"show-icon":"",type:"warning",title:"该客户信息尚未保存，请单击编辑以保存客户信息"}}),t.visible?n("div",{staticClass:"sub-container"},[n("customer-info",{ref:"CustomerInfo",staticClass:"customer-info",attrs:{operationSource:7,params:t.customerParams,onSendSms:t.onSendSms,mergeAction:t.mergeAction},on:{getCustomerId:t.getCustomerId,merged:t.onMerged}}),n("main",{staticClass:"main"},[n("div",{staticClass:"namelist-detail"},[n("p",{staticClass:"title"},[t._v("名单详情")]),n("el-form",{attrs:{"label-width":"6em"}},[n("el-form-item",{attrs:{label:"联系人："}},[t._v(t._s(t.detail.contactName))]),n("el-form-item",{attrs:{label:"性别："}},[t._v(t._s({1:"男",2:"女"}[t.detail.contactSex]))]),n("el-form-item",{attrs:{label:"联系电话："}},[t._v(t._s(t.$getPhoneText(t.detail.contactPhone)))]),n("el-form-item",{attrs:{label:"当前状态："}},[t._v(t._s(t.callStatus[t.detail.callStatus]))]),n("el-form-item",{attrs:{label:"呼叫时间："}},[t._v(t._s(t.detail.callTime))]),n("el-form-item",{attrs:{label:"通话时长："}},[t._v(t._s(t.fmtTimes(t.detail.callTimeLen)))])],1)],1),n("header",{staticClass:"header"},[n("span",{staticClass:"title"},[t._v("历史动态")]),t.customerId?[n("el-button",{attrs:{icon:"el-icon-plus",type:"primary",plain:""},on:{click:t.onCreateWorkorder}},[t._v("创建工单")]),n("el-button",{attrs:{icon:"el-icon-plus",type:"primary",plain:""},on:{click:t.onAddContactPlan}},[t._v("添加联系计划")])]:t._e()],2),n("ui-tab-view",{ref:"UiTabView",attrs:{tabs:t.tabs,nocache:""}})],1)],1):t._e()],1)},c=[],r=n("1da1"),s=n("5530"),i=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("5cdf")),o=n("fd3b"),u=n("977e"),l=n("b2a1"),d=n("c71f"),m=n("65bd"),f=n("a02a"),b=function(t,e){return{render:function(n){return n(t,{props:e})}}},h={components:{CustomerInfo:o["a"]},data:function(){return{fmtTimes:f["k"],callStatus:i["c"],visible:!1,customerId:null,detail:{}}},computed:{eventListId:function(){return this.$route.params.id},tabs:function(){var t=this,e={customerId:this.customerId},n={label:"呼叫历史",component:b(u["a"],{action:function(e){return t.$http("/ccas/call/info/list/by/eventListId",{params:Object(s["a"])(Object(s["a"])({},e),{},{eventListId:t.eventListId})})}})};return this.customerId?[n,{label:"工单",component:b(l["a"],e)},{label:"IM历史",component:b(d["a"],e)},{label:"联系计划",component:b(m["a"],e)}]:[n]},customerParams:function(){var t=this,e=this.eventListId,n=this.detail;return{customerSource:7,phone:n.contactPhone,customerName:n.contactName,customerNickname:n.contactName,action:function(){return t.$http("/ccas/call/manual/event/list/customer/by/eventListId/".concat(e))},saveAction:function(n){return t.$post("/ccas/call/manual/event/list/bind/customer",Object(s["a"])(Object(s["a"])({},n),{},{eventListId:e}))}}}},mounted:function(){this.getNamelistDetail()},methods:{openModal:function(t,e){this.$openModal(t,e,{success:this.refresh})},refresh:function(){var t=this.$refs.UiTabView.getCurrentView();t&&(t.getData?t.getData():(t=t.$children[0],t&&t.getData()))},mergeAction:function(t){return this.$post("/ccas/call/manual/event/list/bind/merge/customer",Object(s["a"])(Object(s["a"])({},t),{},{eventListId:this.eventListId}))},onCreateWorkorder:function(){this.openModal((function(){return n.e("chunk-497ef431").then(n.bind(null,"4bd2"))}),{customerInfo:{channelId:1,customerId:this.customerId}})},onAddContactPlan:function(){this.openModal((function(){return n.e("chunk-b4cb56ec").then(n.bind(null,"f935"))}),{customerId:this.customerId})},getNamelistDetail:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http("/ccas/call/manual/event/list/details/by/".concat(t.eventListId)).then((function(t){return t.data||{}}));case 2:t.detail=e.sent,t.visible=!0;case 4:case"end":return e.stop()}}),e)})))()},getCustomerId:function(t){this.customerId=t},onSendSms:function(t){this.$openModal((function(){return n.e("chunk-97d13c26").then(n.bind(null,"3772"))}),{row:{contactPhone:t},userData:this.$store.state.userData})},onMerged:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.CustomerInfo.getInitData();case 2:t.refresh();case 3:case"end":return e.stop()}}),e)})))()}}},p=h,v=(n("c58b"),n("2877")),I=Object(v["a"])(p,a,c,!1,null,"0c63212c",null);e["default"]=I.exports},c58b:function(t,e,n){"use strict";n("ee06")},de0b:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var a=n("ade3"),c="customer-center",r={CUSTOMER_CENTER:1,WECHAT:2,APP:3,PC_WEB:4,WEIBO:5,MOB_WEB:6,CALL_CENTER:7,WO_CENTER:8,ENT_WECHAT:9,WECHAT_APP:10,EMAIL:11},s=function(t){var e;return e={},Object(a["a"])(e,t.CUSTOMER_CENTER,"客户中心"),Object(a["a"])(e,t.WECHAT,"微信"),Object(a["a"])(e,t.APP,"APP"),Object(a["a"])(e,t.PC_WEB,"桌面网站"),Object(a["a"])(e,t.WEIBO,"微博"),Object(a["a"])(e,t.MOB_WEB,"移动网站"),Object(a["a"])(e,t.CALL_CENTER,"呼叫中心"),Object(a["a"])(e,t.WO_CENTER,"工单中心"),Object(a["a"])(e,t.ENT_WECHAT,"企业微信"),Object(a["a"])(e,t.WECHAT_APP,"微信小程序"),Object(a["a"])(e,t.EMAIL,"邮件"),e}(r),i={BASE:1,VIP:2},o=function(t){var e;return e={},Object(a["a"])(e,t.BASE,"普通客户"),Object(a["a"])(e,t.VIP,"VIP客户"),e}(i)},ee06:function(t,e,n){}}]);