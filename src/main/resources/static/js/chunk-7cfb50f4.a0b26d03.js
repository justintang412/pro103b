(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cfb50f4"],{"01e0":function(e,t,r){},3638:function(e,t,r){"use strict";r("01e0")},"56bc":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-modal",e._g(e._b({ref:"Modal",scopedSlots:e._u([{key:"footer",fn:function(){return[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),r("el-button",{on:{click:e.onCancel}},[e._v("取消")]),r("el-button",{on:{click:function(t){return e.onReset()}}},[e._v("清空")])]},proxy:!0}])},"ui-modal",e.modalProps,!1),e.$listeners),[r("el-form",{ref:"Form",attrs:{"label-width":"7em",model:e.form,rules:e.rules}},[r("ui-text-field",{attrs:{label:"全文名称",prop:"itemFullName",placeholder:"全文名称"},model:{value:e.form.itemFullName,callback:function(t){e.$set(e.form,"itemFullName",t)},expression:"form.itemFullName"}}),r("el-form-item",{attrs:{label:"收集日期"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"- -",prop:"receiveDate",options:e.dateOptions},model:{value:e.form.receiveDate,callback:function(t){e.$set(e.form,"receiveDate",t)},expression:"form.receiveDate"}})],1),r("ui-select",{attrs:{label:"收集人",options:e.users,clearable:""},model:{value:e.form.receiver,callback:function(t){e.$set(e.form,"receiver",t)},expression:"form.receiver"}}),r("div",{staticStyle:{margin:"10px 0"}},[e._v("请选择导入文件 "),r("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:e.onSelectFile}},[e._v("选择文件")]),r("span",{staticStyle:{"padding-left":"5px",color:"#999"}},[e._v(e._s(e.file&&e.file.name))]),r("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",accept:"*"},on:{change:e.onChange}})],1)],1)],1)},i=[],a=r("5530"),o=r("1da1"),s=(r("96cf"),r("d3b7"),r("d81d"),r("e9c4"),r("a02a")),l=r("ec26"),u={props:["row","customerInfo"],data:function(){var e=this;return{file:null,users:[],form:{templates:[]},modalProps:{drawer:!0,width:"600px",isEdit:!!this.row,onSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:if(r=e.form,!e.file){t.next=10;break}return n=new FormData,n.append("file",e.file),n.append("itemFullName",r.itemFullName),n.append("receiveDate",r.receiveDate),n.append("receiver",r.receiver),t.abrupt("return",e.$http.post("/sys/item/save",n));case 10:return i="请选择文件",e.$message.error(i),t.abrupt("return",Promise.reject(new Error(i)));case 13:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()},dateOptions:{disabledDate:function(e){return e<new Date}},rules:{itemFullName:Object(s["v"])("请输入电子全文名称"),receiveDate:Object(s["v"])("请输入收集日期"),receiver:Object(s["v"])("请选择收集人")}}},mounted:function(){var e=this,t=this.row;this.onReset(t),this.$http("/user/list",{params:{}}).then((function(t){var r=t.data;e.users=r.map((function(e){return{value:e.username,label:e.fullname}}))}))},methods:{onSubmit:function(){this.form.item_id||(this.form.itemId=Object(l["a"])()),this.$refs.Modal.submit()},onCancel:function(){this.$refs.Modal.show(!1)},onReset:function(e){var t=this;this.form=e?Object(a["a"])(Object(a["a"])({},JSON.parse(JSON.stringify(e))),{},{orderFiles:e.orderFiles?e.orderFiles.map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{name:t.getFileName(e.fileName)})})):[]}):{}},onChange:function(e){var t=e.target,r=t.files[0];r?this.file=r:this.$message.error("请选择文件")},onSelectFile:function(){this.$refs.File.click()}}},c=u,f=(r("3638"),r("2877")),m=Object(f["a"])(c,n,i,!1,null,"322a96b4",null);t["default"]=m.exports},ec26:function(e,t,r){"use strict";var n,i=new Uint8Array(16);function a(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function s(e){return"string"===typeof e&&o.test(e)}for(var l=s,u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r}var m=f;function p(e,t,r){e=e||{};var n=e.random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return m(n)}t["a"]=p}}]);