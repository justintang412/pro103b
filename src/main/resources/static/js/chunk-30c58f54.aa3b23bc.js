(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30c58f54"],{"0bbf":function(e,t,i){},4195:function(e,t,i){"use strict";i("0bbf")},"57b0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sensitiveRules"},[i("div",{staticClass:"sensiLeft"},[i("div",{staticClass:"sensHead"},[i("h5",[e._v("分类")]),i("div",[i("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("管理")]),i("el-dialog",{attrs:{title:"管理",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.typeData}},[i("el-table-column",{attrs:{label:"分类","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdisabled?e._e():i("div",[t.row.editInput?e._e():i("p",[e._v(e._s(t.row.classify))]),t.row.editInput?i("el-input",{attrs:{disabled:t.row.isdisabled,clearable:""},on:{blur:function(i){return e.handleEditSave(t.row)}},model:{value:t.row.classify,callback:function(i){e.$set(t.row,"classify",i)},expression:"scope.row.classify"}}):e._e()],1)]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdisabled?e._e():i("div",[i("span",{staticStyle:{width:"30px",display:"inline-block",cursor:"pointer"}},[i("i",{staticClass:"el-icon-edit",on:{click:function(i){return e.handleEdit(t.row)}}})]),i("span",{staticStyle:{width:"30px",display:"inline-block",cursor:"pointer"}},[i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"text"},on:{click:function(i){return e.handleDelete(t.row.id)}}},[i("i",{staticClass:"el-icon-delete"})])],1)])]}}])})],1),e.addInput?i("p",{staticStyle:{display:"flex","align-items":"center",width:"80%",margin:"15px 0 15px 24px"}},[i("el-input",{attrs:{clearable:""},model:{value:e.newSensitives,callback:function(t){e.newSensitives=t},expression:"newSensitives"}}),i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"text"},on:{click:function(t){return e.newAddclassify(e.newSensitives)}}},[i("i",{staticClass:"el-icon-check saveCheck"})])],1):e._e(),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",[i("el-button",{on:{click:e.handleAdd}},[e._v("新增")])],1),i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)]),i("el-tree",{ref:"typeListTree",attrs:{data:e.typeData,props:e.typeProps,"highlight-current":"","node-key":"id","current-node-key":null,"default-expanded-keys":[]},on:{"node-click":e.handleNodeClick}})],1),i("div",{staticStyle:{flex:"1"}},[i("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[i("div",{staticClass:"key"})]),i("div",{staticClass:"actionBar"},[i("div",[e._v(" 问题："),i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:""},model:{value:e.paginationInfo.isquestion,callback:function(t){e.$set(e.paginationInfo,"isquestion",t)},expression:"paginationInfo.isquestion"}}),i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticStyle:{"margin-left":"20px"},attrs:{type:"",icon:"el-icon-search"},on:{click:function(t){return e.getDataList(1)}}},[e._v("搜索")]),i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.refreshbtn}},[e._v("重 置")])],1),i("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.onCreate()}}},[e._v("添加知识库")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{label:"问题ID",align:"center",prop:"id",width:"80"}}),i("el-table-column",{attrs:{label:"问题",align:"center",prop:"question","show-overflow-tooltip":"","min-width":"100"}}),i("el-table-column",{attrs:{label:"核心词",align:"center",prop:"theCoreWord",width:"100"}}),i("el-table-column",{attrs:{label:"状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:1===t.row.ifEnable?"success":"danger"}},[e._v(e._s(1===t.row.ifEnable?"生效":"失效"))])]}}])}),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"insertTime",width:"100"}}),i("el-table-column",{attrs:{label:"编辑时间",align:"center",prop:"updateTime",width:"100"}}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("div",{staticClass:"ui-text-btns"},[i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.transfer(n)}}},[e._v("转移")]),1===n.ifEnable?i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],class:1===n.ifEnable?"active":"isactive",staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-check"},on:{click:function(t){return e.comeinto(n)}}},[e._v("生效")]):i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],class:1===n.ifEnable?"active":"isactive",staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-check"},on:{click:function(t){return e.comeinto(n)}}},[e._v("失效")]),i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.onEdit(n)}}},[e._v("编辑")]),i("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.onDelete(n)}}},[e._v("删除")])],1)]}}])})],1),i("el-dialog",{attrs:{title:"选择类目",visible:e.dialogClassify,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogClassify=t}}},[i("div",{staticClass:"block"},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.optionsClassify},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogClassify=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleTransfer}},[e._v("确 定")])],1)]),i("ispagination",{ref:"ComPagination",attrs:{paginationInfo:e.paginationInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}}),i("com-edit",{ref:"ComEdit",attrs:{tableData:e.tableData,index:e.rowId},on:{refresh:e.refresh}})],1)])},a=[],s=i("5530"),o=i("1da1"),r=(i("96cf"),i("fb6a"),i("99af"),i("4987")),l=i("79d8"),c=i("5181"),u={name:"SensitiveRules",components:{ComEdit:r["a"],ispagination:l["a"]},data:function(){return{transferId:null,value:"",addInput:!1,tabPosition:"left",dialogVisible:!1,dialogFormVisible:!1,loading:!1,newSensitives:"",ifEnable:!0,dialogClassify:!1,optionsClassify:[],searchForm:{keywords:""},typeData:[],typeProps:{children:"children",label:"classify"},tableData:[],infodata:{},rowId:0,paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0,layout:"sizes, prev, pager, next, jumper, total",isquestion:""},total:0}},created:function(){this.getDataList(),this.getTypeDataList()},computed:{tableTypeData:function(){return this.typeData.slice(1)}},methods:{handleTransfer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={id:e.transferId,sid:e.value[0]},console.log(i),t.next=4,Object(c["h"])(i);case 4:n=t.sent,n.ok||e.$message.error("获取分类列表数据失败"),e.$message.success("转移成功"),e.dialogClassify=!1,e.getDataList();case 9:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){e.editInput=!0},handleEditSave:function(e){var t=this;e.editInput=!1;var i={classify:e.classify};this.$http("/auth/repository/classify/".concat(e.id),{params:i}).then((function(e){e.ok&&t.$message.success("修改成功")}))},handleNodeClick:function(e){this.paginationInfo.isquestion="",this.infodata=e,console.log(e),this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},getTypeDataList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var i,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["g"])();case 2:if(i=t.sent,console.log(i),i.ok||e.$message.error("获取分类列表数据失败"),n=[],i.ok)for(a=0;a<i.data.length;a++)n.push({id:i.data[a].id,classify:i.data[a].classify,size:i.data[a].size,editInput:!1}),e.optionsClassify.push({value:i.data[a].id,label:i.data[a].classify});e.typeData=n,e.typeData.unshift({classify:"全部",isdisabled:!0,editInput:!0,id:null});case 9:case"end":return t.stop()}}),t)})))()},handleAdd:function(){this.addInput=!0},newAddclassify:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(c["a"])({classify:e});case 2:n=i.sent,n.ok&&(t.$message.success("修改成功"),t.newSensitives="",t.getTypeDataList()),t.addInput=!1;case 5:case"end":return i.stop()}}),i)})))()},handleDelete:function(e){var t=this;"number"===typeof e&&this.$http("/auth/repository/".concat(e)).then((function(e){e.ok&&(t.$message.success("删除成功"),t.getTypeDataList())})),this.optionsClassify=[]},getDataList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.loading=!0,n={id:t.infodata.id||null,offset:e||1+(t.paginationInfo.currentPage-1)*t.paginationInfo.pageSize,size:t.paginationInfo.pageSize,question:t.paginationInfo.isquestion||null},i.next=4,Object(c["d"])({params:n});case 4:a=i.sent,t.loading=!1,a.ok&&(t.tableData=a.data.rows,t.paginationInfo.total=a.data.count);case 7:case"end":return i.stop()}}),i)})))()},comeinto:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.ifEnable=!t.ifEnable,t.ifEnable?e.ifEnable=1:e.ifEnable=0,i.next=4,t.$http("/auth/repository/oprationRepository?id=".concat(e.id,"&ifEnable=").concat(e.ifEnable));case 4:case"end":return i.stop()}}),i)})))()},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},onEdit:function(e){this.$refs.ComEdit.show(e),this.$refs.ComEdit.isEdit=!0,this.$refs.ComEdit.editForm=Object(s["a"])({},e),console.log(this.$refs.ComEdit.editForm),this.rowId=e.id},onDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$confirm("此操作将永久删除该知识, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(c["b"])(e.id,e.isUse);case 2:n=i.sent,n.ok?t.$message.success("删除成功"):t.$message.error("删除失败"),t.getDataList();case 5:case"end":return i.stop()}}),i)}))));case 1:case"end":return i.stop()}}),i)})))()},onCreate:function(){this.$refs.ComEdit.isEdit=!1,this.$refs.ComEdit.editForm={},this.$refs.ComEdit.editForm.sid=this.infodata.id,this.infodata.id&&-1!==this.infodata.id?this.$refs.ComEdit.editForm.sid=this.infodata.id:this.$refs.ComEdit.editForm.sid=1,this.$refs.ComEdit.show()},onReset:function(){this.searchForm={},this.isTimeRangeShow=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},refresh:function(){this.getDataList()},refreshbtn:function(){this.paginationInfo.isquestion="",this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},transfer:function(e){this.transferId=e.id,this.dialogClassify=!0},handleChange:function(e){console.log(e)},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))}},deactivated:function(){this.$destroy("SensitiveRules")}},d=u,f=(i("4195"),i("2877")),p=Object(f["a"])(d,n,a,!1,null,"83216b1e",null);t["default"]=p.exports}}]);