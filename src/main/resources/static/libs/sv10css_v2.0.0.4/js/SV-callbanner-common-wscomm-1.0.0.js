var socReadyState=0,tryPing=0,retimeout=300,FlashAgentX={loaded:!1,socket:null,isConnected:!1,retry:1,errorCount:1,whenErrorNeedReconnect:!0,reconTimeout:null,isCallIngNum:"",agentRole:"0",logined:!1,tryopen:!1,lastopened:!1},SVCCODE_CHECKIN=1001,SVCCODE_CHECKIN2=1002,SVCCODE_CALLSEAT=1003,SVCCODE_CALLTOUSER=1004,SVCCODE_CALLUSER=1005,SVCCODE_CHECKOUT=1006,SVCCODE_DROPTOUSER=1007,SVCCODE_DROPUSER=1008,SVCCODE_FREESEAT=1009,SVCCODE_GOTOFLOW=1010,SVCCODE_HOLDERUSER=1011,SVCCODE_INMEET=1012,SVCCODE_INSERT=1013,SVCCODE_MONITER=1014,SVCCODE_OFFLINE=1015,SVCCODE_ONLINE=1016,SVCCODE_OUTINSERT=1017,SVCCODE_OUTMEET=1018,SVCCODE_OUTMONITER=1019,SVCCODE_PLAYDTMF=1020,SVCCODE_REGISTAGCINFO=1021,SVCCODE_ROBCALL=1022,SVCCODE_SETBUSY=1023,SVCCODE_STOPCALL=1024,SVCCODE_TOCHECKIN=1025,SVCCODE_TOCHECKOUT=1026,SVCCODE_TRANSSEAT=1027,SVCCODE_UNHOLDERUSER=1028,SVCCODE_RECOVER=1029,SVCCODE_WHISPER=1030,SVCCODE_OUTWHISPER=1031,SVCCODE_TOSETBUSY=1032,SVCCODE_AUTHVERIFY=1100,SVCCODE_HEARTBEAT=1101,SVCCODE_GETAGENTSTATUS=1102,SVCCODE_EVENT_AGENTSTATUS=1103,SVCCODE_EVENT_CALLINFO=1104,SVCCODE_EVENT_RING=1105,SVCCODE_EVENT_ANSWER=1106,SVCCODE_EVENT_HUNGUP=1107,SVCCODE_EVENT_RING3=1108,SVCCODE_EVENT_ANSWER3=1109,SVCCODE_EVENT_HUNGUP3=1110,SVCCODE_EVENT_BECHECKOUT=1111,SVCCODE_GETAGENTMESSAGE=1112,SVCCODE_GETCALLEVENT_STATUS=1113,SVCCODE_GETSTATEEVENT_STATUS=1115,SVCCODE_GETAGENTLIST=2001,SVCCODE_GETENTQUEINFO=2002,SVCCODE_ALLERROR=9999;function consolelog(e){try{console.log(getNowTime1()+"  "+e)}catch(e){}}function switchAcdGate(){""!=FlashAgentX.g_slaveUri&&(FlashAgentX.g_TokenId=uuid(),FlashAgentX.g_uri==FlashAgentX.g_masterUri?FlashAgentX.g_uri=FlashAgentX.g_slaveUri:FlashAgentX.g_uri=FlashAgentX.g_masterUri,FlashAgentX.g_WSUrl=FlashAgentX.g_uri+FlashAgentX.g_TokenId+"/"+FlashAgentX.g_OptId,consolelog("系统切换新的acdgate:"+FlashAgentX.g_WSUrl))}function autoconn(){FlashAgentX.tryopen&&FlashAgentX.connect()}function getNowTime1(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())+"."+e.getMilliseconds()}FlashAgentX.g_WSUrl="",FlashAgentX.g_HostOffMillis=0,FlashAgentX.g_masterUri="",FlashAgentX.g_slaveUri="",FlashAgentX.g_uri="",FlashAgentX.g_OptId="",FlashAgentX.g_extNum="",FlashAgentX.g_entId="",FlashAgentX.g_entpwd="",FlashAgentX.g_agentPwd="",FlashAgentX.g_willdoSendbuff="",FlashAgentX.g_callEvent=null,FlashAgentX.g_callState=null,FlashAgentX.g_TokenId="",FlashAgentX.outsecond=180,FlashAgentX.presrvicecode=0,FlashAgentX.state=-1,FlashAgentX.heartCheck={timeout:8e3,timeoutObj:null,serverTimeoutObj:null,reset:function(){return clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj),this},start:function(){var e=this;this.timeoutObj=setTimeout((function(){FlashAgentX.socket&&1==FlashAgentX.socket.readyState&&(tryPing>=5&&tryPing%5==0?(FlashAgentX.connect(),FlashAgentX.reconnect()):(FlashAgentX.doSend("ping"),consolelog("ping")),tryPing++),e.serverTimeoutObj=setTimeout((function(){FlashAgentX.socket&&3==FlashAgentX.socket.readyState&&FlashAgentX.socket.close()}),retimeout)}),this.timeout)}},FlashAgentX.connect=function(){showSubStatus,showSubStatus("connect "+FlashAgentX.g_WSUrl),FlashAgentX.socket=new WebSocket(FlashAgentX.g_WSUrl),FlashAgentX.socket.onopen=function(){FlashAgentX.doOpen("open")},FlashAgentX.socket.onclose=function(e){consolelog("FlashAgentX.socket.onclose..."),FlashAgentX.doClose(e)},FlashAgentX.socket.onmessage=function(e){FlashAgentX.doMessage(e)},FlashAgentX.socket.onerror=function(e){FlashAgentX.doError(e)}},FlashAgentX.init=function(){try{FlashAgentX.isConnected||(consolelog("FlashAgentX.init:connect"),FlashAgentX.tryopen=!0)}catch(e){try{showSubStatus&&showSubStatus("连接出错:"+e+",url:"+FlashAgentX.g_WSUrl),consolelog("连接出错:"+e+",url:"+FlashAgentX.g_WSUrl)}catch(e){}}},FlashAgentX.reconnect=function(){FlashAgentX.whenErrorNeedReconnect&&!FlashAgentX.isConnected&&(consolelog("开始连接第"+FlashAgentX.retry+++"次"),FlashAgentX.reconTimeout=window.setTimeout(FlashAgentX.init,8e3))},FlashAgentX.doMessage=function(e){tryPing=0,consolelog("doMessage---\x3e"+e);var t=e.data;if(consolelog("doMessage:data---\x3e"+t),socReadyState=1,t.indexOf("pong")>=0){var n=t.split("#&");if(n.length>1){if(FlashAgentX.presrvicecode>0&&FlashAgentX.presrvicecode!=parseInt(n[1]))switch(FlashAgentX.presrvicecode=parseInt(n[1]),FlashAgentX.presrvicecode){case SVCCODE_EVENT_RING:try{onCallState(12),FlashAgentX.state=12}catch(e){}break;case SVCCODE_EVENT_RING3:try{onCallState&&onCallState(15),FlashAgentX.state=15}catch(e){}break;case SVCCODE_EVENT_ANSWER:try{onCallState(3),FlashAgentX.state=3}catch(e){}break;case SVCCODE_EVENT_ANSWER3:try{FlashAgentX.state=3}catch(e){}break;case SVCCODE_EVENT_HUNGUP:try{onCallState(1),FlashAgentX.state=1}catch(e){}break;case SVCCODE_EVENT_HUNGUP3:try{FlashAgentX.state=1}catch(e){}break;case SVCCODE_CHECKIN:case SVCCODE_CHECKIN2:FlashAgentX.logined=!0;try{onLogin&&onLogin(FlashAgentX.g_OptId)}catch(e){}break;case SVCCODE_CHECKOUT:case SVCCODE_EVENT_BECHECKOUT:FlashAgentX.logined=!1;try{onCallState&&onCallState(0),FlashAgentX.state=0,onLogout&&onLogout()}catch(e){}break;case 1007:case 1009:FlashAgentX.unholduser();break;case SVCCODE_HOLDERUSER:try{setButtonStyle("btn_hold_unhold",1,0)}catch(e){}break;case SVCCODE_UNHOLDERUSER:try{setButtonStyle("btn_hold_unhold",0,0)}catch(e){}break;case SVCCODE_INMEET:case SVCCODE_MONITER:onCallState&&onCallState(8),FlashAgentX.state=8}n.length>2&&"ACDGATE"==n[2]&&(consolelog("ACDGATE--pong---\x3e"),FlashAgentX.doSend("ping"))}else if(FlashAgentX.logined){FlashAgentX.logined=!1;try{onCallState&&onCallState(0),FlashAgentX.state=0,onLogout&&onLogout()}catch(e){}alert("网络抖动，请重新签入！")}}else{showSubStatus&&showSubStatus("recive:"+t);var a=JSON.parse(e.data);switch(FlashAgentX.presrvicecode=parseInt(a.head.servicecode),parseInt(a.head.servicecode)){case SVCCODE_EVENT_AGENTSTATUS:OnPlatCallState(a.body.callstate),null!=a.body.agentrole&&""!=a.body.agentrole&&"undefined"!=a.body.agentrole&&(FlashAgentX.agentRole=a.body.agentrole);try{onCallState0&&onCallState0(a.body),showSubStatus,showSubStatus("SVCCODE_EVENT_AGENTSTATUS "+a.body.statetime+"  client:"+(new Date).getTime()+" server:"+a.body.hostmillis),showSubStatus,showSubStatus("SVCCODE_EVENT_AGENTSTATUS  与主机时差ms： "+((new Date).getTime()-a.body.hostmillis))}catch(e){}return;case SVCCODE_GETSTATEEVENT_STATUS:try{showSubStatus,showSubStatus("SVCCODE_GETSTATEEVENT_STATUS client:"+(new Date).getTime()+" server:"+a.body.state.hostmillis),FlashAgentX.g_callEvent=a.body.evt,FlashAgentX.g_callEvent.offts=(new Date).getTime()-Number(FlashAgentX.g_callEvent.hostmillis),onCallState0,onCallState0(a.body.state),1==FlashAgentX.g_callEvent.callstate&&OnRingTime&&OnRingTime(FlashAgentX.g_callEvent)}catch(e){}return void OnPlatCallState(a.body.state);case SVCCODE_AUTHVERIFY:try{FlashAgentX.g_callEvent=a.body;var l=FlashAgentX.g_callEvent.direct,s=FlashAgentX.g_callEvent.caller,o=FlashAgentX.g_callEvent.called,g=FlashAgentX.g_callEvent.usid,c=FlashAgentX.g_callEvent.queueid,h=FlashAgentX.g_callEvent.recfile,A=decodeURIComponent(decodeURIComponent(FlashAgentX.g_callEvent.dataccid));null!=l&&"1"==l?OnAuthSuccess(l,s,g,c,A):OnAuthSuccess(l,o,g,c,A)}catch(e){}return;case SVCCODE_EVENT_RING:try{FlashAgentX.g_callEvent=a.body,FlashAgentX.g_callEvent.offts=(new Date).getTime()-Number(FlashAgentX.g_callEvent.hostmillis),OnRingTime&&OnRingTime(a.body)}catch(e){}onCallState(12),FlashAgentX.state=12;try{l=FlashAgentX.g_callEvent.direct,s=FlashAgentX.g_callEvent.caller,o=FlashAgentX.g_callEvent.called,g=FlashAgentX.g_callEvent.usid,c=FlashAgentX.g_callEvent.queueid,h=FlashAgentX.g_callEvent.recfile,A=decodeURIComponent(decodeURIComponent(FlashAgentX.g_callEvent.dataccid));null!=l&&"1"==l?OnCalling(l,s,g,c,A):OnCalling(l,o,g,c,A)}catch(e){}return;case SVCCODE_EVENT_RING3:try{showSubStatus&&showSubStatus("SVCCODE_EVENT_RING3  "+a.body.called3),FlashAgentX.g_callEvent=a.body,FlashAgentX.g_callEvent.offts=(new Date).getTime()-Number(FlashAgentX.g_callEvent.hostmillis)}catch(e){}return onCallState&&onCallState(15),void(FlashAgentX.state=15);case SVCCODE_EVENT_ANSWER:try{FlashAgentX.g_callEvent=a.body,FlashAgentX.g_callEvent.offts=(new Date).getTime()-Number(FlashAgentX.g_callEvent.hostmillis),OnAnswer&&OnAnswer(a.body)}catch(e){}onCallState(3),FlashAgentX.state=3;try{l=FlashAgentX.g_callEvent.direct,s=FlashAgentX.g_callEvent.caller,o=FlashAgentX.g_callEvent.called,g=FlashAgentX.g_callEvent.usid,c=FlashAgentX.g_callEvent.queueid,h=FlashAgentX.g_callEvent.recfile,A=decodeURIComponent(decodeURIComponent(FlashAgentX.g_callEvent.dataccid));null!=l&&"1"==l?OnCallConnect(l,s,g,c,h,A):OnCallConnect(l,o,g,c,h,A)}catch(e){}return;case SVCCODE_EVENT_ANSWER3:try{FlashAgentX.g_callEvent=a.body,FlashAgentX.g_callEvent.offts=(new Date).getTime()-Number(FlashAgentX.g_callEvent.hostmillis),OnAnswer3&&OnAnswer3(a.body),FlashAgentX.state=3,showSubStatus&&showSubStatus("SVCCODE_EVENT_ANSWER3  "+a.body.called3)}catch(e){}return;case SVCCODE_EVENT_HUNGUP:try{showSubStatus&&showSubStatus("SVCCODE_EVENT_HUNGUP  "+a.body),OnHungupTime&&OnHungupTime(a.body)}catch(e){}onCallState(1),FlashAgentX.state=1;try{l=FlashAgentX.g_callEvent.direct;OnCallHangup(l)}catch(e){}return void(FlashAgentX.g_callEvent=null);case SVCCODE_EVENT_HUNGUP3:try{FlashAgentX.g_callEvent=a.body,FlashAgentX.state=1,FlashAgentX.g_callEvent.offts=(new Date).getTime()-Number(FlashAgentX.g_callEvent.hostmillis),showSubStatus&&showSubStatus("SVCCODE_EVENT_HUNGUP3  "+a.body.called3)}catch(e){}case SVCCODE_CHECKIN:case SVCCODE_CHECKIN2:if(0==a.head.errcode){var r=(new Date).getTime();if(FlashAgentX.g_HostOffMillis=r-Number(a.body.hostmillis),g_logined=1,"110"==a.body.tokenid)return;return FlashAgentX.g_TokenId=a.body.tokenid,g_TokenId=a.body.tokenid,FlashAgentX.logined=!0,onLogin&&onLogin(FlashAgentX.g_OptId)}if(-19200==a.head.errcode)confirm("您的工号已在其他地方签入，要继续签入吗？")&&FlashAgentX.checkin2();else try{showMessage&&showMessage("登录失败:"+a.head.errmsg)}catch(e){}return;case SVCCODE_CHECKOUT:onCallState&&onCallState(0),FlashAgentX.state=0,FlashAgentX.logined=!1;try{onLogout&&onLogout()}catch(e){}return;case SVCCODE_EVENT_BECHECKOUT:onCallState&&onCallState(0),FlashAgentX.state=0,FlashAgentX.logined=!1;try{onLogout&&onLogout()}catch(e){}return;case SVCCODE_CALLUSER:if(window.postMessage(JSON.stringify({type:"OnCallReturn",payload:[a.head.errcode]})),consolelog("呼出失败，errcode ="+a.head.errcode+" errmsg="+a.head.errmsg),"-19200"==a.head.errcode){alert("对不起，系统正在呼出 ，请稍后再试！");try{showMessage&&showMessage("对不起，系统正在呼出 ，请稍后再试！")}catch(e){}return}if("0"!=a.head.errcode){alert("对不起,呼出失败["+a.head.errmsg+"]");try{showMessage&&showMessage("对不起,呼出失败["+a.head.errmsg+"]")}catch(e){}}return;case 1007:case 1009:FlashAgentX.unholduser();break;case SVCCODE_HOLDERUSER:try{setButtonStyle("btn_hold_unhold",1,0)}catch(e){}break;case SVCCODE_UNHOLDERUSER:try{setButtonStyle("btn_hold_unhold",0,0)}catch(e){}break;case SVCCODE_INMEET:case SVCCODE_MONITER:onCallState&&onCallState(8),FlashAgentX.state=8;break;case SVCCODE_GETAGENTLIST:agentlists=a.body,agentgetflag="1";break;case SVCCODE_GETENTQUEINFO:entques=a.body,entgetflag="1"}}},FlashAgentX.doOpen=function(){FlashAgentX.lastopened=!0,FlashAgentX.isConnected=!0,FlashAgentX.tryopen=!1,socReadyState=1,tryPing>=5&&FlashAgentX.doSend("ping"),clearTimeout(FlashAgentX.reconTimeout),FlashAgentX.retry=1,FlashAgentX.heartCheck.reset().start(),""!=FlashAgentX.g_willdoSendbuff&&(FlashAgentX.doSend(FlashAgentX.g_willdoSendbuff),FlashAgentX.g_willdoSendbuff="")},FlashAgentX.doClose=function(e){try{consolelog("FlashAgentX.doClose:"+e)}catch(e){}socReadyState=0;var t=e;if(showSubStatus&&showSubStatus("onclose :"+t.code+" reason:"+t.reason),consolelog("connection closed:reason:"+t.reason+",code:"+t.code),1004!=t.code||"CloseNoActiveClient"==t.reason)FlashAgentX.errorCount++,FlashAgentX.isConnected=!1,FlashAgentX.reconnect();else{FlashAgentX.whenErrorNeedReconnect=!1,onCallState&&onCallState(0),onLogout&&onLogout();try{"checkout"!=t.reason&&alert(t.reason)}catch(e){}}},FlashAgentX.doError=function(){try{showSubStatus&&showSubStatus("socect error "+e)}catch(e){}consolelog(e)},FlashAgentX.doSend=function(e){if(""!=e){if(consolelog("tryPing:"+tryPing+":dosend-----\x3e"+e),1!=FlashAgentX.socket.readyState)return FlashAgentX.g_willdoSendbuff=e,FlashAgentX.whenErrorNeedReconnect=!0,FlashAgentX.errorCount++,FlashAgentX.isConnected=!1,FlashAgentX.connect(),void FlashAgentX.reconnect();if(FlashAgentX.heartCheck.reset().start(),FlashAgentX.socket&&1==FlashAgentX.socket.readyState)try{FlashAgentX.socket.send(e)}catch(e){consolelog("doSend error:"+e)}else FlashAgentX.g_willdoSendbuff=e,FlashAgentX.socket.close(),onsolelog("FlashAgentX.doSend222:connect"),FlashAgentX.tryopen=!0}},FlashAgentX.packHost=function(e,t){if(""==FlashAgentX.g_OptId)return consolelog("pack error "+e+" flashagentx not init !"),"";var n="{"+('"head":{"hostcode":"'+e+'","entid":'+FlashAgentX.g_entId+',"optid":"'+FlashAgentX.g_OptId+'","tokenid":"'+FlashAgentX.g_TokenId+'"}')+","+('"body":'+JSON.stringify(t))+"}";return consolelog("doSend:"+n),n},FlashAgentX.loadConfig=function(e,t,n,a,l,s,o){try{var g=document.getElementsByTagName("p");for(var c in g)"cb_status_box"==g[c].getAttribute("class")&&(g[c].title="V2.0.0.11")}catch(e){}try{FlashAgentX.g_TokenId=FlashAgentX.uuid(),FlashAgentX.g_masterUri=n,FlashAgentX.g_slaveUri=a,FlashAgentX.g_uri=n,FlashAgentX.g_OptId=l,FlashAgentX.g_extNum=o,FlashAgentX.g_entId=e,FlashAgentX.g_entpwd=t,FlashAgentX.g_agentPwd=s,FlashAgentX.g_WSUrl=FlashAgentX.g_uri+FlashAgentX.g_TokenId+"/"+FlashAgentX.g_OptId,FlashAgentX.isConnected||(consolelog("FlashAgentX.loadConfig:connect"),FlashAgentX.tryopen=!0,autoconn(),connectHandler()),consolelog(FlashAgentX.g_WSUrl),FlashAgentX.loaded=!0}catch(e){consolelog("连接出错:"+e+",url:"+FlashAgentX.g_WSUrl)}},FlashAgentX.checkin=function(){var e={hotline:"",pass:FlashAgentX.g_agentPwd,station:FlashAgentX.g_extNum,entpwd:FlashAgentX.g_entpwd,stationtype:0,checkintype:0,outsecond:FlashAgentX.outsecond},t=FlashAgentX.packHost(SVCCODE_CHECKIN,e);FlashAgentX.logined=!0,FlashAgentX.tryopen||0!=socReadyState||(FlashAgentX.tryopen=!0,autoconn()),FlashAgentX.doSend(t)},FlashAgentX.checkin2=function(){var e={hotline:"",pass:FlashAgentX.g_agentPwd,station:FlashAgentX.g_extNum,entpwd:FlashAgentX.g_entpwd,stationtype:0,checkintype:0,outsecond:FlashAgentX.outsecond},t=FlashAgentX.packHost(SVCCODE_CHECKIN2,e);FlashAgentX.tryopen||0!=socReadyState||(FlashAgentX.tryopen=!0,autoconn()),FlashAgentX.doSend(t)},FlashAgentX.online=function(){var e=FlashAgentX.packHost(SVCCODE_ONLINE,{});FlashAgentX.doSend(e)},FlashAgentX.offline=function(){var e=FlashAgentX.packHost(SVCCODE_OFFLINE,{});FlashAgentX.doSend(e)},FlashAgentX.checkout=function(){var e=FlashAgentX.packHost(SVCCODE_CHECKOUT,{});FlashAgentX.logined=!1,FlashAgentX.doSend(e)},FlashAgentX.obtainaenglist=function(e){var t={agentids:e},n=FlashAgentX.packHost(SVCCODE_GETAGENTLIST,t);FlashAgentX.doSend(n)},FlashAgentX.obtainqueinfo=function(e){var t={queid:e},n=FlashAgentX.packHost(SVCCODE_GETENTQUEINFO,t);FlashAgentX.doSend(n)},FlashAgentX.calluser=function(e,t){var n={telno:e,exinfo:t},a=FlashAgentX.packHost(SVCCODE_CALLUSER,n);FlashAgentX.doSend(a)},FlashAgentX.dropcall=function(){var e=FlashAgentX.packHost(SVCCODE_DROPUSER,{});FlashAgentX.doSend(e)},FlashAgentX.makecall=function(e,t){var n=e.replace(/(^\s*)|(\s*$)/g,"");if(FlashAgentX.isCallIngNum==n)return consolelog("Calling "+n+"，稍后再试!");var a=document.getElementById("btn_ready_busy");if(null!=a&&null!=a&&0!=a.fun_value&&"0"!=a.fun_value)return alert("请在空闲状态下外呼！");FlashAgentX.isCallIngNum=n;var l={telno:n,exinfo:t},s=FlashAgentX.packHost(SVCCODE_CALLUSER,l);FlashAgentX.doSend(s),setTimeout((function(){FlashAgentX.isCallIngNum=""}),3e3)},FlashAgentX.consult=function(e,t){var n={telno:e,exinfo:t},a=FlashAgentX.packHost(SVCCODE_CALLTOUSER,n);FlashAgentX.doSend(a)},FlashAgentX.freeseat=function(){var e=FlashAgentX.packHost(SVCCODE_FREESEAT,{});FlashAgentX.doSend(e)},FlashAgentX.droptouser=function(){var e=FlashAgentX.packHost(SVCCODE_DROPTOUSER,{});FlashAgentX.doSend(e)},FlashAgentX.setSeatState=function(e){var t={type:e},n=FlashAgentX.packHost(SVCCODE_SETBUSY,t);FlashAgentX.doSend(n)},FlashAgentX.holduser=function(){FlashAgentX.doSend(FlashAgentX.packHost(SVCCODE_HOLDERUSER,{}))},FlashAgentX.unholduser=function(){FlashAgentX.doSend(FlashAgentX.packHost(SVCCODE_UNHOLDERUSER,{}))},FlashAgentX.transseat=function(){FlashAgentX.doSend(FlashAgentX.packHost(SVCCODE_TRANSSEAT,{}))},FlashAgentX.transcall=function(){FlashAgentX.doSend(FlashAgentX.packHost(SVCCODE_TRANSSEAT,{}))},FlashAgentX.gotoivr=function(e,t,n,a){if(3==FlashAgentX.state){var l=e+":"+t+";"+n+";"+a,s=FlashAgentX.packHost(SVCCODE_GOTOFLOW,{flowno:l});FlashAgentX.doSend(s)}else FlashAgentX.dropcall()},FlashAgentX.inmeet=function(){var e=FlashAgentX.packHost(SVCCODE_INMEET,{});FlashAgentX.doSend(e)},FlashAgentX.outmeet=function(){var e=FlashAgentX.packHost(SVCCODE_OUTMEET,{});FlashAgentX.doSend(e)},FlashAgentX.callseat=function(e){var t=FlashAgentX.packHost(SVCCODE_CALLSEAT,{toseatno:e});FlashAgentX.doSend(t)},FlashAgentX.callseatEx=function(e,t){var n=e+";"+t,a=FlashAgentX.packHost(SVCCODE_CALLSEAT,{toseatno:n});FlashAgentX.doSend(a)},FlashAgentX.transqueue=function(e,t){var n="q:"+e+";"+t,a=FlashAgentX.packHost(SVCCODE_CALLSEAT,{toseatno:n});FlashAgentX.doSend(a)},FlashAgentX.monitor=function(e){var t={toseatno:e};monedagentno=e;var n=FlashAgentX.packHost(SVCCODE_MONITER,t);FlashAgentX.doSend(n)},FlashAgentX.outmoniter=function(e){var t={toseatno:e},n=FlashAgentX.packHost(SVCCODE_OUTMONITER,t);FlashAgentX.doSend(n)},FlashAgentX.insert=function(){var e=FlashAgentX.packHost(SVCCODE_INSERT,{});FlashAgentX.doSend(e)},FlashAgentX.outinsert=function(){var e=FlashAgentX.packHost(SVCCODE_OUTINSERT,{});FlashAgentX.doSend(e)},FlashAgentX.whisper=function(){var e=FlashAgentX.packHost(SVCCODE_WHISPER,{});FlashAgentX.doSend(e)},FlashAgentX.outwhisper=function(){var e=FlashAgentX.packHost(SVCCODE_OUTWHISPER,{});FlashAgentX.doSend(e)},FlashAgentX.robcall=function(){var e=FlashAgentX.packHost(SVCCODE_ROBCALL,{});FlashAgentX.doSend(e)},FlashAgentX.stopcall=function(){var e=FlashAgentX.packHost(SVCCODE_STOPCALL,{});FlashAgentX.doSend(e)},FlashAgentX.tocheckout=function(e){var t={toseatno:e},n=FlashAgentX.packHost(SVCCODE_TOCHECKOUT,t);FlashAgentX.doSend(n)},FlashAgentX.tosetbusy=function(e,t){var n={toseatno:e,type:t},a=FlashAgentX.packHost(SVCCODE_TOSETBUSY,n);FlashAgentX.doSend(a)},FlashAgentX.getAgcListState=function(e){var t={worknos:e};agentgetflag="2";var n=FlashAgentX.packHost(SVCCODE_GETAGENTLIST,t);FlashAgentX.doSend(n)},FlashAgentX.getEntQueueList=function(e){var t={queueid:e};entgetflag="2";var n=FlashAgentX.packHost(SVCCODE_GETENTQUEINFO,t);FlashAgentX.doSend(n)},FlashAgentX.uuid=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},setInterval("autoconn()",1e4);