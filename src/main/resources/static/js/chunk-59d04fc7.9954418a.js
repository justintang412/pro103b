(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59d04fc7"],{"56e1":function(e,t,a){"use strict";a("a4a2")},a4a2:function(e,t,a){},ed82:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[a("el-form",{ref:"Form",attrs:{"label-width":"6em",model:e.form,rules:e.rules}},[a("ui-text-field",{attrs:{label:"公司名称",prop:"companyName"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}}),a("el-form-item",{attrs:{label:"所在地区"}},[a("div",{staticClass:"flexbox"},[a("el-select",{attrs:{placeholder:"选择省份",clearable:""},on:{change:e.onProvinceChange},model:{value:e.form.companyProvinceCode,callback:function(t){e.$set(e.form,"companyProvinceCode",t)},expression:"form.companyProvinceCode"}},e._l(e.provinces,(function(e){return a("el-option",{key:e.provinceCode,attrs:{value:e.provinceCode,label:e.name}})})),1),a("el-select",{attrs:{placeholder:"选择城市",clearable:""},on:{change:e.onCityChange},model:{value:e.form.companyCityCode,callback:function(t){e.$set(e.form,"companyCityCode",t)},expression:"form.companyCityCode"}},e._l(e.cities,(function(e){return a("el-option",{key:e.cityCode,attrs:{value:e.cityCode,label:e.name}})})),1),a("el-select",{attrs:{placeholder:"选择地区",clearable:""},on:{change:e.onAreaChange},model:{value:e.form.companyAreaCode,callback:function(t){e.$set(e.form,"companyAreaCode",t)},expression:"form.companyAreaCode"}},e._l(e.areas,(function(e){return a("el-option",{key:e.areaCode,attrs:{value:e.areaCode,label:e.name}})})),1)],1)]),e.form.dataJson&&e.form.dataJson.length?e._l(e.form.dataJson,(function(t,n){return a("el-form-item",{key:t.fieldId,attrs:{label:t.fieldName,prop:"dataJson."+n+".val",rules:{trigger:t.fieldType>5?null:"blur",required:1===t.requireWrite,message:"该项不能为空"}}},[a("com-field",{attrs:{data:t},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"_.val"}})],1)})):e._e()],2)],1)},r=[],o=a("ade3"),c=a("5530"),i=a("1da1"),s=(a("96cf"),a("e9c4"),a("d3b7"),a("d81d"),a("4de4"),a("ac1f"),a("1276"),a("b0c0"),a("7db0"),a("a02a")),l=a("8c45"),u={components:{ComField:l["a"]},data:function(){var e=this;return{form:{dataJson:[]},provinces:[],cities:[],areas:[],rules:{companyName:Object(s["v"])("请输入公司名称")},modalProps:{width:"500px",title:"新建公司",okText:"新建",onSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:return t.next=4,e.$post("/ccas/cc/company/save",Object(c["a"])(Object(c["a"])({},e.form),{},{dataJson:JSON.stringify(e.form.dataJson.reduce((function(e,t){return Object(c["a"])(Object(c["a"])({},e),{},Object(o["a"])({},t.dataColName,t.val instanceof Array?t.val+"":t.val||""))}),{}))}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getProvinces(),t.next=3,e.getFields();case 3:e.form.dataJson=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{getFields:function(){var e=this;return this.$http("/ccas/cc/field/list",{params:{businessType:2}}).then((function(t){var a=t.data;return a.filter((function(e){return!e.predefinedType&&e.controlState})).map((function(t){var a=e.form[t.dataColName];return[7,9].indexOf(t.fieldType)>-1&&(a=a?a.split(",").filter((function(e){return e})):[]),Object(c["a"])(Object(c["a"])({},t),{},{val:a})}))}))},getProvinces:function(){var e=this;this.$http("/ccas/cc/region/province/list").then((function(t){var a=t.data;e.provinces=a}))},getCities:function(e){var t=this;this.cities=[],e&&this.$http("/ccas/cc/region/city/list/by/".concat(e)).then((function(e){var a=e.data;t.cities=a}))},getAreas:function(e){var t=this;this.areas=[],e&&this.$http("/ccas/cc/region/area/list/by/".concat(e)).then((function(e){var a=e.data;t.areas=a}))},onProvinceChange:function(e){this.form=Object(c["a"])(Object(c["a"])({},this.form),{},{companyCityCode:void 0,companyAreaCode:void 0,companyCity:void 0,companyArea:void 0,companyProvince:e&&this.provinces.find((function(t){return t.provinceCode===e})).name}),this.areas=[],this.getCities(e)},onCityChange:function(e){this.form=Object(c["a"])(Object(c["a"])({},this.form),{},{companyArea:void 0,companyAreaCode:void 0,companyCity:e&&this.cities.find((function(t){return t.cityCode===e})).name}),this.getAreas(e)},onAreaChange:function(e){this.form=Object(c["a"])(Object(c["a"])({},this.form),{},{companyArea:e&&this.areas.find((function(t){return t.areaCode===e})).name})}}},m=u,d=(a("56e1"),a("2877")),f=Object(d["a"])(m,n,r,!1,null,"627f4f54",null);t["default"]=f.exports}}]);