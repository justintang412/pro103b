(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8cea5f72"],{"3a66":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-modal",e._g(e._b({ref:"Modal",scopedSlots:e._u([{key:"footer",fn:function(){return[r("el-button",{on:{click:e.onCancel}},[e._v("关闭")])]},proxy:!0}])},"ui-modal",e.modalProps,!1),e.$listeners),[r("el-form",{ref:"Form",attrs:{"label-width":"12em",model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"全文名称"}},[e._v(e._s(e.row.itemFullName))]),r("el-form-item",{attrs:{label:"馆编电子文档号"}},[e._v(e._s(e.row.globalEItemNo))]),r("el-form-item",{attrs:{label:"部门编电子文档号"}},[e._v(e._s(e.row.departmentEItemNo))]),r("el-form-item",{attrs:{label:"室编电子文档号"}},[e._v(e._s(e.row.eItemNo))]),r("el-form-item",{attrs:{label:"电子文件格式"}},[e._v(e._s(e.row.itemFormat))]),r("el-form-item",{attrs:{label:"电子文件大小"}},[e._v(e._s(e.row.itemSize))]),r("el-form-item",{attrs:{label:"收集日期"}},[e._v(e._s(e.row.receiveDate))]),r("el-form-item",{attrs:{label:"收集人"}},[e._v(e._s(e.row.receiver))]),r("el-form-item",{attrs:{label:"下载文件"}},[r("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.onDownload}},[e._v(e._s(e.row.itemFullName+"."+e.row.itemFormat))])],1)],1)],1)},n=[],i=r("5530"),a=r("1da1"),s=(r("96cf"),r("d3b7"),r("e9c4"),r("d81d"),r("a02a")),l=r("ec26"),u={props:["row"],data:function(){var e=this;return{file:null,users:[],form:{templates:[]},modalProps:{title:"详情",drawer:!0,width:"600px",isEdit:!!this.row,onSubmit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:if(r=e.form,!e.file){t.next=10;break}return o=new FormData,o.append("file",e.file),o.append("itemFullName",r.itemFullName),o.append("receiveDate",r.receiveDate),o.append("receiver",r.receiver),t.abrupt("return",e.$http.post("/sys/item/save",o));case 10:return n="请选择文件",e.$message.error(n),t.abrupt("return",Promise.reject(new Error(n)));case 13:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()},dateOptions:{disabledDate:function(e){return e<new Date}},rules:{itemFullName:Object(s["v"])("请输入电子全文名称"),receiveDate:Object(s["v"])("请输入收集日期"),receiver:Object(s["v"])("请选择收集人")}}},mounted:function(){var e=this.row;this.onReset(e)},methods:{onSubmit:function(){this.form.item_id||(this.form.itemId=Object(l["a"])()),this.$refs.Modal.submit()},onCancel:function(){console.log(this.row),this.$refs.Modal.show(!1)},onReset:function(e){var t=this;this.form=e?Object(i["a"])(Object(i["a"])({},JSON.parse(JSON.stringify(e))),{},{orderFiles:e.orderFiles?e.orderFiles.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{name:t.getFileName(e.fileName)})})):[]}):{}},onChange:function(e){var t=e.target,r=t.files[0];r?this.file=r:this.$message.error("请选择文件")},onSelectFile:function(){this.$refs.File.click()},onDownload:function(){var e=this;Object(s["i"])({fileName:this.row.itemFullName+"."+this.row.itemFormat,action:function(){return e.$post("/sys/item/download",{itemId:e.row.itemId},{responseType:"blob"})}})}}},m=u,c=(r("878d"),r("2877")),f=Object(c["a"])(m,o,n,!1,null,"87742e78",null);t["default"]=f.exports},"878d":function(e,t,r){"use strict";r("d701")},d701:function(e,t,r){},ec26:function(e,t,r){"use strict";var o,n=new Uint8Array(16);function i(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(n)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function s(e){return"string"===typeof e&&a.test(e)}for(var l=s,u=[],m=0;m<256;++m)u.push((m+256).toString(16).substr(1));function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r}var f=c;function d(e,t,r){e=e||{};var o=e.random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=o[n];return t}return f(o)}t["a"]=d}}]);