(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b20f7"],{2300:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({attrs:{columns:e.columns},scopedSlots:e._u([{key:"search",fn:function(){return[e.isSuper?n("el-form-item",{attrs:{label:"选择企业"}},[n("ui-ent-select",{on:{change:function(t){return e.changeEntId(e.searchForm.entId)}},model:{value:e.searchForm.entId,callback:function(t){e.$set(e.searchForm,"entId",t)},expression:"searchForm.entId"}})],1):e._e(),n("ui-text-field",{attrs:{label:"技能组ID/名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.condition,callback:function(t){e.$set(e.searchForm,"condition",t)},expression:"searchForm.condition"}}),n("el-form-item",{attrs:{label:"选择时间范围"}},[n("ui-date-range-picker",{attrs:{type:"datetimerange"},on:{change:e.onTimeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),n("ui-select",{attrs:{label:"技能组",options:e.skillGroups,props:{value:"queueName"},clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.queueName,callback:function(t){e.$set(e.searchForm,"queueName",t)},expression:"searchForm.queueName"}}),n("ui-select",{attrs:{label:"统计周期",options:e.timeUnits},on:{change:e.onSearch},model:{value:e.searchForm.dateType,callback:function(t){e.$set(e.searchForm,"dateType",t)},expression:"searchForm.dateType"}})]},proxy:!0},{key:"actions",fn:function(){return[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",[n("el-button",{attrs:{icon:"el-icon-arrow-down"},on:{click:e.onCustomField}},[e._v("自定义字段")]),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-download"},on:{click:e.exportFile}},[e._v("导出")])],1)])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],o=n("5530"),a=n("3835"),u=n("2909"),l=(n("99af"),n("4de4"),n("d3b7"),n("d81d"),n("e9c4"),n("a02a")),s={name:"FellinOperation",mixins:[window.mixTableView],data:function(){var e=["acdInCount","workAnswerCount","acdGiveupCount","queueGiveupCount","callFailedCount"];return{defaultProps:e,selectedProps:[].concat(e),skillGroups:[],timerange:[],timeUnits:{hour:"按小时统计",day:"按天统计",week:"按周统计",month:"按月统计"},allColumns:[{prop:"acdInCount",label:"呼入数",minWidth:100},{prop:"workAnswerCount",label:"坐席应答总数",minWidth:120},{prop:"acdGiveupCount",label:"排队放弃数",minWidth:120},{prop:"queueGiveupCount",label:"等待放弃数",minWidth:120},{prop:"callFailedCount",label:"呼损总数",minWidth:100},{prop:"acdGiveupAfterTime",label:"放弃前等待时间",minWidth:160,render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.acdGiveupAfterTime))}},{prop:"queueInCount",label:"进入等待电话数",minWidth:140},{prop:"queueTime",label:"等待排队时长",minWidth:140,render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.queueTime))}},{prop:"queueGiveupAfterTime",label:"等待排队放弃前排队时间",minWidth:170,render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.queueGiveupAfterTime))}},{prop:"answerCountAcmTime",label:"接起电话振铃时长",minWidth:140,render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.answerCountAcmTime))}},{prop:"answerCountConnectTime",label:"接起电话通话时长",minWidth:140,render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.answerCountConnectTime))}},{prop:"workGiveupCount",label:"坐席放弃总数",minWidth:120},{prop:"giveupCountTime",label:"放弃电话振铃时长",minWidth:140,render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.giveupCountTime))}}]}},computed:{isSuper:function(){return this.$store.getters.isAdmin},entId:function(){return this.$store.state.userData.entid},columnsFixed:function(){var e=[{label:"时间",prop:"timeType",minWidth:170,fixed:"left",sortable:!0},{label:"技能组ID",prop:"queueid",fixed:"left"},{label:"技能组名称",prop:"name",fixed:"left"}];return this.isSuper?[{label:"企业名称",prop:"entname",minWidth:100,fixed:"left"}].concat(e):e},dataExport:function(){var e=this,t=this.allColumns.filter((function(t){return e.selectedProps.indexOf(t.prop)>-1}));return[].concat(Object(u["a"])(this.columnsFixed),Object(u["a"])(t)).map((function(e){return{fieldName:e.label,field:e.prop}}))},columns:function(){var e=this,t=this.allColumns.filter((function(t){return e.selectedProps.indexOf(t.prop)>-1}));return[].concat(Object(u["a"])(this.columnsFixed),Object(u["a"])(t))}},mounted:function(){var e=this;this.setInitForm();var t=function(){e.getData(),e.getSkillGroups(e.entId)};t(),Object(l["g"])(this,t)},methods:{fetchMethod:function(e){return this.$http("/analysis/acd/queue/get/list",{params:e}).then((function(e){var t=e.data;return t}))},onCustomField:function(){var e=this;this.$openModal("UiFieldCustom",{columns:this.allColumns,defaultProps:this.defaultProps,selectedProps:this.selectedProps,width:"800px"},{success:function(t){e.selectedProps=t}})},setInitForm:function(){var e=Object(l["o"])(),t=Object(a["a"])(e,2),n=t[0],i=t[1];this.timerange=[n,i],this.tableForm={dateUnitType:"second",dateType:"hour",entId:this.entId,beginDate:+n,endDate:+i},this.searchForm=Object(o["a"])({},this.tableForm)},onTimeChange:function(e){var t=e||[],n=Object(a["a"])(t,2),i=n[0],r=n[1];this.searchForm.beginDate=i&&new Date(i).getTime(),this.searchForm.endDate=r&&new Date(r).getTime(),this.onSearch()},exportFile:function(){var e=this;this.$confirm("您当前导出数据为该筛选条件下的所有数据,请点击确定,继续导出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(e.tableData.total>5e4)return e.$confirm("当前导出数据量超过最大限制(50000条),请重新筛选数据后重试","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});Object(l["i"])({fileName:"呼损数据分析表.xls",action:function(){return e.$post("/analysis/acd/queue/export",Object(o["a"])(Object(o["a"])({},e.searchForm),{},{fieldJson:JSON.stringify(e.dataExport)}),{responseType:"blob"}).then((function(e){return new Blob([e])}))}})}))},changeEntId:function(e){this.onSearch(),this.getSkillGroups(e)},getSkillGroups:function(e){var t=this;this.skillGroups=[],this.searchForm.queueName="",this.$http("/queue/getAllQueueNoPage",{params:{entId:e}}).then((function(e){var n=e.data;t.skillGroups=n}))}}},c=s,p=n("2877"),d=Object(p["a"])(c,i,r,!1,null,null,null);t["default"]=d.exports}}]);