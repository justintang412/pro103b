(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8bd6"],{"8b0f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("el-form-item",{attrs:{label:"日期"}},[n("ui-date-range-picker",{attrs:{clearable:!1},on:{change:e.onTimeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),n("ui-select",{attrs:{label:"分类"},on:{change:e.onSearch},model:{value:e.searchForm.level,callback:function(t){e.$set(e.searchForm,"level",t)},expression:"searchForm.level"}},[n("el-option",{attrs:{value:1,label:"一级分类"}}),n("el-option",{attrs:{value:2,label:"二级分类"}}),n("el-option",{attrs:{value:3,label:"三级分类"}}),n("el-option",{attrs:{value:4,label:"四级分类"}}),n("el-option",{attrs:{value:5,label:"五级分类"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[n("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(t){return e.onBatchExport(e.searchForm)}}},[e._v("导出报表")])]},proxy:!0}])},"ui-table-view",Object.assign({},e.viewProps,{hidePager:!0}),!1),e.viewListeners))},i=[],o=n("3835"),l=n("5530"),r=(n("4de4"),n("d3b7"),n("a02a")),s={name:"StatisticsWorkorderClassification",mixins:[window.mixTableView],data:function(){return{timerange:[]}},computed:{columns:function(){var e=this.searchForm.level;return[{label:1===e?"一级分类":"所属一级分类",prop:"level1",minWidth:120},e>=2&&{label:2===e?"二级分类":"所属二级分类",prop:"level2",minWidth:120},e>=3&&{label:3===e?"三级分类":"所属三级分类",prop:"level3",minWidth:120},e>=4&&{label:4===e?"四级分类":"所属四级分类",prop:"level4",minWidth:120},e>=5&&{label:"五级分类",prop:"level5",minWidth:100},{label:"创建工单数",prop:"countCreates"},{label:"已解决",prop:"countResolves",minWidth:80},{label:"工单解决率",prop:"resolutionRate"},{label:"已关闭",prop:"countCloses",minWidth:80},{label:"工单关闭率",prop:"closeRate"},{label:"尚未受理",prop:"countUnAccepts",minWidth:80},{label:"受理中",prop:"countAccept",minWidth:80},{label:"等待回复",prop:"countForReply",minWidth:80}].filter((function(e){return e}))}},mounted:function(){this.setInitForm(),this.getData(),Object(r["g"])(this,this.getData)},methods:{setInitForm:function(){var e=this.$adminCore.formatDate(new Date,"yyyy-MM-dd");this.timerange=[e,e];var t={beginTime:e,endTime:e,level:1};this.searchForm=t,this.tableForm=Object(l["a"])({},t)},fetchMethod:function(e){return this.$http("/orderSortStatistics/getStatistics",{params:e}).then((function(e){var t=e.data;return{list:t}}))},onTimeChange:function(e){var t=e||[],n=Object(o["a"])(t,2),a=n[0],i=n[1];this.searchForm.beginTime=a,this.searchForm.endTime=i,this.onSearch()},onBatchExport:function(e){var t=this;Object(r["i"])({fileName:"工单分类统计报表.xls",action:function(){return t.$http("/orderSortStatistics/exportExcel",{params:e,responseType:"blob"})}})}}},c=s,p=n("2877"),u=Object(p["a"])(c,a,i,!1,null,null,null);t["default"]=u.exports}}]);