(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68b137f4"],{"0e48":function(e,t,r){"use strict";r("d7c0")},"19b6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-modal",e._g(e._b({ref:"Modal"},"ui-modal",e.modalProps,!1),e.$listeners),[r("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"actions",fn:function(){return[r("div",{staticClass:"flexbox"},[r("el-button",{attrs:{disabled:!e.selectedRow.length,type:"primary"},on:{click:function(t){return e.onInvite(e.selectedRow)}}},[e._v("批量邀请")]),r("span",{staticClass:"spring"}),r("span",{staticClass:"refresh-time"},[e._v("刷新于"+e._s(e.refreshTime))]),r("el-button",{staticClass:"btn-refresh",attrs:{type:"text",icon:"el-icon-refresh"},on:{click:function(t){return e.getData()}}},[e._v("刷新")])],1)]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))],1)},a=[],i=r("5530"),s=r("1da1"),o=(r("d81d"),r("96cf"),r("a02a")),c=r("934a"),u={mixins:[window.mixTableView],data:function(){var e=this;return{refreshTime:null,modalProps:{title:"邀请会话",width:"900px",hideFooter:!0},columns:[{type:"selection"},{label:"客户昵称",prop:"nickname"},{label:"城市",prop:"city"},{label:"来源",prop:"channel"},{label:"技能组",prop:""},{label:"备注",prop:""},{label:"等待时长",render:function(e,t){var r=t.row;return e("div",Object(o["k"])(r.waittingtime,1))}},{label:"操作",fixed:"right",width:100,render:function(t,r){var n=r.row;return t("div",{class:"ui-text-btns"},[t("el-button",{props:{type:"text"},on:{click:e.onInvite.bind(e,n)}},"邀请")])}}]}},computed:{user:function(){return this.$store.getters.imUser}},mounted:function(){this.getData()},methods:{fetchMethod:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.refreshTime=t.$adminCore.formatDate(new Date,"HH:mm:ss"),r.next=3,t.$imHttp("/service/quene/list",{params:Object(i["a"])(Object(i["a"])({},e),{},{orgi:t.user.orgi})});case 3:return n=r.sent,a=n.data,r.abrupt("return",{data:a.records,total:a.total});case 6:case"end":return r.stop()}}),r)})))()},onInvite:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$store.state.im.imState!==c["f"].OFFLINE.value){r.next=2;break}return r.abrupt("return",t.$message.warning("你处于离线状态，不能邀请客户"));case 2:return r.prev=2,r.next=5,t.$confirm("确定邀请所选用户加入会话吗？","邀请");case 5:return t.loading=!0,e instanceof Array||(e=[e]),r.next=9,t.$imHttp("/service/queue/invite",{params:Object(i["a"])(Object(i["a"])({},t.user),{},{ids:e.map((function(e){return e.id}))+""})});case 9:t.$refs.Modal.show(!1),t.$emit("success"),r.next=15;break;case 13:r.prev=13,r.t0=r["catch"](2);case 15:t.loading=!1;case 16:case"end":return r.stop()}}),r,null,[[2,13]])})))()}}},l=u,p=(r("0e48"),r("2877")),d=Object(p["a"])(l,n,a,!1,null,"674027fd",null);t["default"]=d.exports},d7c0:function(e,t,r){}}]);