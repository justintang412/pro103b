(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43060104"],{"493f":function(t,e,a){},"65f5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ui-table-view",t._g(t._b({on:{"row-click":t.onRowClick},scopedSlots:t._u([{key:"search",fn:function(){return[a("el-form-item",{attrs:{label:"质检时间"}},[a("ui-date-range-picker",{attrs:{clearable:!1},on:{change:t.onSearch},model:{value:t.timerange,callback:function(e){t.timerange=e},expression:"timerange"}})],1),a("el-form-item",{attrs:{label:"会话开始时间"}},[a("ui-date-range-picker",{attrs:{clearable:!1},on:{change:t.onSearch},model:{value:t.timerange2,callback:function(e){t.timerange2=e},expression:"timerange2"}})],1),a("ui-select",{attrs:{label:"质检方案",clearable:"",filterable:""},on:{change:t.onSearch},model:{value:t.searchForm.programmeId,callback:function(e){t.$set(t.searchForm,"programmeId",e)},expression:"searchForm.programmeId"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.companyId}})})),1)]},proxy:!0},{key:"actions",fn:function(){return[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"el-icon-download"},on:{click:t.onExport}},[t._v("导出质检报表")]),a("el-alert",{attrs:{type:"info",closable:!1,title:"共 "+t.sessionStatistics.ttlCon+"条会话记录有效会话数 "+t.sessionStatistics.valid+" 条已质检 "+t.sessionStatistics.alreadyQC+" 条质检率 "+t.sessionStatistics.QCRate+"本次抽样 "+t.sessionStatistics.sampling+" 条"}})]},proxy:!0}])},"ui-table-view",t.viewProps,!1),t.viewListeners),[a("com-filter",{ref:"ComFilter",attrs:{slot:"search-right","online-skills":t.onlineSkills,users:t.users},on:{show:t.onFilterShow,reset:t.onReset,search:t.onPopSearch},slot:"search-right"})],1)},s=[],i=a("5530"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-popover",{on:{show:function(e){return t.$emit("show")}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("el-button",{staticClass:"btn-filter",attrs:{slot:"reference",type:"text",icon:"el-icon-s-operation"},slot:"reference"},[t._v("筛选条件")]),a("div",{staticClass:"wrapper"},[a("el-form",{attrs:{"label-width":"7em"}},[a("div",{staticClass:"flexbox col-2"},[a("ui-select",{attrs:{label:"被质检人",options:t.users,props:{value:"userId",label:"name"},filterable:"",clearable:""},model:{value:t.form.qualityPersion,callback:function(e){t.$set(t.form,"qualityPersion",e)},expression:"form.qualityPersion"}}),a("ui-select",{attrs:{label:"咨询渠道",clearable:""},model:{value:t.form.channelType,callback:function(e){t.$set(t.form,"channelType",e)},expression:"form.channelType"}},[a("el-option",{attrs:{label:"微信",value:"weixin"}}),a("el-option",{attrs:{label:"微博",value:"weibo"}}),a("el-option",{attrs:{label:"网页",value:"webim"}}),a("el-option",{attrs:{label:"app",value:"app"}})],1),a("ui-select",{attrs:{label:"满意度评分",multiple:"",clearable:""},model:{value:t.form.satisfaction,callback:function(e){t.$set(t.form,"satisfaction",e)},expression:"form.satisfaction"}},[a("el-option",{attrs:{label:"5星",value:"5"}}),a("el-option",{attrs:{label:"4星",value:"4"}}),a("el-option",{attrs:{label:"3星",value:"3"}}),a("el-option",{attrs:{label:"2星",value:"2"}}),a("el-option",{attrs:{label:"1星",value:"1"}})],1),a("ui-select",{attrs:{label:"申诉状态",clearable:""},model:{value:t.form.appealType,callback:function(e){t.$set(t.form,"appealType",e)},expression:"form.appealType"}},[a("el-option",{attrs:{label:"未申诉",value:"0"}}),a("el-option",{attrs:{label:"申诉中",value:"1"}}),a("el-option",{attrs:{label:"驳回",value:"2"}}),a("el-option",{attrs:{label:"已重检",value:"3"}})],1),a("ui-select",{attrs:{label:"技能组",options:t.onlineSkills,props:{value:"id",label:"name"},multiple:"",clearable:"",filterable:""},on:{change:t.onChangeSkill},model:{value:t.form.agentSkill,callback:function(e){t.$set(t.form,"agentSkill",e)},expression:"form.agentSkill"}}),a("ui-select",{attrs:{label:"人工客服",options:t.onlineUsers,props:{key:"id",value:"agentno",label:"name"},multiple:"",clearable:""},model:{value:t.form.seatId,callback:function(e){t.$set(t.form,"seatId",e)},expression:"form.seatId"}}),a("el-form-item",{attrs:{label:"标准分得分"}},[a("el-col",{attrs:{span:11}},[a("el-input",{model:{value:t.form.standTotalStart,callback:function(e){t.$set(t.form,"standTotalStart",e)},expression:"form.standTotalStart"}})],1),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),a("el-col",{attrs:{span:11}},[a("el-input",{model:{value:t.form.standTotalEnd,callback:function(e){t.$set(t.form,"standTotalEnd",e)},expression:"form.standTotalEnd"}})],1)],1),a("el-form-item",{attrs:{label:"总得分"}},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"请选择"},model:{value:t.form.totalScoreStart,callback:function(e){t.$set(t.form,"totalScoreStart",e)},expression:"form.totalScoreStart"}})],1),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"请选择"},model:{value:t.form.totalScoreEnd,callback:function(e){t.$set(t.form,"totalScoreEnd",e)},expression:"form.totalScoreEnd"}})],1)],1),a("el-form-item",{attrs:{label:"附加分得分"}},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"请选择"},model:{value:t.form.addScoreStart,callback:function(e){t.$set(t.form,"addScoreStart",e)},expression:"form.addScoreStart"}})],1),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"请选择"},model:{value:t.form.addScoreEnd,callback:function(e){t.$set(t.form,"addScoreEnd",e)},expression:"form.addScoreEnd"}})],1)],1)],1)]),a("div",{staticClass:"btn-group"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onReset}},[t._v("重置")]),a("el-button",{on:{click:t.hide}},[t._v("取消")])],1)],1)],1)},o=[],r={props:["onlineSkills","users"],data:function(){return{form:{},onlineUsers:[],visible:!1}},mounted:function(){this.getOnlineUsers([])},methods:{show:function(t){this.form=Object(i["a"])({},t)},hide:function(){this.visible=!1},onChangeSkill:function(t){this.$set(this.form,"seatId",[]),this.getOnlineUsers(t)},getOnlineUsers:function(t){var e=this;this.$imHttp.post("/skill/multiSkillCustList",{skillIds:t,orgi:this.$store.state.userData.entid}).then((function(t){var a=t.data;e.onlineUsers=a}))},onSearch:function(){this.hide(),this.$emit("search",this.form)},onReset:function(){this.hide(),this.$emit("reset")}}},c=r,u=(a("7e83"),a("2877")),m=Object(u["a"])(c,l,o,!1,null,"31fcb228",null),p=m.exports,h=a("c035"),d=a("a02a"),f={name:"QualitySessionResultQuery",mixins:[window.mixTableView,h["a"]],components:{ComFilter:p},data:function(){return{timerange:[],timerange2:[],viewsType:2,columns:[{label:"客户昵称",prop:"customerName",minWidth:120},{label:"会话开始时间",prop:"speakingTime",minWidth:140},{label:"被质检客服",prop:"seatName"},{label:"标准分得分",prop:"standScore"},{label:"附加分得分",prop:"addScore"},{label:"总得分",prop:"totalScore"},{label:"质检标签",prop:"qualityLabel"},{label:"质检时间",prop:"qualityTime",minWidth:140},{label:"质检人",prop:"qualityPersion",minWidth:120}]}},mounted:function(){var t=this;this.setInitForm();var e=function(){t.getData(),t.getOptionsData(),t.getOnlineSkills(),t.getUsers()};e(),Object(d["g"])(this,e)},methods:{setInitForm:function(){var t=this.$adminCore.formatDate(new Date,"yyyy-MM-dd");this.timerange=[t,t],this.timerange2=[t,t],this.searchForm={},this.tableForm={}},onExport:function(){var t=this,e=Object(i["a"])(Object(i["a"])({},this.searchForm),{},{conStartDay:this.timerange2[0],conEndDay:this.timerange2[1],qualityStartDay:this.timerange[0],qualityEndDay:this.timerange[1],agentSkill:(this.searchForm.agentSkill||"")+"",seatId:(this.searchForm.seatId||"")+"",entId:this.entId});e.programmeId?Object(d["i"])({fileName:"质检结果数据导出.xls",action:function(){return t.$http("quality/result/export",{params:e,responseType:"blob"})}}):this.$message.info("请先选择质检方案")},fetchMethod:function(t){return t=Object(i["a"])(Object(i["a"])({},t),{},{conStartDay:this.timerange2[0],conEndDay:this.timerange2[1],qualityStartDay:this.timerange[0],qualityEndDay:this.timerange[1],agentSkill:(t.agentSkill||"")+"",seatId:(t.seatId||"")+"",entId:this.entId}),this.getSessionStatistics({conversationEndDay:t.conStartDay,conversationStartDay:t.conEndDay,entId:this.entId}),this.$http.post("/quality/result/getQualityResult",t).then((function(t){var e=t.data;return e}))}}},b=f,v=Object(u["a"])(b,n,s,!1,null,null,null);e["default"]=v.exports},"7e83":function(t,e,a){"use strict";a("493f")},c035:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("5530"),s=a("3835"),i=(a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("b64b"),{data:function(){return{show:!1,options:[],users:[],channels:{weixin:"微信",weibo:"微博",webim:"网页",app:"app"},handleTypes:{inservice:"服务中",end:"结束",inqueue:"队列中"},onlineUsers:[],onlineSkills:[],sessionStatistics:{}}},computed:{entId:function(){return this.$store.state.userData.entid}},methods:{getOptionsData:function(){var t=this;this.$http("/quality/programme/getAllProgramme",{params:{entId:this.entId}}).then((function(e){e=e.data,t.options=e.params}))},getSessionStatistics:function(t){var e=this;this.$http("/quality/statistics/summary",{params:t}).then((function(t){var a=t.data;e.sessionStatistics=a}))},getUsers:function(){var t=this;this.$http("/ccas/auth/user/list?entId=".concat(this.entId)).then((function(e){t.users=e.data}))},onRowClick:function(t){this.$openModal((function(){return Promise.all([a.e("chunk-45682ea3"),a.e("chunk-422b85c9"),a.e("chunk-4642dcbf"),a.e("chunk-74d195c1")]).then(a.bind(null,"218b"))}),{row:t,viewsType:this.viewsType,options:this.options,programId:this.searchForm.programId,store:this.$store,router:this.$router},{close:this.getData.bind(this)})},onTimeChange:function(t){var e=this.$adminCore.formatDate(new Date,"yyyy-MM-dd"),a=t||[e,e],n=Object(s["a"])(a,2),i=n[0],l=n[1];this.searchForm.beginTime=i,this.searchForm.endTime=l,this.onSearch()},onFilterShow:function(){this.$refs.ComFilter.show(this.searchForm)},getQualityStatusText:function(t){return{1:"未质检",2:"已质检",3:"未申诉",4:"申诉中",5:"驳回",6:"已重检"}[t]||""},onPopSearch:function(t){this.searchForm=Object(n["a"])({},t),this.tableForm=Object(n["a"])({},t),this.onSearch()},getOnlineSkills:function(){var t=this;this.$imHttp("/skill/list",{params:{orgi:this.entId}}).then((function(e){var a=e.data;t.onlineSkills=a}))},onChangeSkill:function(t){this.$set(this.searchForm,"seatId",[]),this.onSearch(),this.getOnlineUsers(t)},getOnlineUsers:function(t){var e=this;this.$imHttp.post("/skill/multiSkillCustList",{skillIds:t,orgi:this.entId}).then((function(t){var a=t.data;e.onlineUsers=a}))},checkValue:function(t){return Object.keys(t).forEach((function(e){"undefined"!==t[e]&&""!==t[e]||delete t[e]})),t}}})}}]);