(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72070027"],{"3d78":function(t,e,i){},4411:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com-sckm-article"},[i("SckmTitleBar",{attrs:{noBorder:"",label:t.itemDetail.title}}),i("div",{staticClass:"com-sckm-article--body"},[i("div",{staticClass:"com-sckm-article--left-wrap"},[t.data.errmsg?i("el-alert",{attrs:{type:"error",title:"查看出错",description:t.data.errmsg,"show-icon":"",closable:!1}}):[i("div",{staticClass:"com-sckm-article--info"},[i("div",{staticClass:"userinfo"},[i("el-avatar",{staticClass:"avator",attrs:{icon:"el-icon-user-solid",size:"small"}}),i("span",{staticClass:"username"},[t._v(t._s(t.itemDetail.authorName))])],1),i("p",{staticClass:"date"},[i("span",[t._v(t._s(t.itemDetail.modifyTime))]),i("span",[t._v("收藏："+t._s(t.data.collectionCount))])])]),i("div",{staticClass:"ql-snow"},[i("div",{staticClass:"ql-editor",domProps:{innerHTML:t._s(t.data.context)}})]),i("ComAttachList",{attrs:{value:t.annexFilePath},on:{"item-click":t.handleAttachClick}})]],2),t.canCollect?i("div",{staticClass:"com-sckm-article--right-wrap"},[i("ComCircleButton",{staticClass:"btn-collect",attrs:{toggle:"",checked:!!t.data.itemCollectionId,icon:"el-icon-star-on",label:"收藏"},on:{click:t.toggleCollect}})],1):t._e()])],1)},l=[],n=(i("d3b7"),i("6f5a")),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{class:[t.prefix,{toggle:t.toggle,checked:t.checked}],on:{click:function(e){return t.$emit("click",e)}}},[i("i",{class:[t.icon,"icon"]}),i("span",{class:t.prefix+"--label"},[t._v(t._s(t.label))])])},s=[],o={data:function(){return{prefix:"com-sckm-circlebutton"}},props:{toggle:Boolean,icon:String,label:String,checked:Boolean}},r=o,d=(i("d98f"),i("2877")),u=Object(d["a"])(r,c,s,!1,null,null,null),m=u.exports,f={components:{ComAttachList:n["a"],ComCircleButton:m},data:function(){return{loading:!1}},props:{data:{type:Object,default:function(){return{}}},canCollect:{type:Boolean,default:!0}},computed:{annexFilePath:function(){return this.data.annexFilePath||[]},itemDetail:function(){return this.data.itemDetail||{}}},methods:{handleAttachClick:function(t){location.href="sckm/item/downloadFileById?itemFileId=".concat(this.data.itemFileIds[t])},toggleCollect:function(){var t=this;if(!this.loading){this.loading=!0;var e=this.data,i=e.itemCollectionId,a=e.itemDetail,l=e.collectionCount,n=void 0===l?0:l;this.$post("sckm/item/coll/collection",{itemId:a.itemId,addOrDel:+!!i,itemCollectionId:i}).then((function(e){var a=e.data;t.$set(t.data,"itemCollectionId",i?"":a),t.$set(t.data,"collectionCount",i?n-1:n+1)})).finally((function(){t.loading=!1}))}}}},h=f,p=(i("fae8"),Object(d["a"])(h,a,l,!1,null,null,null));e["a"]=p.exports},"450e":function(t,e,i){"use strict";i("9b35")},"5e49":function(t,e,i){"use strict";i("3d78")},"6f5a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com-sckm-attachlist"},[i("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",multiple:""},on:{change:t.handleFileChange}}),i("ul",[t._l(t.list,(function(e,a){return i("li",{key:a,class:{editMode:t.editMode},attrs:{title:t.getTitle(e)},on:{click:function(e){return t.handleItemClick(a)}}},[i("div",{staticClass:"image"},[i("i",{staticClass:"el-icon-document"}),t.editMode?i("el-link",{staticClass:"icon-delete",attrs:{icon:"el-icon-error",type:"warning",underline:!1},on:{click:function(e){return t.handleDelete(a)}}}):t._e()],1),i("div",{staticClass:"title"},[t._v(t._s(t.getFileName(e)))])])})),t.editMode&&t.list.length<10?i("li",{staticClass:"btn-add",attrs:{title:"添加附件"},on:{click:t.handleAdd}},[i("i",{staticClass:"el-icon-plus"})]):t._e()],2)])},l=[],n=i("2909"),c=(i("a434"),i("d3b7"),i("159b"),i("fb6a"),i("99af"),{data:function(){return{list:this.value}},props:{value:{type:Array,default:function(){return[]}},editMode:Boolean},watch:{value:function(t){this.list=t},list:function(t){this.$emit("input",t)}},methods:{getFileName:function(t){return window.sckm.getFileName(t)},getTitle:function(t){var e=this.getFileName(t);return this.editMode?e:"下载附件: ".concat(e)},handleDelete:function(t){this.list.splice(t,1)},removeMaxFiles:function(t){var e={pass:[],limit:[]},i=function(t){return t.size>104857600};return Object(n["a"])(t).forEach((function(t){e[i(t)?"limit":"pass"].push(t)})),e},handleFileChange:function(t){var e=t.target,i=e.files,a=this.removeMaxFiles(i);a.limit.length&&this.$message.error("请选择小于100M的文件."),this.list=[].concat(Object(n["a"])(this.list),Object(n["a"])(a.pass)).slice(0,10),e.value=""},handleAdd:function(){this.$refs.File.click()},handleItemClick:function(t){this.$emit("item-click",t)}}}),s=c,o=(i("f944"),i("2877")),r=Object(o["a"])(s,a,l,!1,null,null,null);e["a"]=r.exports},"9b35":function(t,e,i){},b048:function(t,e,i){},d35d:function(t,e,i){},d98f:function(t,e,i){"use strict";i("b048")},e34f:function(t,e,i){},f944:function(t,e,i){"use strict";i("e34f")},fa7d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SckmMainLayout",{staticClass:"page-sckm-mycollect"},[i("ComList",{ref:"ComList",attrs:{slot:"left",data:t.data,activedItem:t.activedItem},on:{"on-click":t.handleItemClick},slot:"left"}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.details?i("ComArticle",{attrs:{data:t.details}}):t._e()],1)],1)},l=[],n=i("5530"),c=(i("d3b7"),i("4411")),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com-sckm-mycollect-list"},[i("SckmTitleBar",{attrs:{label:"收藏列表"}},[i("a",{staticClass:"btn-export",class:{disabled:t.disabled},on:{click:t.handleExport}},[t._v("导出")])]),i("el-checkbox-group",{model:{value:t.checkedIds,callback:function(e){t.checkedIds=e},expression:"checkedIds"}},[i("ul",{staticClass:"com-sckm-mycollect-list--list"},t._l(t.data,(function(e){return i("li",{key:e.itemId,class:{active:t.activedItem===e}},[i("el-checkbox",{attrs:{label:e.itemId}}),i("span",{staticClass:"label",on:{click:function(i){return t.handleItemClick(e)}}},[t._v(t._s(e.title))])],1)})),0)])],1)},o=[],r=(i("a15b"),i("a02a")),d={data:function(){return{checkedIds:[]}},props:{data:{type:Array,default:function(){return[]}},activedItem:Object},computed:{disabled:function(){return!this.checkedIds.length}},methods:{handleItemClick:function(t){this.$emit("on-click",t)},handleExport:function(){var t=this;this.disabled||Object(r["i"])({fileName:"收藏数据导出.xls",action:function(){return t.$http("/sckm/item/export?itemIds=".concat(t.checkedIds.join(",")),{responseType:"blob"})}})},clearChecked:function(){this.checkedIds=[]}}},u=d,m=(i("450e"),i("2877")),f=Object(m["a"])(u,s,o,!1,null,null,null),h=f.exports,p={components:{ComList:h,ComArticle:c["a"]},data:function(){return{data:[],details:null,activedItem:null,loading:!1}},deactivated:function(){this.$refs.ComList.clearChecked()},mounted:function(){this.getInitData()},methods:{getInitData:function(){var t=this;this.getData().then((function(){t.data&&t.data.length&&t.handleItemClick(t.data[0])}))},getData:function(){var t=this;return this.$http("/sckm/item/coll/list").then((function(e){var i=e.data;t.data=i}))},handleItemClick:function(t){var e=this;this.activedItem=t,this.loading=!0,this.$http("/sckm/item/query/detail/".concat(t.itemId)).then((function(t){var i=t.data;e.details=i})).catch((function(i){e.details=e.getDetaultDetails(Object(n["a"])(Object(n["a"])({},t),{},{errmsg:i.message}))})).finally((function(){e.loading=!1}))},getDetaultDetails:function(t){return{errmsg:t.errmsg,itemCollectionId:t.itemCollectionId,itemDetail:{itemId:t.itemId,title:t.title}}}}},v=p,k=(i("5e49"),Object(m["a"])(v,a,l,!1,null,null,null));e["default"]=k.exports},fae8:function(t,e,i){"use strict";i("d35d")}}]);