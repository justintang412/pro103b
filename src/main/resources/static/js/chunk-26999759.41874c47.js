(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26999759"],{1148:function(e,t,n){"use strict";var i=n("da84"),a=n("5926"),r=n("577e"),c=n("1d80"),o=i.RangeError;e.exports=function(e){var t=r(c(this)),n="",i=a(e);if(i<0||i==1/0)throw o("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"408a":function(e,t,n){var i=n("e330");e.exports=i(1..valueOf)},b04a:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({attrs:{columns:e.columns},scopedSlots:e._u([{key:"search",fn:function(){return[e.isSuper?n("el-form-item",{attrs:{label:"选择企业"}},[n("ui-ent-select",{on:{change:function(t){return e.changeEntId(e.searchForm.entId)}},model:{value:e.searchForm.entId,callback:function(t){e.$set(e.searchForm,"entId",t)},expression:"searchForm.entId"}})],1):e._e(),n("el-form-item",{attrs:{label:"选择时间范围"}},[n("ui-date-range-picker",{attrs:{type:"datetimerange"},on:{change:e.onTimeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),"statistics"===e.activedTab?n("ui-text-field",{attrs:{label:"工号/姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.condition,callback:function(t){e.$set(e.searchForm,"condition",t)},expression:"searchForm.condition"}}):e._e(),n("ui-select",{attrs:{label:"技能组",options:e.skillGroups,props:{value:"queueName"},filterable:"",clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.queueName,callback:function(t){e.$set(e.searchForm,"queueName",t)},expression:"searchForm.queueName"}}),n("ui-select",{attrs:{label:"统计周期",options:e.timeUnits},on:{change:e.onSearch},model:{value:e.searchForm.dateType,callback:function(t){e.$set(e.searchForm,"dateType",t)},expression:"searchForm.dateType"}}),n("ui-select",{attrs:{label:"呼叫类型",options:e.callType},on:{change:e.onSearch},model:{value:e.searchForm.callType,callback:function(t){e.$set(e.searchForm,"callType",t)},expression:"searchForm.callType"}})]},proxy:!0},{key:"actions",fn:function(){return[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.exportFile}},[e._v("导出")])],1),n("el-tabs",{on:{"tab-click":e.onSearch},model:{value:e.activedTab,callback:function(t){e.activedTab=t},expression:"activedTab"}},[n("el-tab-pane",{attrs:{label:"统计表",name:"statistics"}}),n("el-tab-pane",{attrs:{label:"汇总表",name:"summary"}})],1)]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},a=[],r=n("5530"),c=n("3835"),o=n("2909"),s=(n("b680"),n("99af"),n("a02a")),l={name:"DirectDialStatistic",mixins:[window.mixTableView],data:function(){return{skillGroups:[],timerange:[],activedTab:"statistics",timeUnits:{minus:"按分钟统计",hour:"按小时统计",day:"按天统计",week:"按周统计",month:"按月统计"},callType:{0:"呼出",1:"呼入"}}},computed:{isSuper:function(){return this.$store.getters.isAdmin},entId:function(){return this.$store.state.userData.entid},columns:function(){var e,t=[{title:"企业名称",key:"entname",minWidth:100}],n=[{title:"时间",key:"timeType",minWidth:160,sortable:!0}],i=[{title:"工号",key:"workNo",minWidth:80},{title:"姓名",key:"workname",minWidth:100}],a=[{title:"技能组",key:"name",minWidth:100}],r=[{title:"呼出数",key:"callCount",minWidth:80},{title:"呼出接通数",key:"connectCount",minWidth:100},{title:"呼出成功率",minWidth:100,render:function(e,t){var n=t.row;return e("span","".concat((100*n.callSuccess).toFixed(2),"%"))}},{title:"呼出通话时长",minWidth:120,render:function(e,t){var n=t.row;return e("span",Object(s["k"])(n.callTime))}},{title:"呼出平均时长",minWidth:120,render:function(e,t){var n=t.row;return e("span",Object(s["k"])(n.callAvgTime))}},{title:"呼出最大通话时长",minWidth:140,render:function(e,t){var n=t.row;return e("span",Object(s["k"])(n.callMaxTime))}}],c=[{title:"呼入数",key:"callCount",minWidth:80},{title:"呼入接通数",key:"connectCount",minWidth:100},{title:"呼入成功率",minWidth:100,render:function(e,t){var n=t.row;return e("span","".concat((100*n.callSuccess).toFixed(2),"%"))}},{title:"呼入通话时长",minWidth:120,render:function(e,t){var n=t.row;return e("span",Object(s["k"])(n.callTime))}},{title:"呼入平均时长",minWidth:120,render:function(e,t){var n=t.row;return e("span",Object(s["k"])(n.callAvgTime))}},{title:"呼入最大通话时长",minWidth:140,render:function(e,t){var n=t.row;return e("span",Object(s["k"])(n.callMaxTime))}}];return e="0"===this.searchForm.callType?"statistics"===this.activedTab?[].concat(n,i,a,r):[].concat(n,a,r,[{title:"服务坐席数",key:"workNums",minWidth:100},{title:"坐席平均通话时长",minWidth:140,render:function(e,t){var n=t.row;return e("span",Object(s["k"])(n.workAvgTime))}}]):"statistics"===this.activedTab?[].concat(n,i,a,c):[].concat(n,a,c),this.isSuper?[].concat(t,Object(o["a"])(e)):e},Searchurl:function(){return"statistics"===this.activedTab?"/analytics/directDial/list":"/analytics/directDial/listQueue"},exportUrl:function(){return"statistics"===this.activedTab?"/analytics/directDial/export":"/analytics/directDial/exportForQueue"}},mounted:function(){var e=this;this.setInitForm();var t=function(){e.getData(),e.getSkillGroups(e.entId)};t(),Object(s["g"])(this,t)},methods:{fetchMethod:function(e){return this.$http(this.Searchurl,{params:e}).then((function(e){var t=e.data;return t}))},setInitForm:function(){var e=Object(s["o"])(),t=Object(c["a"])(e,2),n=t[0],i=t[1];this.timerange=[n,i],this.tableForm={dateUnitType:"second",dateType:"hour",callType:"0",entId:this.entId,beginDate:+n,endDate:+i},this.searchForm=Object(r["a"])({},this.tableForm)},onTimeChange:function(e){var t=e||[],n=Object(c["a"])(t,2),i=n[0],a=n[1];this.searchForm.beginDate=i&&new Date(i).getTime(),this.searchForm.endDate=a&&new Date(a).getTime(),this.onSearch()},exportFile:function(){var e=this;this.$confirm("您当前导出数据为该筛选条件下的所有数据,请点击确定,继续导出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(e.tableData.total>5e4)return e.$confirm("当前导出数据量超过最大限制(50000条),请重新筛选数据后重试","注意",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});Object(s["i"])({fileName:"statistics"===e.activedTab?"坐席呼叫统计表导出数据.xls":"坐席呼叫汇总表导出数据.xls",action:function(){return e.$http(e.exportUrl,{params:e.searchForm,responseType:"blob"})}})}))},changeEntId:function(e){this.onSearch(),this.getSkillGroups(e)},getSkillGroups:function(e){var t=this;this.skillGroups=[],this.searchForm.queueName="",this.$http("/queue/getAllQueueNoPage",{params:{entId:e}}).then((function(e){var n=e.data;t.skillGroups=n}))}}},u=l,h=n("2877"),m=Object(h["a"])(u,i,a,!1,null,null,null);t["default"]=m.exports},b680:function(e,t,n){"use strict";var i=n("23e7"),a=n("da84"),r=n("e330"),c=n("5926"),o=n("408a"),s=n("1148"),l=n("d039"),u=a.RangeError,h=a.String,m=Math.floor,d=r(s),p=r("".slice),f=r(1..toFixed),b=function(e,t,n){return 0===t?n:t%2===1?b(e,t-1,n*e):b(e*e,t/2,n)},v=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},k=function(e,t,n){var i=-1,a=n;while(++i<6)a+=t*e[i],e[i]=a%1e7,a=m(a/1e7)},y=function(e,t){var n=6,i=0;while(--n>=0)i+=e[n],e[n]=m(i/t),i=i%t*1e7},g=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var i=h(e[t]);n=""===n?i:n+d("0",7-i.length)+i}return n},w=l((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!l((function(){f({})}));i({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,n,i,a,r=o(this),s=c(e),l=[0,0,0,0,0,0],m="",f="0";if(s<0||s>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return h(r);if(r<0&&(m="-",r=-r),r>1e-21)if(t=v(r*b(2,69,1))-69,n=t<0?r*b(2,-t,1):r/b(2,t,1),n*=4503599627370496,t=52-t,t>0){k(l,0,n),i=s;while(i>=7)k(l,1e7,0),i-=7;k(l,b(10,i,1),0),i=t-1;while(i>=23)y(l,1<<23),i-=23;y(l,1<<i),k(l,1,1),y(l,2),f=g(l)}else k(l,0,n),k(l,1<<-t,0),f=g(l)+d("0",s);return s>0?(a=f.length,f=m+(a<=s?"0."+d("0",s-a)+f:p(f,0,a-s)+"."+p(f,a-s))):f=m+f,f}})}}]);