(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5012"],{"3cf2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[n("el-form",{ref:"Form",attrs:{"label-width":"7em",model:e.form,rules:e.rules}},[n("ui-text-field",{attrs:{label:"姓名",prop:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("ui-text-field",{attrs:{label:"联系电话",prop:"phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),n("el-form-item",{attrs:{label:"微信二维码"}},[n("el-button",{attrs:{icon:"el-icon-plus",type:"primary",plain:"",size:"mini"},on:{click:e.onSelectFile}},[e._v("选择图片")]),e.getSrc()?n("div",{staticStyle:{"margin-top":"10px"}},[n("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:e.getSrc()}})]):e._e()],1)],1),n("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",accept:"image/*"},on:{change:e.onFileChange}})],1)},r=[],o=n("1da1"),i=n("5530"),c=(n("96cf"),n("b0c0"),n("2ca0"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("8a79"),n("fb6a"),n("99af"),n("a02a")),s={props:["row"],data:function(){var e=this,t=this.row;return{file:null,form:t?Object(i["a"])({},t):{},modalProps:{isEdit:!!t,onSubmit:function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$refs.Form.validate();case 2:if(a=e.form,r=new FormData,r.append("name",a.name),a.phone&&r.append("phone",a.phone),a.contactInfoId&&r.append("contactInfoId",a.contactInfoId),t||e.file){n.next=11;break}throw o="请选择二维码图片",e.$message.warning(o),new Error(o);case 11:return e.file&&r.append("file",e.file),n.next=14,e.$http.post("/ccas/auth/contact/us/info/save",r);case 14:return n.abrupt("return",n.sent);case 15:case"end":return n.stop()}}),n)})));function a(){return n.apply(this,arguments)}return a}()},rules:{name:Object(c["y"])("请输入姓名"),phone:Object(c["y"])("请输入联系电话")}}},methods:{onSelectFile:function(){this.$refs.File.click()},onFileChange:function(e){var t=e.target,n=t.files[0];n&&(n.type.startsWith("image/")?this.file=n:this.$message.warning("请选择图片文件")),t.value=""},getSrc:function(){if(this.file){var e=window.URL.createObjectURL(this.file);return setTimeout((function(){return window.URL.revokeObjectURL(e)}),0),e}var t=this.row,n=this.$API_BASE;return n.endsWith("/")&&(n=n.slice(0,-1)),t&&t.wechatQrCodeFilePath&&"".concat(n,"/ccas/auth/contact/us/info/download/").concat(t.contactInfoId)}}},l=s,u=n("2877"),f=Object(u["a"])(l,a,r,!1,null,null,null);t["default"]=f.exports}}]);