(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7286330a"],{"2bcb":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d}));var a=n("fa65"),r=function(e){return Object(a["e"])("/rules/rulesgroup/getrulesById",{params:e})},i=function(e){return Object(a["e"])("/rules/rulesgroup/grouplistById",{params:e})},o=function(e){return Object(a["e"])("/rules/rulesgroup/grouplistByPage",{params:e})},s=function(e){return Object(a["e"])("/rules/rulesgroup/remove",{params:e})},l=function(e){return a["e"].post("/rules/rulesgroup/savegrouprules",e)},c=function(e){return Object(a["e"])("/rules/rulesgroup/updategrouprules",{params:e})},u=function(e){return Object(a["e"])("/rules/rulesgroup/chekremove",{params:e})},d=function(e){return Object(a["e"])("/rules/rulesgroup/cheksave",{params:e})}},"2c70":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"groupRules"},[n("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[n("div",{staticClass:"key"},[n("el-form-item",{attrs:{label:"关键字"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1),n("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1)],1)]),n("div",{staticClass:"actionBar"},[n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.onCreate}},[e._v("创建规则组")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{label:"规则名称",align:"center",prop:"groupName","min-width":"140"}}),n("el-table-column",{attrs:{label:"描述",align:"center",prop:"describes","show-overflow-tooltip":"","min-width":"240"}}),n("el-table-column",{attrs:{label:"总分",align:"center",prop:"totalScore","min-width":"40"}}),n("el-table-column",{attrs:{label:"规则数",align:"center",prop:"ruleNumber","min-width":"40"}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"140",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",{staticClass:"ui-text-btns"},[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.onEdit(a)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.onDelete(a.id)}}},[e._v("删除")])],1)]}}])}),n("el-table-column",{attrs:{label:"查看规则",align:"center",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",{staticClass:"ui-text-btns"},[n("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){return e.onView(a.id)}}},[e._v("查看规则")])],1)]}}])})],1),n("com-pagination",{ref:"ComPagination",attrs:{paginationInfo:e.paginationInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}}),n("com-edit",{ref:"ComEdit",attrs:{tableData:e.tableData},on:{refresh:e.refresh}})],1)},r=[],i=n("5530"),o=n("1da1"),s=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-drawer",e._b({attrs:{title:e.isEdit?"编辑规则组":"创建规则组",size:"730px"},on:{close:e.handleClose},scopedSlots:e._u([{key:"footer",fn:function(){return[e.isEdit?n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(e.rowId)}}},[e._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("创建")]),n("el-button",{on:{click:e.handleCancel}},[e._v("取消")])]},proxy:!0}])},"ui-drawer",Object.assign({},e.modalProps),!1),[n("el-form",{ref:"editForm",attrs:{"label-width":"7em",model:e.editForm,size:"mini",rules:e.rules}},[n("div",{staticClass:"form-header"},[e._v("规则基本信息")]),n("div",{staticClass:"flexbox col-2"},[n("el-form-item",{attrs:{label:"规则名称:",prop:"groupName"}},[n("el-input",{attrs:{clearable:""},model:{value:e.editForm.groupName,callback:function(t){e.$set(e.editForm,"groupName",t)},expression:"editForm.groupName"}})],1)],1),n("el-form-item",{attrs:{label:"描述:"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.describes,callback:function(t){e.$set(e.editForm,"describes",t)},expression:"editForm.describes"}})],1),e.isEdit?n("el-form-item",{attrs:{label:"总分:"}},[n("el-input",{staticStyle:{width:"80px"},attrs:{disabled:!0},model:{value:e.editForm.totalScore,callback:function(t){e.$set(e.editForm,"totalScore",t)},expression:"editForm.totalScore"}})],1):e._e(),e.isEdit?n("el-form-item",{attrs:{label:"规则数:"}},[n("el-input",{staticStyle:{width:"80px"},attrs:{disabled:!0},model:{value:e.editForm.ruleNumber,callback:function(t){e.$set(e.editForm,"ruleNumber",t)},expression:"editForm.ruleNumber"}})],1):e._e(),e.isEdit?e._e():n("el-form-item",[n("el-button",{attrs:{type:"text"},on:{click:e.onSelectRule}},[e._v("选择规则")]),n("p",[e._v("已选择"),n("span",{staticStyle:{margin:"0 5px",color:"#00cdb1"}},[e._v(e._s(e.editForm.ruleNumber||0))]),e._v("个规则")]),n("p",[e._v("总得分共计"),n("span",{staticStyle:{margin:"0 5px",color:"#00cdb1"}},[e._v(e._s(e.editForm.totalScore||0))])])],1)],1),n("SelectRule",{ref:"SelectRule",on:{okDialog:e.okDialog}})],1)}),l=[],c=n("5e23"),u=n("2bcb"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",e._b({staticClass:"callDialog",on:{close:function(t){return e.onShow(!1)}}},"el-dialog",Object.assign({},e.modalProps,{title:"选择规则",showClose:!1,width:"80%"}),!1),[n("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[n("el-form-item",{attrs:{label:"规则类型"}},[n("el-select",{attrs:{placeholder:"请选择规则类型"},model:{value:e.searchForm.ruleCode,callback:function(t){e.$set(e.searchForm,"ruleCode",t)},expression:"searchForm.ruleCode"}},[n("el-option",{attrs:{label:"全部",value:null}}),n("el-option",{attrs:{label:"静音规则",value:"VQC_RULE_SILENCE"}}),n("el-option",{attrs:{label:"语速规则",value:"VQC_RULE_SPEED"}}),n("el-option",{attrs:{label:"对话规则",value:"VQC_RULE_DIALOG"}}),n("el-option",{attrs:{label:"敏感词规则",value:"VQC_RULE_SENSITIVEWORDS"}})],1)],1),n("el-form-item",{attrs:{label:"关键字"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.describes,callback:function(t){e.$set(e.searchForm,"describes",t)},expression:"searchForm.describes"}})],1),n("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getDataList(1)}}},[e._v("查询")]),n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),n("el-table-column",{attrs:{label:"规则名称",align:"center","show-overflow-tooltip":"",prop:"rulesName","min-width":"140"}}),n("el-table-column",{attrs:{label:"描述",align:"center",prop:"describes","show-overflow-tooltip":"","min-width":"240"}}),n("el-table-column",{attrs:{label:"合规加分",align:"center",prop:"bonusPoints","min-width":"40"}}),n("el-table-column",{attrs:{label:"违规扣分",align:"center",prop:"pointsDeducted","min-width":"40"}})],1),n("com-pagination",{ref:"ComPagination",attrs:{paginationInfo:e.paginationInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}}),n("div",{staticClass:"dialog-footer",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[n("div",{staticStyle:{"text-align":"left"}},[e._v("已选择共计"),n("span",{staticStyle:{margin:"0 10px",color:"#00CDB1"}},[e._v(e._s(e.selectedCalls))]),e._v("个规则,总分共计"),n("span",{staticStyle:{margin:"0 10px",color:"#00CDB1"}},[e._v(e._s(e.totalScore))])]),n("div",[n("el-button",{on:{click:e.toggleSelection}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleOkDialog}},[e._v("确 定")])],1)])],1)},p=[],f=(n("d3b7"),n("7329")),m=window.createEditView({data:function(){return{searchForm:{},selectTableData:[],tableData:[],paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0},loading:!1,multipleSelection:[],selectedRuleId:[]}},components:{ComPagination:f["a"]},created:function(){this.getDataList()},computed:{selectedCalls:function(){return this.multipleSelection.length?this.multipleSelection.length:0},totalScore:function(){return this.multipleSelection.reduce((function(e,t){return e+t.bonusPoints}),0)}},methods:{toggleSelection:function(){this.$refs.multipleTable.clearSelection(),this.onShow(!1)},getDataList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={describes:t.searchForm.describes,ruleCode:t.searchForm.ruleCode,offset:e||1+(t.paginationInfo.currentPage-1)*t.paginationInfo.pageSize,size:t.paginationInfo.pageSize},t.loading=!0,n.next=4,Object(u["a"])(a);case 4:r=n.sent,r.ok?(t.tableData=r.data.rows,t.paginationInfo.total=r.data.count):t.$message.error("获取数据失败"),t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()},onReset:function(){this.searchForm={},this.isShowSearchMore=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleSelectionChange:function(e){if(this.multipleSelection=e,this.selectedRuleId=[],this.multipleSelection.length)for(var t=0;t<this.multipleSelection.length;t++)this.selectedRuleId.push(this.multipleSelection[t].id);console.log(this.selectedRuleId)},handleOkDialog:function(){this.onShow(!1),this.$emit("okDialog",this.multipleSelection.length,this.totalScore,this.selectedRuleId)}}}),g=m,h=(n("ce71"),n("2877")),b=Object(h["a"])(g,d,p,!1,null,"384e3ad7",null),v=b.exports,w=window.createEditView({props:{tableData:{type:Array,required:!0}},components:{SelectRule:v},data:function(){return{editForm:{},isEdit:!1,sensitiveType:"",typeId:0,rowId:0,rules:{groupName:[{required:!0,message:"请输入规则名称",trigger:"blur"}]}}},methods:{handleClose:function(){this.$refs.editForm.resetFields(),this.onShow(!1)},handleSubmit:Object(c["a"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,n={describes:this.editForm.describes,groupName:this.editForm.groupName,ruleNumber:t.editForm.ruleNumber?t.editForm.ruleNumber:0,totalScore:t.editForm.totalScore?t.editForm.totalScore:0,ruleGroupId:this.editForm.ruleGroupId},e.next=4,Object(u["e"])(n);case 4:a=e.sent,a.ok?(this.tableData.push(Object(i["a"])({},this.editForm)),this.editForm={},this.$message.success("创建成功")):this.$message.error("创建失败"),this.onShow(!1);case 7:case"end":return e.stop()}}),e,this)}))),500),handleEdit:Object(c["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,a={groupName:this.editForm.groupName,describes:this.editForm.describes,id:t},e.next=4,Object(u["f"])(a);case 4:r=e.sent,r.ok?n.$message.success("编辑成功"):n.$message.error("编辑失败"),this.$emit("refresh"),this.onShow(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),500),onSelectRule:function(){this.$refs.SelectRule.show()},okDialog:function(e,t,n){this.editForm.ruleNumber=e,this.editForm.totalScore=t,this.editForm.ruleGroupId=n},handleCancel:function(){this.onShow(!1)}}}),S=w,C=(n("7f4f"),Object(h["a"])(S,s,l,!1,null,"3633520c",null)),k=C.exports,I=n("71df"),y={name:"GroupRules",components:{ComEdit:k,ComPagination:f["a"]},data:function(){return{searchForm:{keywords:""},tableData:[],loading:!1,paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0}}},created:function(){this.getDataList()},methods:{getDataList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={offset:1+(e.paginationInfo.currentPage-1)*e.paginationInfo.pageSize,size:e.paginationInfo.pageSize},e.loading=!0,t.next=4,Object(u["b"])(n);case 4:a=t.sent,a.ok?(e.loading=!1,e.tableData=a.data.rows,e.paginationInfo.total=a.data.count):(e.$message.error("请求出错"),e.loading=!1);case 6:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))},onEdit:function(e){this.$refs.ComEdit.show(),this.$refs.ComEdit.isEdit=!0,this.$refs.ComEdit.rowId=e.id,this.$refs.ComEdit.editForm=Object(i["a"])({},e)},onView:function(e){this.$router.push({path:"/".concat(I["a"],"/rules/qualityRulesGroupRules/"),query:{id:e}})},onDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={id:e},n.next=3,Object(u["d"])(a);case 3:r=n.sent,r.ok?(t.$message.success("删除成功"),t.getDataList()):t.$message("删除失败");case 5:case"end":return n.stop()}}),n)})))()},onSearch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={describes:e.searchForm.keywords,offset:1+(e.paginationInfo.currentPage-1)*e.paginationInfo.pageSize,size:e.paginationInfo.pageSize},t.next=3,Object(u["b"])(n);case 3:a=t.sent,a.ok?(e.tableData=a.data.rows,e.paginationInfo.total=a.data.count):e.$message.error("获取数据失败");case 5:case"end":return t.stop()}}),t)})))()},refresh:function(){this.getDataList()},onCreate:function(){this.$refs.ComEdit.editForm={},this.$refs.ComEdit.show()},onReset:function(){this.searchForm={},this.$set(this.paginationInfo,"currentPage",1),this.getDataList()}},deactivated:function(){this.$destroy("GroupRules")}},x=y,F=(n("65b3"),Object(h["a"])(x,a,r,!1,null,"796b0098",null));t["default"]=F.exports},"5e23":function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=null;return function(){var a=arguments,r=this;n&&clearTimeout(n),n=setTimeout((function(){e.apply(r,a),n=null}),t)}}n.d(t,"a",(function(){return a}))},"65b3":function(e,t,n){"use strict";n("7d0d")},"673d":function(e,t,n){},7329:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-pagination",{staticClass:"is-background",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":e.paginationInfo.currentPage,"page-sizes":e.paginationInfo.pageSizes,"page-size":e.paginationInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],i={props:{paginationInfo:{type:Object,required:!0}},methods:{handleSizeChange:function(e){this.paginationInfo.pageSize=e,this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.paginationInfo.currentPage=e,this.$emit("currentChange",e)}}},o=i,s=n("2877"),l=Object(s["a"])(o,a,r,!1,null,null,null);t["a"]=l.exports},"7d0d":function(e,t,n){},"7f4f":function(e,t,n){"use strict";n("b228")},b228:function(e,t,n){},ce71:function(e,t,n){"use strict";n("673d")},fa65:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return v}));n("d3b7"),n("b0c0");var a=n("4328"),r=n.n(a),i=n("bc3a"),o=n.n(i),s=n("5c96"),l=n("e5ac"),c=n("a02a"),u=n("60e2"),d=function(e){var t=e.statusCode,n=e.message,a=e.data,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r&&s["Message"].error(n||"发生未知异常");var i=new Error(n);return i.data=a,i.statusCode=t,Promise.reject(i)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u["a"],n=o.a.create();return n.defaults.baseURL=t,n.defaults.withCredentials=!0,e&&(n.defaults.transformRequest=[function(e){return r.a.stringify(e)}]),n.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return t&&!1!==e.isAuth&&(e.headers.Authorization=t),e})),n.interceptors.response.use((function(e){var t=e.data;return t instanceof Blob&&(t.name=Object(c["n"])(e.headers["content-disposition"])),"number"===typeof t.code?t.code?d({message:t.msg,data:t,statusCode:e.status}):t:!1!==t.ok?(Object(l["b"])(e.config.url)&&sessionStorage.setItem("token",e.headers.authorization||e.headers.Authorization),t):d({message:t.info,data:t,statusCode:e.status},"-20"!==t.code)}),(function(e){var t=e.response,n=t||{},a=n.data,r=n.status,i=t?a.info||e.message:"请求失败，请稍候重试";return 401===r?(sessionStorage.removeItem("token"),window.opener?window.close():(c["t"].close(),l["a"].dispatch("GO_LOGIN")),d({message:i,data:a,statusCode:r},!1)):d({message:i,data:a,statusCode:r})})),n},f=p(!0,u["b"]),m=p(),g=p(!0),h=function(){return g.post.apply(g,arguments)},b=p(!1,u["b"]),v=function(){return f.post.apply(f,arguments)}}}]);