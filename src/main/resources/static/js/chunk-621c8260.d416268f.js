(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-621c8260"],{"498a":function(e,t,n){"use strict";var i=n("23e7"),o=n("58a8").trim,r=n("c8d2");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return o(this)}})},"4ed0":function(e,t,n){},"6fbf":function(e,t,n){"use strict";n("4ed0")},c8d2:function(e,t,n){var i=n("5e77").PROPER,o=n("d039"),r=n("5899"),a="​᠎";e.exports=function(e){return o((function(){return!!r[e]()||a[e]()!==a||i&&r[e].name!==e}))}},dc08:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-modal",e._g({attrs:{title:"选项编辑",hideOK:""}},e.$listeners),[n("el-link",{staticClass:"btn-add",attrs:{type:"primary",size:"mini",icon:"el-icon-plus",underline:!1},on:{click:function(t){return e.onNodeEdit()}}},[e._v("添加选项")]),n("el-tree",{ref:"Tree",attrs:{"node-key":"optionsUid",data:e.optionList,"default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,o=t.data;return n("span",{staticClass:"custom-node"},[n("span",{staticClass:"custom-node-label"},[e._v(e._s(i.label))]),n("span",{staticClass:"custom-node-actions"},[n("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.onNodeEdit(o,!0)}}}),+e.row.fieldType===e.T.CASCADER?n("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.onNodeEdit(o)}}}):e._e(),n("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.onNodeDelete(o)}}})])])}}])})],1)},o=[],r=n("1da1"),a=n("5530"),s=(n("96cf"),n("d81d"),n("498a"),n("a02a")),c=n("e6f4"),d={props:["row"],data:function(){return{T:c["b"],optionList:[]}},mounted:function(){var e=this;this.$http("/media/field/getOptionList?fieldUid=".concat(this.row.fieldUid)).then((function(t){e.optionList=Object(s["F"])(t.data.map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{label:e.optionsName})})),{key:"optionsUid"})}))},methods:{update:function(e){return this.$post("/media/field/saveOptions",e)},onNodeEdit:function(e,t){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var o,r,s,c,d,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=t?"编辑":"添加",i.next=3,n.$prompt("",o,Object(a["a"])(Object(a["a"])({inputPlaceholder:"请输入选项名称"},t?{inputValue:e.label}:{}),{},{inputValidator:function(e){var t=(e||"").trim();return t?!(t.length>30)||"选项名称不能超过30个字符":"请输入选项名称"}}));case 3:return r=i.sent,s=r.value,c=s.trim(),i.next=8,n.update({optionsName:c,id:t&&e.id,parentId:t?e.parentId:e&&e.optionsUid,fieldUid:n.row.fieldUid});case 8:d=i.sent,u=d.data,t?n.$set(e,"label",c):n.$refs.Tree.append(Object(a["a"])(Object(a["a"])({},u),{},{label:c}),e);case 11:case"end":return i.stop()}}),i)})))()},onNodeDelete:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$confirm("确定删除?","删除");case 2:return n.next=4,t.$post("/media/field/delOptions",{optionsUid:e.optionsUid});case 4:t.$refs.Tree.remove(e.optionsUid);case 5:case"end":return n.stop()}}),n)})))()}}},u=d,l=(n("6fbf"),n("2877")),p=Object(l["a"])(u,i,o,!1,null,"6e5dc46f",null);t["default"]=p.exports}}]);