(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a8cd3d8"],{"6eef":function(e,r,t){"use strict";t("d51a")},a97a:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[t("el-form",{ref:"Form",attrs:{"label-width":"6em",model:e.form,rules:e.rules}},[t("ui-text-field",{attrs:{label:"资源名称",prop:"resourceName"},model:{value:e.form.resourceName,callback:function(r){e.$set(e.form,"resourceName",r)},expression:"form.resourceName"}}),t("el-form-item",{attrs:{label:"图片资源",prop:"file"}},[t("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"File",attrs:{type:"file",accept:"image/*"},on:{change:e.onFileChange}}),t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.onSelectFile}},[e._v("选择文件")]),t("span",{staticClass:"filename"},[e._v(e._s(e.filename))]),t("p",{staticClass:"tip"},[e._v("* 请选择图片文件，且文件大小不能超过5M")])],1),t("ui-text-field",{attrs:{label:"资源描述",type:"textarea"},model:{value:e.form.remark,callback:function(r){e.$set(e.form,"remark",r)},expression:"form.remark"}})],1)],1)},i=[],o=t("3835"),n=t("1da1"),s=t("5530"),c=(t("b0c0"),t("ac1f"),t("1276"),t("2ca0"),t("96cf"),t("a02a")),l={props:["row","entid"],data:function(){var e=this;return{form:this.row?Object(s["a"])({},this.row):{},rules:{resourceName:Object(c["y"])("请输入资源名称"),file:{validator:function(r,t,a){t||e.form.resourceId?a():a(new Error("请添加图片文件"))}}},modalProps:{isEdit:!!this.row,onSubmit:function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(){var t,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.Form.validate();case 2:return t=e.form,a=new FormData,a.append("entid",e.entid),t.remark&&a.append("remark",t.remark),t.resourceId&&a.append("resourceId",t.resourceId),a.append("resourceName",t.resourceName),t.file&&a.append("file",t.file),r.next=11,e.$http.post("/ccas/call/ivr/video/resource/save",a).then((function(){return e.form}));case 11:return r.abrupt("return",r.sent);case 12:case"end":return r.stop()}}),r)})));function t(){return r.apply(this,arguments)}return t}()}}},computed:{filename:function(){if(this.form.file)return this.form.file.name;var e=this.form.resourceFilePath;return e&&e.split("/").pop()}},methods:{onSelectFile:function(){this.$refs.File.click()},onFileChange:function(e){var r=e.target,t=Object(o["a"])(r.files,1),a=t[0];a&&(a.type.startsWith("image/")?a.size>5242880?this.$message.error("文件大小不能超过5M"):(this.form=Object(s["a"])(Object(s["a"])({},this.form),{},{file:a}),this.$refs.Form.clearValidate("file")):this.$message.error("请选择图片文件"))}}},u=l,f=(t("6eef"),t("2877")),m=Object(f["a"])(u,a,i,!1,null,"19f80362",null);r["default"]=m.exports},d51a:function(e,r,t){}}]);