(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9f16d30"],{"0caa":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-modal",e._g(e._b({ref:"Modal"},"ui-modal",e.modalProps,!1),e.$listeners),[n("ui-tab-view",{attrs:{nocache:"",type:"",tabs:e.tabs}})],1)},a=[],s=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("ui-text-field",{attrs:{placeholder:"请输入坐席工号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.agentno,callback:function(t){e.$set(e.searchForm,"agentno",t)},expression:"searchForm.agentno"}}),n("ui-text-field",{attrs:{placeholder:"请输入坐席姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.agentname,callback:function(t){e.$set(e.searchForm,"agentname",t)},expression:"searchForm.agentname"}}),n("ui-text-field",{attrs:{placeholder:"请输入技能组名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.skillname,callback:function(t){e.$set(e.searchForm,"skillname",t)},expression:"searchForm.skillname"}})]},proxy:!0},{key:"search-right",fn:function(){return[n("span",{staticClass:"refresh-time"},[e._v("刷新于"+e._s(e.refreshTime))]),n("el-button",{staticClass:"btn-refresh",attrs:{type:"text",icon:"el-icon-refresh"},on:{click:function(t){return e.getData()}}},[e._v("刷新")])]},proxy:!0}])},"ui-table-view",Object.assign({},e.viewProps,{hidePager:!0,height:280}),!1),e.viewListeners))}),i=[],o=n("5530"),u=n("1da1"),c=(n("96cf"),{mixins:[window.mixTableView],props:["row","user"],data:function(){return{refreshTime:null,columns:[{label:"工号",prop:"agentno"},{label:"客服姓名",prop:"username"},{label:"接待状态",render:function(e,t){var n=t.row;return e("div",n.users+"/"+n.maxusers)}},{label:"所属分组",prop:"skillname"},{label:"操作",fixed:"right",width:100,render:this.$hBtns({label:"转接",action:this.onTransfer})}]}},mounted:function(){this.getData()},methods:{fetchMethod:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.row,a=t.user,n.next=3,t.$imPost("/agent/transfer",Object(o["a"])(Object(o["a"])({orgi:a.orgi,agentId:a.agentId,agentno:"",agentname:"",skillname:""},e),{},{userid:r.userid,agentuserid:r.id,agentserviceid:r.agentserviceid}));case 3:return s=n.sent,i=s.data,t.refreshTime=t.$adminCore.formatDate(new Date,"HH:mm:ss"),n.abrupt("return",{data:i.userList});case 7:case"end":return n.stop()}}),n)})))()},onTransfer:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$prompt("请输入转接原因","转接原因",{inputType:"textarea"});case 3:return r=n.sent,a=r.value,t.loading=!0,s=t.row,i=t.user,n.next=9,t.$imPost("/agent/transferConfirm",{orgi:i.orgi,agentId:e.agentno,agentserviceid:s.agentserviceid,agentuserid:s.id,memo:a,userid:s.userid});case 9:t.$message.success("转接成功"),t.$emit("success"),n.next=15;break;case 13:n.prev=13,n.t0=n["catch"](0);case 15:t.loading=!1;case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))()}}}),l=c,p=(n("53b2"),n("2877")),d=Object(p["a"])(l,s,i,!1,null,"66b1269d",null),m=d.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("ui-text-field",{attrs:{"input-style":"width:300px;",placeholder:"请输入技能组名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})]},proxy:!0},{key:"search-right",fn:function(){return[n("span",{staticClass:"refresh-time"},[e._v("刷新于"+e._s(e.refreshTime))]),n("el-button",{staticClass:"btn-refresh",attrs:{type:"text",icon:"el-icon-refresh"},on:{click:function(t){return e.getData()}}},[e._v("刷新")])]},proxy:!0}])},"ui-table-view",Object.assign({},e.viewProps,{hidePager:!0,height:280,columns:e.columns}),!1),e.viewListeners))},h=[],g={mixins:[window.mixTableView],props:["row","user"],data:function(){return{refreshTime:null,columns:[{label:"技能组名称",prop:"skillname"},{label:"在线客服数",prop:"onlineNums"},{label:"未饱和客服数",prop:"unsaturatedNums"},{label:"操作",fixed:"right",width:100,render:this.$hBtns({label:"转接",action:this.onTransfer})}]}},methods:{fetchMethod:function(e){return this.refreshTime=this.$adminCore.formatDate(new Date,"HH:mm:ss"),this.$imHttp("/skill/onlineList",{params:Object(o["a"])(Object(o["a"])({},e),{},{orgi:this.user.orgi})})},onTransfer:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$prompt("请输入转接原因","转接原因",{inputType:"textarea"});case 3:return r=n.sent,a=r.value,t.loading=!0,s=t.row,i=t.user,n.next=9,t.$imPost("/agent/transferSkillGroup",{skill:e.skill,agentserviceid:s.agentserviceid,agentuserid:s.id,userid:s.userid,orgi:i.orgi,memo:a});case 9:t.$message.success("转接成功"),t.$emit("success"),n.next=15;break;case 13:n.prev=13,n.t0=n["catch"](0);case 15:t.loading=!1;case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))()}}},b=g,v=(n("b3bb"),Object(p["a"])(b,f,h,!1,null,"0df71026",null)),k=v.exports,w={props:["row","user"],data:function(){var e=this;return{tabs:[[m,"转接给客服"],[k,"转接给技能组"]].map((function(t){return{label:t[1],component:{render:function(n){return n(t[0],{props:e.$props,on:{success:function(){return e.$refs.Modal.show(!1)}}})}}}})),modalProps:{title:"转接会话",width:"800px",hideFooter:!0}}}},x=w,y=Object(p["a"])(x,r,a,!1,null,null,null);t["default"]=y.exports},"3a70":function(e,t,n){},"53b2":function(e,t,n){"use strict";n("3a70")},"828a":function(e,t,n){},b3bb:function(e,t,n){"use strict";n("828a")}}]);