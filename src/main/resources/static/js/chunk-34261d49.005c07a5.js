(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34261d49"],{"404e":function(e,t,a){"use strict";a("cbd3")},"9a81":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[a("el-form",{ref:"Form",attrs:{rules:e.rules,model:e.form,"label-width":"110px"}},[a("ui-text-field",{attrs:{label:"任务名称",prop:"taskTitle"},model:{value:e.form.taskTitle,callback:function(t){e.$set(e.form,"taskTitle",t)},expression:"form.taskTitle"}}),a("ui-select",{attrs:{label:"分配类型",prop:"eventType",options:e.taskAssignTypes},model:{value:e.form.eventType,callback:function(t){e.$set(e.form,"eventType",t)},expression:"form.eventType"}}),a("el-form-item",{attrs:{label:"抽检区间",prop:"samplingRange"}},[a("el-date-picker",{staticClass:"quaDate",attrs:{type:"datetimerange",clearable:!1},model:{value:e.form.samplingRange,callback:function(t){e.$set(e.form,"samplingRange",t)},expression:"form.samplingRange"}})],1),a("el-form-item",{attrs:{label:"任务起止区间",prop:"taskRange"}},[a("el-date-picker",{staticClass:"quaDate",attrs:{type:"datetimerange",clearable:!1},model:{value:e.form.taskRange,callback:function(t){e.$set(e.form,"taskRange",t)},expression:"form.taskRange"}})],1),a("el-form-item",{attrs:{label:"申诉起止区间",prop:"appealRange"}},[a("el-date-picker",{staticClass:"quaDate",attrs:{type:"datetimerange",clearable:!1},model:{value:e.form.appealRange,callback:function(t){e.$set(e.form,"appealRange",t)},expression:"form.appealRange"}})],1),a("ui-select",{attrs:{label:"质检类型",prop:"checkType",options:e.taskCheckTypes},on:{change:e.handleCheckTypeChange},model:{value:e.form.checkType,callback:function(t){e.$set(e.form,"checkType",t)},expression:"form.checkType"}}),a("ui-select",{attrs:{label:"质检标准",prop:"checkId",options:e.qualityData,props:{value:"key",label:"value"},disabled:!e.form.checkType},model:{value:e.form.checkId,callback:function(t){e.$set(e.form,"checkId",t)},expression:"form.checkId"}}),a("ui-select",{attrs:{label:"目标类型",prop:"checkWorkerType",options:e.checkTargetTypes},on:{change:e.handleCheckWorkerTypeChange},model:{value:e.form.checkWorkerType,callback:function(t){e.$set(e.form,"checkWorkerType",t)},expression:"form.checkWorkerType"}}),a("ui-select",{attrs:{label:"抽检目标",prop:"checkWorkerId",options:e.checkWorkers,disabled:!e.form.checkWorkerType},model:{value:e.form.checkWorkerId,callback:function(t){e.$set(e.form,"checkWorkerId",t)},expression:"form.checkWorkerId"}}),a("el-form-item",{attrs:{label:"时长范围",prop:"timeMin"}},[a("el-input-number",{attrs:{min:1},model:{value:e.form.timeMin,callback:function(t){e.$set(e.form,"timeMin",t)},expression:"form.timeMin"}}),a("span",{staticClass:"segmentation"},[e._v("~")]),a("el-input-number",{attrs:{min:1},model:{value:e.form.timeMax,callback:function(t){e.$set(e.form,"timeMax",t)},expression:"form.timeMax"}})],1),a("ui-select",{attrs:{label:"抽检标准",prop:"samplingId",options:e.samplingData,props:{value:"soId",label:"soTitle"}},model:{value:e.form.samplingId,callback:function(t){e.$set(e.form,"samplingId",t)},expression:"form.samplingId"}}),a("ui-select",{attrs:{label:"呼叫方向",prop:"dir"},model:{value:e.form.dir,callback:function(t){e.$set(e.form,"dir",t)},expression:"form.dir"}},[a("el-option",{attrs:{value:0,label:"呼出"}}),a("el-option",{attrs:{value:1,label:"呼入"}})],1),a("ui-text-field",{attrs:{label:"备注",type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)},n=[],i=a("3835"),s=a("1da1"),o=a("5530"),l=(a("d81d"),a("96cf"),a("a02a")),c=a("e66d"),p={props:["row","entid"],data:function(){var e=this,t=function(t,a,r){var n,i=e.form,s=i.timeMin,o=i.timeMax;s&&o?s>=o&&(n="开始时长必须小于结束时长"):n="请完善时长范围",n?r(new Error(n)):r()},a=this.row;return{form:a?Object(o["a"])(Object(o["a"])({},a),{},{samplingRange:[a.samplingStartTime,a.samplingEndTime],taskRange:[a.startTime,a.overTime],appealRange:[a.appealStartTime,a.appealEndTime]}):{samplingRange:[],taskRange:[],appealRange:[]},checkTargetData:[],qualityData:[],samplingData:[],checkWorkers:[],taskAssignTypes:c["f"].data,taskCheckTypes:c["g"].data,checkTargetTypes:c["b"].data,rules:{taskTitle:Object(l["y"])("请输入任务名称"),eventType:Object(l["z"])("请选择分配类型"),samplingRange:Object(l["z"])("请选择抽检区间"),taskRange:Object(l["z"])("请选择任务起止区间"),appealRange:Object(l["z"])("请选择申诉起止区间"),checkType:Object(l["z"])("请选择质检类型"),checkId:Object(l["z"])("请选择质检标准"),timeMin:[{required:!0,validator:t}],checkWorkerType:Object(l["z"])("请选择目标类型"),checkWorkerId:Object(l["z"])("请选择抽检目标"),samplingId:Object(l["z"])("请选择抽检标准")},modalProps:{drawer:!0,isEdit:!!this.row,onSubmit:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,l,c,p,m,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:return a=Object(i["a"])(e.form.samplingRange,2),r=a[0],n=a[1],s=Object(i["a"])(e.form.taskRange,2),l=s[0],c=s[1],p=Object(i["a"])(e.form.appealRange,2),m=p[0],u=p[1],t.next=7,e.$http.post("/qc/qcTask/saveOrUpdate",Object(o["a"])(Object(o["a"])({},e.form),{},{samplingEndTime:n,samplingStartTime:r,startTime:l,overTime:c,appealStartTime:m,appealEndTime:u}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}}},mounted:function(){var e=this.row,t=void 0===e?{}:e;1===t.checkWorkerType?this.getQueueAll():2===t.checkWorkerType&&this.getWorkList(),t.checkType&&this.getStandardList(t.checkType),this.getSampling()},methods:{getSampling:function(){var e=this;this.$http("/qc/sampling/option/listAll").then((function(t){var a=t.data;e.samplingData=a}))},getStandardList:function(e){var t=this;this.qualityData=[],e&&this.$http("/qc/qcTask/standardList?type=".concat(e)).then((function(e){var a=e.data;t.qualityData=a.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{key:+e.key})}))}))},handleCheckTypeChange:function(e){this.$set(this.form,"checkId",void 0),this.getStandardList(e)},handleCheckWorkerTypeChange:function(e){this.isModalOpen?this.isModalOpen=!1:(1===e?this.getQueueAll():this.getWorkList(),this.$set(this.form,"checkWorkerId",void 0))},getQueueAll:function(){var e=this;return this.$http("/pm/external/api/queuelist?entid=".concat(this.entid)).then((function(t){var a=t.data;e.checkWorkers=a}))},getWorkList:function(){var e=this;this.$http("/pm/external/api/worklist/by/queueid?entid=".concat(this.entid)).then((function(t){var a=t.data;e.checkWorkers=a}))}}},m=p,u=(a("404e"),a("2877")),d=Object(u["a"])(m,r,n,!1,null,"702fc1d0",null);t["default"]=d.exports},cbd3:function(e,t,a){}}]);