(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f11d1e3c"],{"06ba":function(e,t,n){},"2bcb":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d}));var a=n("fa65"),i=function(e){return Object(a["e"])("/rules/rulesgroup/getrulesById",{params:e})},o=function(e){return Object(a["e"])("/rules/rulesgroup/grouplistById",{params:e})},r=function(e){return Object(a["e"])("/rules/rulesgroup/grouplistByPage",{params:e})},s=function(e){return Object(a["e"])("/rules/rulesgroup/remove",{params:e})},l=function(e){return a["e"].post("/rules/rulesgroup/savegrouprules",e)},c=function(e){return Object(a["e"])("/rules/rulesgroup/updategrouprules",{params:e})},u=function(e){return Object(a["e"])("/rules/rulesgroup/chekremove",{params:e})},d=function(e){return Object(a["e"])("/rules/rulesgroup/cheksave",{params:e})}},"2e5b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"viewRules"},[n("div",{staticClass:"actionBar"},[n("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("删除")]),n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("添加")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:"规则名称",align:"center","show-overflow-tooltip":"",prop:"rulesName","min-width":"140"}}),n("el-table-column",{attrs:{label:"描述",align:"center",prop:"describes","show-overflow-tooltip":"","min-width":"240"}}),n("el-table-column",{attrs:{label:"合规加分",align:"center",prop:"bonusPoints","min-width":"40"}}),n("el-table-column",{attrs:{label:"违规扣分",align:"center",prop:"pointsDeducted","min-width":"40"}})],1),n("com-pagination",{ref:"ComPagination",attrs:{paginationInfo:e.paginationInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}}),n("com-edit",{ref:"ComEdit",attrs:{tableData:e.tableData,index:e.rowId},on:{addSuccess:e.addSuccess}})],1)},i=[],o=n("1da1"),r=(n("96cf"),n("d81d"),n("a15b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",e._b({staticClass:"callDialog",on:{close:function(t){return e.onShow(!1)}}},"el-dialog",Object.assign({},e.modalProps,{title:"选择规则",showClose:!1,width:"80%"}),!1),[n("el-form",{ref:"form",staticClass:"el-form el-form--inline",attrs:{model:e.searchForm}},[n("el-form-item",{attrs:{label:"规则类型"}},[n("el-select",{attrs:{placeholder:"请选择规则类型"},model:{value:e.searchForm.ruleCode,callback:function(t){e.$set(e.searchForm,"ruleCode",t)},expression:"searchForm.ruleCode"}},[n("el-option",{attrs:{label:"全部",value:null}}),n("el-option",{attrs:{label:"静音规则",value:"VQC_RULE_SILENCE"}}),n("el-option",{attrs:{label:"语速规则",value:"VQC_RULE_SPEED"}}),n("el-option",{attrs:{label:"对话规则",value:"VQC_RULE_DIALOG"}}),n("el-option",{attrs:{label:"敏感词规则",value:"VQC_RULE_SENSITIVEWORDS"}})],1)],1),n("el-form-item",{attrs:{label:"关键字"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.describes,callback:function(t){e.$set(e.searchForm,"describes",t)},expression:"searchForm.describes"}})],1),n("el-form-item",{staticStyle:{"margin-right":"0",float:"right"}},[n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getDataList(1)}}},[e._v("查询")]),n("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{icon:"el-icon-refresh"},on:{click:e.onReset}},[e._v("重置")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),n("el-table-column",{attrs:{label:"规则名称",align:"center","show-overflow-tooltip":"",prop:"rulesName","min-width":"140"}}),n("el-table-column",{attrs:{label:"描述",align:"center",prop:"describes","show-overflow-tooltip":"","min-width":"240"}}),n("el-table-column",{attrs:{label:"合规加分",align:"center",prop:"bonusPoints","min-width":"40"}}),n("el-table-column",{attrs:{label:"违规扣分",align:"center",prop:"pointsDeducted","min-width":"40"}})],1),n("com-pagination",{ref:"ComPagination",attrs:{paginationInfo:e.paginationInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}}),n("div",{staticClass:"dialog-footer",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[n("div",{staticStyle:{"text-align":"left"}},[e._v("已选择共计"),n("span",{staticStyle:{margin:"0 10px",color:"#00CDB1"}},[e._v(e._s(e.selectedCalls))]),e._v("个规则,总分共计"),n("span",{staticStyle:{margin:"0 10px",color:"#00CDB1"}},[e._v(e._s(e.totalScore))])]),n("div",[n("el-button",{on:{click:e.toggleSelection}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleOkDialog}},[e._v("确 定")])],1)])],1)}),s=[],l=(n("d3b7"),n("7329")),c=n("2bcb"),u=window.createEditView({data:function(){return{searchForm:{},selectTableData:[],tableData:[],paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0},loading:!1,multipleSelection:[],selectedRuleId:[]}},components:{ComPagination:l["a"]},created:function(){},computed:{selectedCalls:function(){return this.selectedRuleId.length?this.selectedRuleId.length:0},totalScore:function(){return this.multipleSelection.reduce((function(e,t){return e+t.bonusPoints}),0)}},methods:{toggleSelection:function(){this.$refs.multipleTable.clearSelection(),this.onShow(!1)},getDataList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={describes:t.searchForm.describes,ruleCode:t.searchForm.ruleCode,offset:e||1+(t.paginationInfo.currentPage-1)*t.paginationInfo.pageSize,size:t.paginationInfo.pageSize},t.loading=!0,n.next=4,Object(c["a"])(a);case 4:i=n.sent,i.ok?(t.tableData=i.data.rows,t.paginationInfo.total=i.data.count):t.$message.error("获取数据失败"),t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()},onReset:function(){this.searchForm={},this.isShowSearchMore=!1,this.$set(this.paginationInfo,"currentPage",1),this.getDataList()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleSelectionChange:function(e){this.multipleSelection=e,this.selectedRuleId=e.map((function(e){return e.id})),console.log(this.selectedRuleId)},handleOkDialog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:e.$route.query.id,ruleGroup:e.selectedRuleId.join(","),ruleNumber:e.selectedRuleId.length,totalScore:e.totalScore},t.next=3,Object(c["g"])(n);case 3:if(a=t.sent,a.ok){t.next=8;break}return e.$message.error(a.info),e.onShow(!1),t.abrupt("return",!1);case 8:e.$emit("addSuccess"),e.$refs.multipleTable.clearSelection(),e.onShow(!1);case 11:case"end":return t.stop()}}),t)})))()}}}),d=u,g=(n("8675"),n("2877")),p=Object(g["a"])(d,r,s,!1,null,"673b346c",null),f=p.exports,h={name:"ViewRules",components:{ComEdit:f,ComPagination:l["a"]},data:function(){return{id:"",rowId:0,tableData:[],loading:!1,paginationInfo:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0},multipleSelectionVal:[],selectedRuleId:[]}},created:function(){this.id=this.$route.query.id,this.getDataList()},methods:{handleSelectionChange:function(e){this.multipleSelectionVal=e.map((function(e){return e.id})),console.log(this.multipleSelectionVal)},getDataList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={offset:1+(e.paginationInfo.currentPage-1)*e.paginationInfo.pageSize,size:e.paginationInfo.pageSize,id:e.id},e.loading=!0,t.next=4,Object(c["a"])(n);case 4:a=t.sent,a.ok?(e.loading=!1,e.tableData=a.data.rows,e.paginationInfo.total=a.data.count,e.$refs.ComEdit.multipleSelection=e.tableData,e.selectedRuleId=e.tableData.map((function(e){return e.id})),console.log(e.selectedRuleId)):(e.$message.error("请求出错"),e.loading=!1);case 6:case"end":return t.stop()}}),t)})))()},addSuccess:function(){this.getDataList()},handleDelete:function(){var e=this;this.$confirm("确认删除？").then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.id,ruleGroup:e.multipleSelectionVal.join(",")},t.next=3,Object(c["h"])(a);case 3:if(i=t.sent,console.log(i),i.ok){t.next=8;break}return e.$message.error(i.info),t.abrupt("return",!1);case 8:e.getDataList();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return!1}))},handleAdd:function(){this.$refs.ComEdit.getDataList(),this.$refs.ComEdit.selectedRuleId=this.selectedRuleId,this.$refs.ComEdit.show()},handleSizeChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.pageSize=e,t.$set(t.paginationInfo,"offset",1+(t.paginationInfo.currentPage-1)*e),t.getDataList()}))},handleCurrentChange:function(e){var t=this;this.$nextTick((function(){t.paginationInfo.currentPage=e,t.$set(t.paginationInfo,"offset",1+(e-1)*t.paginationInfo.pageSize),t.getDataList()}))}}},m=h,b=(n("d08a"),Object(g["a"])(m,a,i,!1,null,"7c404bf8",null));t["default"]=b.exports},"390a":function(e,t,n){},7329:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-pagination",{staticClass:"is-background",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"current-page":e.paginationInfo.currentPage,"page-sizes":e.paginationInfo.pageSizes,"page-size":e.paginationInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],o={props:{paginationInfo:{type:Object,required:!0}},methods:{handleSizeChange:function(e){this.paginationInfo.pageSize=e,this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.paginationInfo.currentPage=e,this.$emit("currentChange",e)}}},r=o,s=n("2877"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["a"]=l.exports},8675:function(e,t,n){"use strict";n("390a")},d08a:function(e,t,n){"use strict";n("06ba")},fa65:function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return v}));n("d3b7"),n("b0c0");var a=n("4328"),i=n.n(a),o=n("bc3a"),r=n.n(o),s=n("5c96"),l=n("e5ac"),c=n("a02a"),u=n("60e2"),d=function(e){var t=e.statusCode,n=e.message,a=e.data,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i&&s["Message"].error(n||"发生未知异常");var o=new Error(n);return o.data=a,o.statusCode=t,Promise.reject(o)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u["a"],n=r.a.create();return n.defaults.baseURL=t,n.defaults.withCredentials=!0,e&&(n.defaults.transformRequest=[function(e){return i.a.stringify(e)}]),n.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return t&&!1!==e.isAuth&&(e.headers.Authorization=t),e})),n.interceptors.response.use((function(e){var t=e.data;return t instanceof Blob&&(t.name=Object(c["n"])(e.headers["content-disposition"])),"number"===typeof t.code?t.code?d({message:t.msg,data:t,statusCode:e.status}):t:!1!==t.ok?(Object(l["b"])(e.config.url)&&sessionStorage.setItem("token",e.headers.authorization||e.headers.Authorization),t):d({message:t.info,data:t,statusCode:e.status},"-20"!==t.code)}),(function(e){var t=e.response,n=t||{},a=n.data,i=n.status,o=t?a.info||e.message:"请求失败，请稍候重试";return 401===i?(sessionStorage.removeItem("token"),window.opener?window.close():(c["t"].close(),l["a"].dispatch("GO_LOGIN")),d({message:o,data:a,statusCode:i},!1)):d({message:o,data:a,statusCode:i})})),n},p=g(!0,u["b"]),f=g(),h=g(!0),m=function(){return h.post.apply(h,arguments)},b=g(!1,u["b"]),v=function(){return p.post.apply(p,arguments)}}}]);