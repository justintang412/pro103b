(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213c6b"],{adb4:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[r("el-form-item",{attrs:{label:"日期"}},[r("ui-date-range-picker",{attrs:{clearable:!1},on:{change:e.onTimeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),r("ui-select",{attrs:{label:"客服组",options:e.orderGroups,props:{value:"id",label:"name"},multiple:"",filterable:"",clearable:"","collapse-tags":""},on:{change:e.onSGroupChange},model:{value:e.sGroupIds,callback:function(t){e.sGroupIds=t},expression:"sGroupIds"}}),r("ui-select",{attrs:{label:"客服",options:e.csList,props:{value:"userId",label:"userName"},clearable:"",multiple:"",filterable:"","collapse-tags":""},on:{change:e.onAgentChange},model:{value:e.acceptorIds,callback:function(t){e.acceptorIds=t},expression:"acceptorIds"}})]},proxy:!0},{key:"actions",fn:function(){return[r("el-button",{attrs:{icon:"el-icon-download",type:"primary"},on:{click:function(t){return e.onBatchExport()}}},[e._v("导出报表")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},o=[],a=r("3835"),s=r("1da1"),i=r("5530"),c=(r("96cf"),r("a02a")),l=r("4242"),u={name:"StatisticsWorkorderWorkload",mixins:[window.mixTableView],data:function(){return{csList:[],orderGroups:[],timerange:[],sGroupIds:[],acceptorIds:[],columns:[{label:"客户姓名",prop:"username",minWidth:120},{label:"所属客服组",prop:"groupName",minWidth:100},{label:"创建工单数",prop:"countCreates",minWidth:100},{label:"回复创建工单数次数",prop:"countAnswers",minWidth:140},{label:"催单次数",prop:"countUrges",minWidth:100},{label:"当前未解决工单数",prop:"countUnResolves",minWidth:140},{label:"尚未受理",prop:"countUnAccepts",minWidth:100},{label:"受理中",prop:"countAccepts",minWidth:100},{label:"等待回复",prop:"countForReply",minWidth:100},{label:"解决工单数",prop:"countResolves",minWidth:100},{label:"关闭工单数",prop:"countCloses",minWidth:100},{label:"激活工单数",prop:"countActives",minWidth:100},{label:"平均解决时间",prop:"averageResolveTime",minWidth:120},{label:"平均关闭时间",prop:"averageCloseTime",minWidth:120}]}},mounted:function(){var e=this;this.setInitForm();var t=function(){e.getData(),e.getOrderGroups(),e.getCsList(e.sGroupIds)};t(),Object(c["g"])(this,t)},methods:{setInitForm:function(){this.sGroupIds=[],this.acceptorIds=[];var e=this.$adminCore.formatDate(new Date,"yyyy-MM-dd");this.timerange=[e,e],this.tableForm={beginTime:e,endTime:e},this.searchForm=Object(i["a"])({},this.tableForm)},fetchMethod:function(e){return this.$http("/workLoad/countResolveTime",{params:e}).then((function(e){return e.data}))},onReset:function(){this.setInitForm(),this.onSearch(),this.getCsList()},onSGroupChange:function(e){this.searchForm=Object(i["a"])(Object(i["a"])({},this.searchForm),{},{acceptorIds:void 0,sGroupIds:Object(l["a"])(e)}),this.onSearch(),this.acceptorIds=[],this.getCsList(e)},onAgentChange:function(e){this.searchForm=Object(i["a"])(Object(i["a"])({},this.searchForm),{},{acceptorIds:Object(l["a"])(e)}),this.onSearch()},getOrderGroups:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http("/orderGroup/listGroup");case 2:e.orderGroups=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},getCsList:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$post("/orderGroup/getUserIdByGroups",{groupIds:Object(l["a"])(e)});case 2:t.csList=r.sent.data;case 3:case"end":return r.stop()}}),r)})))()},onTimeChange:function(e){var t=e||[],r=Object(a["a"])(t,2),n=r[0],o=r[1];this.searchForm=Object(i["a"])(Object(i["a"])({},this.searchForm),{},{beginTime:n,endTime:o}),this.onSearch()},onBatchExport:function(){var e=this;Object(c["i"])({fileName:"客服工作量报表数据.xls",action:function(){return e.$http("/workLoad/export",{params:e.searchForm,responseType:"blob"})}})}}},p=u,h=r("2877"),d=Object(h["a"])(p,n,o,!1,null,null,null);t["default"]=d.exports}}]);