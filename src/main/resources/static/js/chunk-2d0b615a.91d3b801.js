(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b615a"],{"1c3e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[n("ui-select",{attrs:{label:"场景",options:e.sceneList,props:{value:"id",label:"sceneName"},clearable:""},on:{change:e.onSceneChange},model:{value:e.searchForm.eventSceneId,callback:function(t){e.$set(e.searchForm,"eventSceneId",t)},expression:"searchForm.eventSceneId"}}),n("ui-select",{attrs:{label:"批次",options:e.batchList,props:{value:"eventId",label:"eventName"},clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.notifystr,callback:function(t){e.$set(e.searchForm,"notifystr",t)},expression:"searchForm.notifystr"}}),n("el-form-item",{attrs:{label:"起止时间"}},[n("ui-date-range-picker",{attrs:{type:"datetimerange"},on:{change:e.onTimerangeChange},model:{value:e.timerange,callback:function(t){e.timerange=t},expression:"timerange"}})],1),n("ui-text-field",{attrs:{label:"呼叫ID"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.callid,callback:function(t){e.$set(e.searchForm,"callid",t)},expression:"searchForm.callid"}}),n("ui-text-field",{attrs:{label:"被叫号码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.searchForm.called,callback:function(t){e.$set(e.searchForm,"called",t)},expression:"searchForm.called"}})]},proxy:!0},{key:"actions",fn:function(){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.onExport}},[e._v("导出")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))},r=[],i=n("1da1"),o=n("5530"),c=n("3835"),l=(n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("a02a")),s={name:"ReportAutoOutCallDetails",mixins:[window.mixTableView],data:function(){return{timerange:[],columns:[{label:"客户姓名",prop:"baseCustName"},{label:"主叫号码",prop:"caller",minWidth:120},{label:"被叫号码",prop:"called",minWidth:120},{label:"外呼时间",prop:"starttime",minWidth:140},{label:"是否接听",prop:"isAnswer",minWidth:80},{label:"接听时间",prop:"connecttime",minWidth:140},{label:"呼叫结果",prop:"callResult",minWidth:120},{label:"是否本人",prop:"isMyselfStr",minWidth:80},{label:"人工坐席工号",prop:"workno",minWidth:110},{label:"通话时长",render:function(e,t){var n=t.row;return e("span",Object(l["k"])(n.totalTimeLen))}},{label:"未接听原因",prop:"dropcause",minWidth:120},{label:"呼叫ID",prop:"callid"},{label:"录音转文本",width:100,fixed:"right",render:this.$hBtns({label:"查看",action:this.onView})},{label:"录音",width:80,fixed:"right",render:this.$hBtns({label:"播放",action:this.onPlayer})}],sceneList:[],batchList:[]}},mounted:function(){var e=this;this.setInitForm();var t=function(){e.getData(),e.getSceneList(e.searchForm.entid)};t(),Object(l["g"])(this,t)},methods:{setInitForm:function(){var e=Object(l["p"])("yyyy-MM-dd hh:mm:ss"),t=Object(c["a"])(e,2),n=t[0],a=t[1];this.timerange=[n,a],this.tableForm={beginTime:n,endTime:a,entid:this.$store.state.userData.entid},this.searchForm=Object(o["a"])({},this.tableForm)},fetchMethod:function(e){return this.$http("/report/callIn/agcAutoDetailReport",{params:e}).then((function(e){return e.data}))},getSceneList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http("/demo/call/scene/byEntid/".concat(e));case 2:t.sceneList=n.sent.data;case 3:case"end":return n.stop()}}),n)})))()},onExport:function(){var e=this;Object(l["i"])({action:function(){return e.$http("/report/callIn/agcAutoDetailReport/export",{params:e.searchForm,responseType:"blob"})}})},onTimerangeChange:function(e){var t=e||[],n=Object(c["a"])(t,2),a=n[0],r=n[1];this.searchForm=Object(o["a"])(Object(o["a"])({},this.searchForm),{},{beginTime:a,endTime:r}),this.onSearch()},getBatchList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,t.$http("/demo/call/scene/get/event/".concat(e,"?flag=1"));case 3:n.t0=n.sent.data,n.next=7;break;case 6:n.t0=[];case 7:t.batchList=n.t0;case 8:case"end":return n.stop()}}),n)})))()},onSceneChange:function(e){this.searchForm=Object(o["a"])(Object(o["a"])({},this.searchForm),{},{notifystr:void 0}),this.onSearch(),this.getBatchList(e)},onView:function(e){this.$openModal((function(){return n.e("chunk-4b7b9799").then(n.bind(null,"80e1"))}),{content:e.content})},onPlayer:function(e){this.$openModal((function(){return n.e("chunk-2d0c55e6").then(n.bind(null,"3f96"))}),{src:e.recordfilename})}}},u=s,h=n("2877"),p=Object(h["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports}}]);