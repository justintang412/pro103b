(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccea7928"],{"75e5":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui-absolute-container"},[n("customer-info",{ref:"CustomerInfo",attrs:{operationSource:1,params:{customerId:e.customerId},onSendSms:e.onSendSms},on:{merged:e.onMerged}}),n("main",{staticClass:"main"},[n("header",{staticClass:"header"},[n("span",{staticClass:"title"},[e._v("历史动态")]),n("el-button",{attrs:{icon:"el-icon-plus",type:"primary",plain:""},on:{click:e.onCreateWorkorder}},[e._v("创建工单")]),n("el-button",{attrs:{icon:"el-icon-plus",type:"primary",plain:""},on:{click:e.onAddContactPlan}},[e._v("添加联系计划")])],1),n("ui-tab-view",{ref:"UiTabView",attrs:{tabs:e.tabs,nocache:""}})],1)],1)},a=[],o=n("5530"),c=n("1da1"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("ac1f"),n("5319"),n("96cf"),n("fd3b")),u=n("977e"),i=n("b2a1"),l=n("c71f"),d=n("65bd"),f=function(e,t){return{render:function(n){return n(e,{props:t})}}},m={name:"CustomerCenterCustomerDetail",nocache:!0,components:{CustomerInfo:s["a"]},computed:{customerId:function(){return this.$route.params.id},callId:function(){return this.$route.params.callId},tabs:function(){var e={customerId:this.customerId};return[{label:"呼叫历史",component:f(u["a"],e)},{label:"工单",component:f(i["a"],e)},{label:"IM历史",component:f(l["a"],e)},{label:"联系计划",component:f(d["a"],e)}]}},watch:{callId:"refresh"},methods:{refresh:function(){var e=this;this.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.CustomerInfo.getInitData();case 2:e.refreshTableData();case 3:case"end":return t.stop()}}),t)}))))},refreshTableData:function(){var e=this.$refs.UiTabView.getCurrentView();e&&(e.getData?e.getData():(e=e.$children[0],e&&e.getData()))},openModal:function(e,t){this.$openModal(e,t,{success:this.refreshTableData})},onCreateWorkorder:function(){this.openModal((function(){return n.e("chunk-497ef431").then(n.bind(null,"4bd2"))}),{customerInfo:{channelId:1,customerId:this.customerId}})},onAddContactPlan:function(){this.openModal((function(){return n.e("chunk-b4cb56ec").then(n.bind(null,"f935"))}),{customerId:this.customerId})},onSendSms:function(e){this.$openModal((function(){return n.e("chunk-97d13c26").then(n.bind(null,"3772"))}),{row:{contactPhone:e},userData:this.$store.state.userData})},onMerged:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.data,n.customerId!==r.customerId){e.next=5;break}n.refresh(),e.next=10;break;case 5:return n.$store.commit("SET_NORMAL_NAVIGATION",!0),a=n.$router.resolve({name:n.$route.name,params:Object(o["a"])(Object(o["a"])({},n.$route.params),{},{id:r.customerId})}),c=a.route,e.next=9,n.$router.replace(c.fullPath);case 9:n.refresh();case 10:case"end":return e.stop()}}),e)})))()}}},h=m,p=(n("78d2"),n("2877")),b=Object(p["a"])(h,r,a,!1,null,"74633480",null);t["default"]=b.exports},"78d2":function(e,t,n){"use strict";n("7a0f")},"7a0f":function(e,t,n){}}]);