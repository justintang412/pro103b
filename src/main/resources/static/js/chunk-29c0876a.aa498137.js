(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29c0876a"],{"0999":function(t,e,n){},6455:function(t,e,n){"use strict";n("0999")},"8e9e":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["home-data-stat-card",{active:t.active,clickable:t.onClick}],on:{click:t.clickHandler}},[n("div",[n("p",{staticClass:"num"},[t._v(t._s(t.data.num))]),n("p",{staticClass:"label"},[t._v(t._s(t.data.label))])])])},i=[],s={props:{data:Object,active:Boolean,onClick:Function},methods:{clickHandler:function(){this.onClick&&this.onClick(this.data)}}},r=s,c=(n("a5d4"),n("2877")),o=Object(c["a"])(r,a,i,!1,null,null,null);e["a"]=o.exports},a5d4:function(t,e,n){"use strict";n("a9aa")},a9aa:function(t,e,n){},c134:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"title"},[n("b",[t._v("实时数据")]),n("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",underline:!1,icon:"el-icon-refresh"},on:{click:t.onRefresh}},[t._v("刷新")])],1),n("ul",{staticClass:"card-list"},t._l(t.stats,(function(t,e){return n("data-stat-card",{key:e,attrs:{data:t}})})),1),n("h4",{staticClass:"title"},[t._v("当前在线接待概况")]),n("ui-table-view",t._g(t._b({},"ui-table-view",Object.assign({},t.viewProps,{hidePager:!0}),!1),t.viewListeners))],1)},i=[],s=n("5530"),r=n("3835"),c=n("1da1"),o=(n("96cf"),n("4328")),l=n.n(o),u=n("8e9e"),m=n("a02a"),d={mixins:[window.mixTableView],components:{DataStatCard:u["a"]},data:function(){return{stats:[{label:"会话数",num:0},{label:"排队人数",num:0},{label:"在线客服人数",num:0}],columns:[{label:"工号",prop:"agentno",minWidth:80},{label:"客服",prop:"username"},{label:"在线技能组",prop:"skillname"},{label:"状态",prop:"status",minWidth:80},{label:"实时接待人数",prop:"users"},{label:"接待上限",prop:"maxusers",minWidth:80},{label:"操作",width:100,fixed:"right",render:this.$hBtns({label:"强制下线",action:this.onOffline})}]}},computed:{imUser:function(){return this.$store.getters.imUser}},mounted:function(){this.onRefresh(),Object(m["g"])(this,this.onRefresh)},methods:{onRefresh:function(){this.getCount(),this.getData()},fetchMethod:function(){return this.$imHttp("/monitor/list",{params:{orgi:this.imUser.orgi}})},onOffline:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm("下线后，该坐席所有会话将结束！确定要强制下线坐席 ".concat(t.agentno," 吗"),"强制下线");case 2:return n.next=4,e.$imHttp.post("/agent/notready",l.a.stringify({orgi:e.imUser.orgi,agentId:t.agentno}));case 4:e.$message("已强制下线坐席 ".concat(t.agentno)),e.onRefresh();case 6:case"end":return n.stop()}}),n)})))()},getCount:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,i,c,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$imHttp("/monitor/realTimeData?orgi=".concat(t.imUser.orgi));case 2:n=e.sent,a=n.data,i=Object(r["a"])(t.stats,3),c=i[0],o=i[1],l=i[2],t.stats=[Object(s["a"])(Object(s["a"])({},c),{},{num:a.sessionCnt}),Object(s["a"])(Object(s["a"])({},o),{},{num:a.queueUserCnt}),Object(s["a"])(Object(s["a"])({},l),{},{num:a.onlineAgentCnt})];case 6:case"end":return e.stop()}}),e)})))()}}},h=d,f=(n("6455"),n("2877")),p=Object(f["a"])(h,a,i,!1,null,"18dd18e4",null);e["default"]=p.exports}}]);