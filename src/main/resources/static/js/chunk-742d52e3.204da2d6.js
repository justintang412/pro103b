(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-742d52e3"],{"1a72":function(t,e,n){"use strict";n("e801")},a33c:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-modal",t._g(t._b({},"ui-modal",t.modalProps,!1),t.$listeners),[n("ui-tab-view",{attrs:{type:"card",tabs:t.tabs,nocache:""}})],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-wrap"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dirs"},[n("ul",{staticClass:"dir-list"},t._l(t.groups,(function(e){return n("li",{key:e.id,class:{active:t.curGroup&&t.curGroup.id===e.id},on:{click:function(n){return t.onViewGroup(e)}}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))]),n("span",{staticClass:"item-actions"},[n("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:function(n){return t.onEditGroup(e)}}}),n("el-link",{attrs:{underline:!1,icon:"el-icon-delete"},on:{click:function(n){return t.onDelGroup(e)}}})],1)])})),0),n("div",{staticClass:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.onEditGroup()}}},[t._v("+添加新分组")]),n("el-button",{attrs:{type:"text",disabled:t.disGroupMoveUp},on:{click:t.onMoveUp}},[t._v("上移")]),n("el-button",{attrs:{type:"text",disabled:t.disGroupMoveDown},on:{click:t.onMoveDown}},[t._v("下移")]),n("el-button",{attrs:{type:"text",disabled:t.disGroupToTop},on:{click:t.onToTop}},[t._v("置顶")])],1)]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.itemLoading,expression:"itemLoading"}],staticClass:"replies"},[n("ul",{staticClass:"dir-list"},t._l(t.items,(function(e){return n("li",{key:e.id,class:{active:t.curItem&&t.curItem.id===e.id},on:{click:function(n){return t.onItemClick(e)}}},[n("span",{staticClass:"title"},[t._v(t._s(e.title))]),n("span",{staticClass:"item-actions"},[n("el-link",{attrs:{underline:!1,icon:"el-icon-edit"},on:{click:function(n){return t.onEditReply(e)}}}),n("el-link",{attrs:{underline:!1,icon:"el-icon-delete"},on:{click:function(n){return t.onDelReply(e)}}})],1)])})),0),n("div",{staticClass:"footer"},[n("el-button",{attrs:{type:"text",disabled:!t.curGroup},on:{click:function(e){return t.onEditReply()}}},[t._v("+添加新回复")]),n("el-button",{attrs:{type:"text",disabled:t.disItemMoveUp},on:{click:t.onItemMoveUp}},[t._v("上移")]),n("el-button",{attrs:{type:"text",disabled:t.disItemMoveDown},on:{click:t.onItemMoveDown}},[t._v("下移")]),n("el-button",{attrs:{type:"text",disabled:t.disItemToTop},on:{click:t.onItemToTop}},[t._v("置顶")])],1)])])},u=[],c=n("1da1"),a=n("5530"),s=(n("96cf"),n("c740"),n("d3b7"),n("498a"),n("b0c0"),{props:["type","store"],data:function(){return{groups:[],items:[],curGroup:null,curItem:null,loading:!1,itemLoading:!1}},computed:{imUser:function(){return this.store.getters.imUser},disGroupMoveUp:function(){var t=this;if(this.curGroup){var e=this.groups.findIndex((function(e){return e.id===t.curGroup.id}));return e<=0}return!0},disGroupMoveDown:function(){var t=this;if(this.curGroup){var e=this.groups.findIndex((function(e){return e.id===t.curGroup.id}));return e>=this.groups.length-1}return!0},disGroupToTop:function(){var t=this;if(this.curGroup){var e=this.groups.findIndex((function(e){return e.id===t.curGroup.id}));return 0===e}return!0},disItemMoveUp:function(){var t=this;if(this.curItem){var e=this.items.findIndex((function(e){return e.id===t.curItem.id}));return e<=0}return!0},disItemMoveDown:function(){var t=this;if(this.curItem){var e=this.items.findIndex((function(e){return e.id===t.curItem.id}));return e>=this.items.length-1}return!0},disItemToTop:function(){var t=this;if(this.curItem){var e=this.items.findIndex((function(e){return e.id===t.curItem.id}));return 0===e}return!0}},watch:{curGroup:{immediate:!0,handler:"onCurGroupChange"}},mounted:function(){this.getData()},methods:{onCurGroupChange:function(){this.curItem=null,this.getItems()},moveItem:function(t){return this.$imPost("/quickReplay/moveSort",t)},onItemMoveUp:function(){var t=this,e=this.items.findIndex((function(e){return e.id===t.curItem.id}));this.itemLoading=!0,this.moveItem({firReplay:this.curItem.id,secReplay:this.items[e-1].id}).then((function(){t.getItems()})).finally((function(){t.itemLoading=!1}))},onItemMoveDown:function(){var t=this,e=this.items.findIndex((function(e){return e.id===t.curItem.id}));this.itemLoading=!0,this.moveItem({firReplay:this.items[e+1].id,secReplay:this.curItem.id}).then((function(){t.getItems()})).finally((function(){t.itemLoading=!1}))},onItemToTop:function(){var t=this;this.itemLoading=!0,this.$imPost("/quickReplay/top",Object(a["a"])(Object(a["a"])({},this.imUser),{},{id:this.curItem.id,type:this.type})).then((function(){t.getItems()})).finally((function(){t.itemLoading=!1}))},onItemClick:function(t){this.curItem=t},move:function(t){return this.$imPost("/quickType/moveSort",t)},onMoveUp:function(){var t=this,e=this.groups.findIndex((function(e){return e.id===t.curGroup.id}));this.loading=!0,this.move({firCategory:this.curGroup.id,secCategory:this.groups[e-1].id}).then((function(){t.getData()})).finally((function(){t.loading=!1}))},onMoveDown:function(){var t=this,e=this.groups.findIndex((function(e){return e.id===t.curGroup.id}));this.loading=!0,this.move({firCategory:this.groups[e+1].id,secCategory:this.curGroup.id}).then((function(){t.getData()})).finally((function(){t.loading=!1}))},onToTop:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$imPost("/quickType/top",Object(a["a"])(Object(a["a"])({},t.imUser),{},{id:t.curGroup.id,type:t.type}));case 4:t.getData(),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onEditReply:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$prompt("回复内容","".concat(t?"编辑":"添加","回复"),{inputValue:t?t.title:"",inputType:"textarea",inputValidator:function(t){return t=t.trim(),t?!(t.length>200)||"回复内容不能超过200个字符":"请输入回复内容"}});case 2:return i=n.sent,r=i.value,o=Object(a["a"])(Object(a["a"])({},e.imUser),{},{creater:e.imUser.agentId,title:r.trim(),id:t&&t.id,category:e.curGroup.id,type:e.type}),n.next=7,t?e.$imHttp.post("/quickReplay/".concat(t.id),o):e.$imHttp.post("/quickReplay/",o);case 7:e.getItems();case 8:case"end":return n.stop()}}),n)})))()},onDelReply:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm("确定要删除该回复吗？","删除提示");case 2:return n.next=4,e.$imHttp("/quickReplay/".concat(t.id));case 4:e.curItem&&e.curItem.id===t.id&&(e.curItem=null),e.getItems();case 6:case"end":return n.stop()}}),n)})))()},getData:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$imHttp("/quickType/list",{params:{orgi:t.imUser.orgi,agentId:t.imUser.agentId,type:t.type}});case 2:t.groups=e.sent.data;case 3:case"end":return e.stop()}}),e)})))()},onEditGroup:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$prompt("请输入分组名称","".concat(t?"编辑":"添加","分组"),{inputValue:t?t.name:"",inputValidator:function(t){return t=t.trim(),t?!(t.length>20)||"分组名称不能超过20个字符":"分类名称不能为空"}});case 2:return i=n.sent,r=i.value,o=Object(a["a"])(Object(a["a"])({},e.imUser),{},{name:r.trim(),type:e.type,creater:e.imUser.agentId,id:t&&t.id}),n.next=7,t?e.$imHttp.post("/quickType/".concat(t.id),o):e.$imHttp.post("/quickType/",o);case 7:e.getData();case 8:case"end":return n.stop()}}),n)})))()},onDelGroup:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm("确定要删除该分组吗？","删除提示");case 2:return n.next=4,e.$imHttp("/quickType/".concat(t.id));case 4:e.curGroup&&e.curGroup.id===t.id&&(e.curGroup=null),e.getData();case 6:case"end":return n.stop()}}),n)})))()},onViewGroup:function(t){this.curGroup=t},getItems:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.curGroup){e.next=6;break}return e.next=3,t.$imHttp("/quickReplay/list?category=".concat(t.curGroup.id));case 3:e.t0=e.sent.data,e.next=7;break;case 6:e.t0=[];case 7:t.items=e.t0;case 8:case"end":return e.stop()}}),e)})))()}}}),p=s,d=(n("bc83"),n("2877")),l=Object(d["a"])(p,o,u,!1,null,"5e4eb7e8",null),m=l.exports,f={props:["store"],data:function(){var t=this;return{tabs:[{label:"个人",component:{render:function(e){return e(m,{props:{type:"pri",store:t.store}})}}},{label:"公共",component:{render:function(e){return e(m,{props:{type:"pub",store:t.store}})}}}],modalProps:{title:"快捷回复",width:"800px",hideFooter:!0}}}},h=f,v=(n("1a72"),Object(d["a"])(h,i,r,!1,null,"ef25d8e0",null));e["default"]=v.exports},ada6:function(t,e,n){},bc83:function(t,e,n){"use strict";n("ada6")},e801:function(t,e,n){}}]);