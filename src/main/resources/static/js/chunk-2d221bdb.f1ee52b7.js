(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221bdb"],{cc49:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{closable:!1}},[e._v(" 短信触发器可以在预设好的触发条件下自动执行发送短信。"),r("br"),e._v(" 场景举例：客户拨打客服电话进入排队等待中，当客户因等待时间过长主动挂断电话时，则触发排队离开的触发器，系统会自动发送短信对该客户进行安抚。 ")]),r("ui-table-view",e._g(e._b({scopedSlots:e._u([{key:"search",fn:function(){return[r("ui-select",{attrs:{label:"开启状态",clearable:""},on:{change:e.onSearch},model:{value:e.searchForm.triggerType,callback:function(t){e.$set(e.searchForm,"triggerType",t)},expression:"searchForm.triggerType"}},[r("el-option",{attrs:{label:"已开启",value:"1"}}),r("el-option",{attrs:{label:"已关闭",value:"2"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.onEdit()}}},[e._v("新建触发器")])]},proxy:!0}])},"ui-table-view",e.viewProps,!1),e.viewListeners))],1)},a=[],i=r("1da1"),s=r("5530"),c=(r("96cf"),r("d3b7"),r("3ca3"),r("ddb0"),r("a434"),r("a02a")),o={name:"SmsTriggerSetting",mixins:[window.mixTableView],data:function(){var e=this;return{columns:[{label:"标题",prop:"triggerName"},{label:"描述",prop:"triggerDesc"},{label:"状态",render:function(t,r){var n=r.row,a=r.$index;return t("div",[t("el-switch",{style:"margin-right:5px;",props:{value:n.triggerType,activeValue:"1",inactiveValue:"2"},on:{change:e.onUpdateStatus.bind(e,a)}}),"1"===n.triggerType?"开启":"关闭"])}},{label:"操作",width:100,fixed:"right",render:this.$hBtns([{label:"编辑",action:this.onEdit},{label:"删除",action:this.onDelete}])}]}},computed:{userData:function(){return this.$store.state.userData}},mounted:function(){this.getData(),Object(c["g"])(this,this.getData)},methods:{fetchMethod:function(e){return this.$http.post("/message/trigger/selectTrigger",Object(s["a"])(Object(s["a"])({},e),{},{entid:this.userData.entid})).then((function(e){return e.data}))},onEdit:function(e){this.$openModal((function(){return r.e("chunk-cc252170").then(r.bind(null,"831b"))}),{row:e,entId:this.userData.entid},{success:this.onEditSuccess})},onDelete:function(e){var t=this;this.delData({action:function(){return t.$http.post("/message/trigger/deleteTrigger",e)}})},onUpdateStatus:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.tableData.data,a=n[e],i="1"===a.triggerType?"2":"1",r.next=5,t.$confirm("确定要".concat("1"===i?"开启":"关闭","该触发器？"),"修改状态");case 5:return r.next=7,t.$http.post("/message/trigger/updateTriggerType",Object(s["a"])(Object(s["a"])({},a),{},{triggerType:i}));case 7:n.splice(e,1,Object(s["a"])(Object(s["a"])({},a),{},{triggerType:i}));case 8:case"end":return r.stop()}}),r)})))()}}},u=o,l=r("2877"),g=Object(l["a"])(u,n,a,!1,null,null,null);t["default"]=g.exports}}]);