(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b38e12d"],{"1c86":function(e,t,i){"use strict";i("69a9")},"274e":function(e,t,i){},2963:function(e,t,i){"use strict";i("274e")},"40b6":function(e,t,i){},"69a9":function(e,t,i){},"6e6b":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-image",{ref:"Image",attrs:{src:e.curViewUrl,"preview-src-list":[e.curViewUrl]}})},s=[],r=(i("d3b7"),i("3ca3"),i("ddb0"),{data:function(){return{curViewUrl:null}},methods:{preview:function(e){var t=e.fileType,n=e.fileUrl;"image"===t?this.imagePreview(n):"video"===t&&this.$openModal((function(){return i.e("chunk-59a1b65e").then(i.bind(null,"0589"))}),{src:n})},imagePreview:function(e){var t,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35,s=1,r=100;this.curViewUrl=e;var a=function e(){var a=i.$el.querySelector(".el-image img");if(a)a.click();else{if(++s<n)return s>5&&!t&&(r+=100,t=i.$loading()),setTimeout(e,r);i.$message.warning("图片打开失败，请重试！")}t&&t.close()};a()}}}),a=r,l=(i("1c86"),i("2877")),o=Object(l["a"])(a,n,s,!1,null,"54e0d375",null);t["a"]=o.exports},"7a87":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ui-modal",e._g(e._b({},"ui-modal",e.modalProps,!1),e.$listeners),[i("com-msg-list",{attrs:{msgList:e.msgList}})],1)},s=[],r=i("1da1"),a=(i("96cf"),i("e6f4")),l=i("b233"),o={components:{ComMsgList:l["a"]},props:["row"],data:function(){return{modalProps:{title:"互动记录",drawer:!0,hideOk:!0},msgList:[]}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["g"])(e.row.callId);case 2:e.msgList=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},c=o,u=i("2877"),d=Object(u["a"])(c,n,s,!1,null,null,null);t["default"]=d.exports},b233:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"com-media-link-record-msglist"},[i("ul",e._l(e.msgList,(function(t){return i("li",{key:t.id},["customer"===t.messageBelong?i("div",{staticClass:"customer"},[i("div",{staticClass:"inner"},[i("header",[e._v(" 客户 "),i("span",{staticClass:"time"},[e._v(e._s(t.recordTime))])]),i("main",{class:{isMedia:e.isMedia(t)}},["form"===t.fileType?i("com-form-msg",{attrs:{content:e.getContent(t)},on:{preview:e.onPreview}}):"video"===t.fileType?i("video",{attrs:{src:t.fileUrl,controls:""},on:{play:e.onPlay}}):i("el-image",{attrs:{src:t.fileUrl,"preview-src-list":[t.fileUrl]}})],1)])]):"service"===t.messageBelong?i("div",{staticClass:"service"},[i("div",{staticClass:"inner"},[i("header",[e._v(" 客服"+e._s(t.workNo)+" "),i("span",{staticClass:"time"},[e._v(e._s(t.recordTime))])]),i("main",[i("div",{domProps:{innerHTML:e._s(e.parseContent(t))}})])])]):i("div",{staticClass:"service"},[i("div",{staticClass:"inner"},[i("header",[i("i",{staticClass:"el-icon-video-camera-solid icon"}),e._v(" 系统录制 "),i("span",{staticClass:"time"},[e._v(e._s(t.recordTime))])]),i("main",{staticClass:"isMedia"},["video"===t.recordFiletype?i("video",{attrs:{src:t.recordUrl,controls:""},on:{play:e.onPlay}}):"audio"===t.recordFiletype?i("audio",{attrs:{src:t.recordUrl,controls:""},on:{play:e.onPlay}}):e._e()])])])])})),0),i("media-previewer",{ref:"Previewer"})],1)},s=[],r=i("2909"),a=(i("caad"),i("d3b7"),i("159b"),i("ac1f"),i("5319"),i("99af"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[e._v("客户表单：")]),i("ul",{staticClass:"list"},e._l(e.content,(function(t,n){return i("li",{key:n,staticClass:"item"},[i("span",{staticClass:"label"},[e._v(e._s(t.field.title))]),e.isMedia(t)?[t.name?i("el-link",{staticClass:"link",attrs:{underline:!1,type:"primary"},on:{click:function(i){return e.onPreview(t)}}},[e._v("查看")]):e._e()]:e.isFile(t)?[t.name?i("el-link",{staticClass:"link",attrs:{underline:!1,type:"primary"},on:{click:function(i){return e.onDownload(t)}}},[e._v("下载附件")]):e._e()]:i("span",{staticClass:"value"},[e._v(e._s(e.getValue(t)))])],2)})),0)])}),l=[],o=(i("a15b"),i("b0c0"),i("1276"),i("a02a")),c=i("e6f4"),u={props:["content"],methods:{getValue:function(e){var t=c["b"],i=+e.field.type;return i===t.CASCADER?(e.name||[]).join("/"):i===t.DATE?this.$adminCore.formatDate(e.name):e.name+""},isMedia:function(e){return["image","video"].includes(e.fileType)},isFile:function(e){return+e.field.type===c["b"].UPLOAD},onPreview:function(e){this.$emit("preview",{fileType:e.fileType,fileUrl:e.name})},onDownload:function(e){var t=this;Object(o["i"])({fileName:e.name.split("/").pop(),action:function(){return t.$http(e.name,{responseType:"blob"})}})}}},d=u,m=(i("2963"),i("2877")),f=Object(m["a"])(d,a,l,!1,null,"5a75ddb4",null),v=f.exports,p=i("6e6b"),g={components:{ComFormMsg:v,MediaPreviewer:p["a"]},props:["msgList"],methods:{getContent:function(e){return JSON.parse(e.messageContact)},isMedia:function(e){return["video","image"].includes(e.fileType)},onPreview:function(e){this.$refs.Previewer.preview(e)},onPlay:function(e){var t=e.target,i=Object(r["a"])(this.$el.querySelectorAll("video,audio"));i.forEach((function(e){e!==t&&e.pause()}))},parseContent:function(e){var t=e.messageContact+(e.showUrl||""),i=/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/gim;return t.replace(i,(function(e){return'<a class="link" target="_blank" href='.concat(e,">").concat(e,"</a>")}))}}},w=g,_=(i("be99"),Object(m["a"])(w,n,s,!1,null,null,null));t["a"]=_.exports},be99:function(e,t,i){"use strict";i("40b6")}}]);