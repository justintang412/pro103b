(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a353a156"],{"103c":function(t,e,n){"use strict";n.r(e);var a,r,c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{staticClass:"card-list"},t._l(t.stats,(function(e){return n("data-stat-card",{key:e.value,attrs:{data:e,active:t.current===e.value,onClick:t.onCardClick}})})),1),n(t.curView,{key:t.current,ref:"View",tag:"component"})],1)},i=[],o=n("5530"),l=n("3835"),s=n("1da1"),u=(n("96cf"),n("a02a")),d=n("8e9e"),h=n("ade3"),p={NOTEXECUT:0,EXECUTING:2,COMPLETED:4,PAUSED:1,EXPIRED:3},m=function(t){var e;return e={},Object(h["a"])(e,t.NOTEXECUT,{text:"未执行",type:""}),Object(h["a"])(e,t.EXECUTING,{text:"执行中",type:"success"}),Object(h["a"])(e,t.COMPLETED,{text:"已完成",type:"info"}),Object(h["a"])(e,t.PAUSED,{text:"已暂停",type:"danger"}),Object(h["a"])(e,t.EXPIRED,{text:"已过期",type:"warning"}),e}(p),b={PAUSED:0,EXECUTING:1,COMPLETED:3,CLOSED:4},f=(function(t){var e;e={},Object(h["a"])(e,t.PAUSED,{text:"暂停",type:"danger"}),Object(h["a"])(e,t.EXECUTING,{text:"执行"}),Object(h["a"])(e,t.COMPLETED,{text:"完成",type:"success"}),Object(h["a"])(e,t.CLOSED,{text:"关闭",type:"info"})}(b),{1:"一般",2:"加急",3:"紧急"}),v={mixins:[window.mixTableView],data:function(){return{columns:[{label:"批次名称",prop:"eventName"},{label:"执行进度",minWidth:120,render:function(t,e){var n=e.row,a=n.assignCount?100*Math.min(n.assignCalledCount/n.assignCount,1):0;return 2===n.assignType?t("div",n.assignCalledCount):t("div",{class:"flexbox"},[t("el-progress",{props:{showText:!1,strokeWidth:6,percentage:a}}),t("span",n.assignCalledCount+"/"+n.assignCount)])}},{label:"优先级",minWidth:80,render:function(t,e){var n=e.row;return t("div",f[n.eventLevel])}},{label:"当前状态",minWidth:80,render:function(t,e){var n=e.row,a=m[n.eventStatus];return a?t("el-tag",{props:{type:a.type}},a.text):t("div")}},{label:"场景",prop:"sceneName"},{label:"创建人",prop:"creatorName"},{label:"创建时间",prop:"createTime",minWidth:140},{label:"到期时间",minWidth:140,render:function(t,e){var n=e.row;return t("div",{1:"永久",2:n.validEndTime}[n.validTimeType])}},{label:"操作",width:100,fixed:"right",render:this.$hBtns({label:"详情",action:this.onView})}]}},methods:{fetchMethod:function(t){return this.$http("/ccas/call/manual/event/my/list",{params:t}).then((function(t){return t.data}))},onView:function(t){this.$router.push({name:"outbound-my-task-batch-detail",params:{id:t.eventId}})}},render:function(t){return t("ui-table-view",{attrs:this.viewProps,on:this.viewListeners})}},w=v,C=(n("b179"),n("2877")),k=Object(C["a"])(w,a,r,!1,null,"8958cd54",null),y=k.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-table-view",t._g(t._b({scopedSlots:t._u([{key:"search",fn:function(){return[n("ui-text-field",{attrs:{label:"联系人"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.searchForm.contactName,callback:function(e){t.$set(t.searchForm,"contactName",e)},expression:"searchForm.contactName"}}),n("ui-text-field",{attrs:{label:"联系电话"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.searchForm.contactPhone,callback:function(e){t.$set(t.searchForm,"contactPhone",e)},expression:"searchForm.contactPhone"}}),n("ui-select",{attrs:{label:"状态",clearable:"",options:t.stateMap},on:{change:t.onSearch},model:{value:t.searchForm.planStatus,callback:function(e){t.$set(t.searchForm,"planStatus",e)},expression:"searchForm.planStatus"}})]},proxy:!0},{key:"actions",fn:function(){return[n("el-button",{attrs:{type:"danger",disabled:!t.selectedRow.length},on:{click:function(e){return t.onDelete(t.selectedRow)}}},[t._v("删除计划")])]},proxy:!0}])},"ui-table-view",t.viewProps,!1),t.viewListeners))},x=[],O=(n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),{mixins:[window.mixTableView],data:function(){var t={1:"已预约",2:"已联系"};return{stateMap:t,columns:[{type:"selection"},{label:"联系人",prop:"contactName"},{label:"联系电话",prop:"contactPhone"},{label:"性别",render:function(t,e){var n=e.row;return t("div",{1:"男",2:"女"}[n.contactSex])}},{label:"预约时间",prop:"reserveTime",minWidth:140},{label:"联系状态",render:function(e,n){var a=n.row;return e("div",t[a.planStatus])}},{label:"操作",width:160,fixed:"right",render:this.$hBtns([{label:"呼叫",action:this.onCall},{label:"短信",action:this.onSendSms},{label:"编辑",action:this.onEdit},{label:"删除",action:this.onDelete}])}]}},created:function(){this.setInitForm()},methods:{setInitForm:function(){this.tableForm={planStatus:"1"},this.searchForm=Object(o["a"])({},this.tableForm)},fetchMethod:function(t){return this.$http("/ccas/call/manual/contact/my/all/list",{params:t}).then((function(t){return t.data}))},onDelete:function(t){var e=this;this.delData({rows:t,action:function(t){return e.$http("/ccas/call/manual/contact/del",{params:{ids:t.map((function(t){return t.planId}))+""}})}})},onEdit:function(t){this.$openModal((function(){return n.e("chunk-4118640c").then(n.bind(null,"f935"))}),{row:t},{success:this.onEditSuccess})},onSendSms:function(t){this.$openModal((function(){return n.e("chunk-97d13c26").then(n.bind(null,"3772"))}),{row:t,userData:this.$store.state.userData})},onCall:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$http("/ccas/call/info/contact/plan/call/check/".concat(t.planId));case 3:e.$eventBus.$emit("phonebar",{type:"makecall",payload:{args:[t.contactPhone,""],params:{planId:t.planId}}}),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),e.getData();case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}}}),g=O,j=Object(C["a"])(g,E,x,!1,null,null,null),D=j.exports,S={name:"HomeMyOutbound",components:{DataStatCard:d["a"]},data:function(){return{stats:[{label:"联系计划",num:0,value:1},{label:"我的外呼批次（预览）",num:0,value:2},{label:"可抢单预览外呼",num:0,value:3}],current:1}},computed:{curView:function(){return 1===this.current?D:y}},mounted:function(){this.getData(),Object(u["g"])(this,this.getData)},methods:{getData:function(){this.getCounts(),this.$refs.View.getData()},onCardClick:function(t){var e=this;this.current=t.value,this.$nextTick((function(){e.getData()}))},getCounts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,c,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http("/ccas/call/info/home/call/info/count");case 2:n=e.sent,a=n.data,r=Object(l["a"])(t.stats,3),c=r[0],i=r[1],s=r[2],t.stats=[Object(o["a"])(Object(o["a"])({},c),{},{num:a.myPlanCount}),Object(o["a"])(Object(o["a"])({},i),{},{num:a.myAllEventCount}),Object(o["a"])(Object(o["a"])({},s),{},{num:a.myGrabEventCount})];case 6:case"end":return e.stop()}}),e)})))()}}},T=S,$=(n("e9bc"),Object(C["a"])(T,c,i,!1,null,"b0478430",null));e["default"]=$.exports},5727:function(t,e,n){},"7d0e":function(t,e,n){},"8e9e":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["home-data-stat-card",{active:t.active,clickable:t.onClick}],on:{click:t.clickHandler}},[n("div",[n("p",{staticClass:"num"},[t._v(t._s(t.data.num))]),n("p",{staticClass:"label"},[t._v(t._s(t.data.label))])])])},r=[],c={props:{data:Object,active:Boolean,onClick:Function},methods:{clickHandler:function(){this.onClick&&this.onClick(this.data)}}},i=c,o=(n("a5d4"),n("2877")),l=Object(o["a"])(i,a,r,!1,null,null,null);e["a"]=l.exports},a5d4:function(t,e,n){"use strict";n("a9aa")},a9aa:function(t,e,n){},b179:function(t,e,n){"use strict";n("7d0e")},e9bc:function(t,e,n){"use strict";n("5727")}}]);