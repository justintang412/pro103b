(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eb722f1"],{4126:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ui-modal",e._g(e._b({ref:"Modal",scopedSlots:e._u([{key:"footer",fn:function(){return[r("el-button",{on:{click:e.onCancel}},[e._v("关闭")])]},proxy:!0}])},"ui-modal",e.modalProps,!1),e.$listeners),[r("el-form",{ref:"Form",attrs:{"label-width":"7em",model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"全文名称"}},[e._v(e._s(e.row.itemFullName))]),r("el-form-item",{attrs:{label:"收集日期"}},[e._v(e._s(e.row.receiveDate))]),r("el-form-item",{attrs:{label:"收集人"}},[e._v(e._s(e.row.receiver))]),r("p",[e._v("下载文件 "),r("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.onDownload}},[e._v(e._s(e.row.itemFullName+"."+e.row.itemFormat))])],1)],1)],1)},o=[],i=r("5530"),a=r("1da1"),s=(r("96cf"),r("d3b7"),r("e9c4"),r("d81d"),r("a02a")),u=r("ec26"),l={props:["row"],data:function(){var e=this;return{file:null,users:[],form:{templates:[]},modalProps:{title:"详情",drawer:!0,width:"600px",isEdit:!!this.row,onSubmit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.Form.validate();case 2:if(r=e.form,!e.file){t.next=10;break}return n=new FormData,n.append("file",e.file),n.append("itemFullName",r.itemFullName),n.append("receiveDate",r.receiveDate),n.append("receiver",r.receiver),t.abrupt("return",e.$http.post("/sys/item/save",n));case 10:return o="请选择文件",e.$message.error(o),t.abrupt("return",Promise.reject(new Error(o)));case 13:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()},dateOptions:{disabledDate:function(e){return e<new Date}},rules:{itemFullName:Object(s["v"])("请输入电子全文名称"),receiveDate:Object(s["v"])("请输入收集日期"),receiver:Object(s["v"])("请选择收集人")}}},mounted:function(){var e=this.row;this.onReset(e)},methods:{onSubmit:function(){this.form.item_id||(this.form.itemId=Object(u["a"])()),this.$refs.Modal.submit()},onCancel:function(){console.log(this.row),this.$refs.Modal.show(!1)},onReset:function(e){var t=this;this.form=e?Object(i["a"])(Object(i["a"])({},JSON.parse(JSON.stringify(e))),{},{orderFiles:e.orderFiles?e.orderFiles.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{name:t.getFileName(e.fileName)})})):[]}):{}},onChange:function(e){var t=e.target,r=t.files[0];r?this.file=r:this.$message.error("请选择文件")},onSelectFile:function(){this.$refs.File.click()},onDownload:function(){var e=this;Object(s["i"])({fileName:this.row.itemFullName+"."+this.row.itemFormat,action:function(){return e.$post("/sys/item/download",{itemId:e.row.itemId},{responseType:"blob"})}})}}},c=l,f=(r("5c41"),r("2877")),m=Object(f["a"])(c,n,o,!1,null,"54327852",null);t["default"]=m.exports},5585:function(e,t,r){},"5c41":function(e,t,r){"use strict";r("5585")},ec26:function(e,t,r){"use strict";var n,o=new Uint8Array(16);function i(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function s(e){return"string"===typeof e&&a.test(e)}for(var u=s,l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r}var m=f;function d(e,t,r){e=e||{};var n=e.random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return m(n)}t["a"]=d}}]);